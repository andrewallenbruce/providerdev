{
  "hash": "2dfb10af62001771facf3ba51d693c67",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"URL Object\"\neditor_options: \n   chunk_output_type: console\n---\n\n::: {.cell}\n\n:::\n\n## S7 Sketches\n\n::: {.cell}\n\n```{.r .cell-code}\nPATH <- new_class(\n  name = \"PATH\",\n  properties = list(\n    head = new_property(\n      class_character,\n      default = NA_character_,\n      setter = function(self, value) {\n        self@head <- value\n        self\n      }),\n    uuid = new_property(\n      class_character,\n      default = NA_character_,\n      setter = function(self, value) {\n        self@uuid <- value\n        self\n      }),\n    tail = new_property(\n      class_character,\n      default = NA_character_,\n      setter = function(self, value) {\n        self@tail <- value\n        self\n      })\n  ),\n  validator = function(self) { \n    if (length(self@head) != 1L) {\n      \"@head must be length 1\"\n    } else if (length(self@uuid) != 1L) {\n      \"@uuid must be length 1\"  \n    } else if (length(self@tail) != 1L) {\n      \"@tail must be length 1\" \n    }\n  }\n)\n\nURL <- new_class(\n  name = \"URL\",\n  properties = list(\n    scheme = new_property(class_character, default = \"https\"),\n    host = new_property(class_character, default = \"data.cms.gov\"),\n    path = new_property(class = PATH)\n  )\n)\n```\n:::\n\n## Examples\n\n::: {.cell}\n\n```{.r .cell-code}\nurls <- c(\n  \"https://data.cms.gov/data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data/stats\",\n  \"https://data.cms.gov/data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data-viewer?size=5000&offset=10000\"\n  )\n\nurlparse::url_parse_v2(urls) |> \n  handle_na() |> \n  select(path, raw_query)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 2 × 2\n  path                                                                 raw_query\n  <chr>                                                                <chr>    \n1 /data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data/stats <NA>     \n2 /data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data-view… size=500…\n```\n\n\n:::\n:::\n\nRe-setting part of the path:\n\n::: {.cell}\n\n```{.r .cell-code}\nex <- URL(\n  path = PATH(\n    head = \"/data-api/v1/dataset/\",\n    uuid = \"9887a515-7552-4693-bf58-735c77af46d7\",\n    tail = \"data-viewer\"))\n\nex\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<URL>\n @ scheme: chr \"https\"\n @ host  : chr \"data.cms.gov\"\n @ path  : <PATH>\n .. @ head: chr \"/data-api/v1/dataset/\"\n .. @ uuid: chr \"9887a515-7552-4693-bf58-735c77af46d7\"\n .. @ tail: chr \"data-viewer\"\n```\n\n\n:::\n\n```{.r .cell-code}\nex@path@tail <- \"data/stats\"\n\nex\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<URL>\n @ scheme: chr \"https\"\n @ host  : chr \"data.cms.gov\"\n @ path  : <PATH>\n .. @ head: chr \"/data-api/v1/dataset/\"\n .. @ uuid: chr \"9887a515-7552-4693-bf58-735c77af46d7\"\n .. @ tail: chr \"data/stats\"\n```\n\n\n:::\n:::\n\nWith httr2:\n\n::: {.cell}\n\n```{.r .cell-code}\nhttr2::url_parse(\n  base_url = \"https://data.cms.gov/provider-data/\", \n  url      = \"api/1/datastore/query/mj5m-pzi6/0\") |> \n  httr2::url_modify_query(\n    offset = 0, \n    limit  = 2000)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n<httr2_url>\nhttps://data.cms.gov/provider-data/api/1/datastore/query/mj5m-pzi6/0?offset=0&limit=2000\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• scheme: https\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• hostname: data.cms.gov\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• path: /provider-data/api/1/datastore/query/mj5m-pzi6/0\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• query:\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n  • offset: 0\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n  • limit: 2000\n```\n\n\n:::\n:::\n\nWith S7:\n\n::: {.cell}\n\n```{.r .cell-code}\nex2 <- URL(\n  path = PATH(\n    head = \"/provider-data/api/1/datastore/query/\",\n    uuid = \"mj5m-pzi6\",\n    tail = \"0\"))\n\nex2\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<URL>\n @ scheme: chr \"https\"\n @ host  : chr \"data.cms.gov\"\n @ path  : <PATH>\n .. @ head: chr \"/provider-data/api/1/datastore/query/\"\n .. @ uuid: chr \"mj5m-pzi6\"\n .. @ tail: chr \"0\"\n```\n\n\n:::\n:::\n\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}