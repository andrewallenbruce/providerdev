{
  "hash": "c4d35d615ee253b958743293b61f696e",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Providers\"\neditor_options: \n   chunk_output_type: console\n---\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<a href=\"https://andrewallenbruce.github.io/provider/reference/providers.html\" class=\"btn btn-outline-secondary\" role=\"button\" target=\"_blank\">\n<i class=\"bi bi-box-arrow-up-right\"></i>\nDocumentation\n</a>\n<a href=\"https://github.com/andrewallenbruce/provider/blob/main/R/providers.R\" class=\"btn btn-outline-secondary\" role=\"button\" target=\"_blank\">\n<i class=\"bi bi-box-arrow-up-right\"></i>\nSource\n</a>\n```\n\n:::\n:::\n\n   * Base URL: `https://data.cms.gov/data-api/v1/`\n   * Identifier: `2457ea29-fc82-48b0-86ec-3b0755de7515`\n\n## Objects\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nmain_data_dl <- main_data()\n\nmain_dataset <- main_data_dl |> \n  collapse::fselect(-distribution) |>\n  collapse::frename(remove_at_symbol) |> \n  remove_all_na()\n\nmain_distribution <- main_data_dl |> \n  collapse::fselect(distribution) |>\n  tidyr::unnest(distribution) |> \n  collapse::frename(remove_at_symbol)\n```\n:::\n\n## URLS\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nurls <- list(\n  base = \"https://data.cms.gov/data-api/v1/dataset\",\n  identifier = filter(\n    main_dataset, \n    fuimus::sf_detect(title, \"Fee-For-Service\")) |> \n    pull(identifier) |> \n    fuimus::sf_remove(\"https://data.cms.gov/data-api/v1/dataset/\"),\n  accessURL = filter(\n    main_distribution, \n    fuimus::sf_detect(title, \"Fee-For-Service\"), \n    description == \"latest\") |> \n    pull(accessURL) |> \n    fuimus::sf_remove(\"https://data.cms.gov/data-api/v1/dataset/\"),\n  resourcesAPI = filter(\n    main_distribution, \n    fuimus::sf_detect(title, \"Fee-For-Service\"), \n    description == \"latest\") |> \n    pull(resourcesAPI) |> \n    fuimus::sf_remove(\"https://data.cms.gov/data-api/v1/dataset\")\n  )\n\nurls |> purse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n- $base         c1 https://data.cms.gov/data-api/v1/dataset\n- $identifier   c1 2457ea29-fc82-48b0-86ec-3b0755de7515/data-viewer\n- $accessURL    c1 2457ea29-fc82-48b0-86ec-3b0755de7515/data\n- $resourcesAPI c1 -resources/2457ea29-fc82-48b0-86ec-3b0755de7515\n```\n\n\n:::\n:::\n\n\n## No. of Results\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nrequest(urls$base) |> \n  req_url_path_append(urls$identifier) |> \n  req_url_path_append(\"stats\") |> \n  req_perform() |> \n  resp_body_json(simplifyVector = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$meta\n$meta$success\n[1] TRUE\n\n$meta$datset_uuid\n[1] \"2457ea29-fc82-48b0-86ec-3b0755de7515\"\n\n\n$data\n$data$found_rows\n[1] 2907050\n\n$data$total_rows\n[1] 2907050\n\n\n$links\n$links$self\n$links$self$href\n[1] \"https://data.cms.gov/data-api/v1/dataset/2457ea29-fc82-48b0-86ec-3b0755de7515/data-viewer/stats\"\n```\n\n\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nquery_syntax <- c(\n  \"filter[STATE_CD]\" = \"GA\",\n  \"filter[LAST_NAME]\" = \"SMITH\"\n  )\n\nrequest(urls$base) |> \n  req_url_path_append(urls$identifier) |> \n  req_url_path_append(\"stats\") |> \n  req_url_query(!!!query_syntax) |> \n  req_perform() |> \n  resp_body_json(simplifyVector = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$meta\n$meta$success\n[1] TRUE\n\n$meta$datset_uuid\n[1] \"2457ea29-fc82-48b0-86ec-3b0755de7515\"\n\n\n$data\n$data$found_rows\n[1] 548\n\n$data$total_rows\n[1] 2907050\n\n\n$links\n$links$self\n$links$self$href\n[1] \"https://data.cms.gov/data-api/v1/dataset/2457ea29-fc82-48b0-86ec-3b0755de7515/data-viewer/stats?filter%5BSTATE_CD%5D=GA&filter%5BLAST_NAME%5D=SMITH\"\n```\n\n\n:::\n:::\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nresp <- request(urls$base) |> \n  req_url_path_append(urls$identifier) |> \n  req_url_query(!!!query_syntax, size = 5000) |> \n  req_perform() |> \n  resp_body_json(simplifyVector = TRUE)\n\nresp$data |> \n  as.data.frame() |> \n  tibble() |> \n  setNames(\n    c(\n      \"NPI\", \n      \"PECOS_ASCT_CNTL_ID\", \n      \"ENRLMT_ID\", \n      \"PROVIDER_TYPE_CD\",\n      \"PROVIDER_TYPE_DESC\",\n      \"STATE_CD\",\n      \"FIRST_NAME\",\n      \"MDL_NAME\",\n      \"LAST_NAME\",\n      \"ORG_NAME\",\n      \"GNDR_SW\"\n      ))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 548 × 11\n   NPI        PECOS_ASCT_CNTL_ID ENRLMT_ID   PROVIDER_TYPE_CD PROVIDER_TYPE_DESC\n   <chr>      <chr>              <chr>       <chr>            <chr>             \n 1 1497796718 2961314075         I200311050… 14-93            PRACTITIONER - EM…\n 2 1215028253 0244136562         I200312090… 14-11            PRACTITIONER - IN…\n 3 1013924828 2264333723         I200401160… 14-21            PRACTITIONER - CA…\n 4 1073572657 8325949506         I200401200… 14-05            PRACTITIONER - AN…\n 5 1700886058 2163317660         I200402190… 14-41            PRACTITIONER - OP…\n 6 1174597439 4880589621         I200402200… 14-93            PRACTITIONER - EM…\n 7 1265491294 5092601682         I200402260… 14-50            PRACTITIONER - NU…\n 8 1063447951 0345138228         I200403100… 14-05            PRACTITIONER - AN…\n 9 1588698880 7214921766         I200404080… 14-50            PRACTITIONER - NU…\n10 1831122506 9335135821         I200404210… 14-97            PRACTITIONER - PH…\n# ℹ 538 more rows\n# ℹ 6 more variables: STATE_CD <chr>, FIRST_NAME <chr>, MDL_NAME <chr>,\n#   LAST_NAME <chr>, ORG_NAME <chr>, GNDR_SW <chr>\n```\n\n\n:::\n:::\n\n\n::: {.cell layout-align=\"center\"}\n\n:::\n\n\n\n\n\n",
    "supporting": [
      "fn_providers_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}