{
  "hash": "99d459a73add4a4f93cc8d2a05c80eb9",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Backend Preload\"\neditor_options: \n   chunk_output_type: console\n---\n\n\n\n### `class_Identifier`\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_Identifier <- new_class(\n  name       = \"class_Identifier\",\n  properties = list(\n    url      = new_property(\n      class  = NULL | class_list,\n      setter = function(self, value) {\n        if (not_null(value)) {\n          self@url <- url_parse(value)\n          self\n        }}),\n    totalRows = new_property(\n      class  = NULL | class_integer,\n      getter = function(self) {\n        if (not_null(self@url)) {\n          url_build(self@url) |>\n            request() |>\n            req_url_path_append(\"stats\") |>\n            req_perform() |>\n            resp_body_json(simplifyVector = TRUE) |>\n            gelm(\"total_rows\")\n        }})\n    )\n)\n```\n:::\n\n### `class_Resources`\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_Resources <- new_class(\n  name       = \"class_Resources\",\n  properties = list(\n    url = NULL | class_character,\n    files = new_property(\n      class  = NULL | class_data.frame,\n      getter = function(self) {\n        if (not_null(self@url)) {\n          qTBL(fload(self@url, query = \"/data\")) |>\n            mtt(fileSize = prettyunits::pretty_bytes(fileSize, \"nopad\"))\n        }})\n  )\n)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_API <- new_class(\n  name = \"class_API\",\n  properties = list(\n    title              = class_character,\n    description        = class_character,\n    accrualPeriodicity = class_character,\n    modified           = new_property(class_double | class_Date),\n    temporal           = class_character,\n    identifier         = class_Identifier,\n    accessURL          = new_property(\n      NULL | class_list, \n      setter = \\(self, value) { \n        if (not_null(value)) { \n          self@accessURL <- request(value); \n          self \n          }\n        }),\n    resourcesAPI       = class_Resources,\n    downloadURL        = class_character,\n    describedBy        = class_character,\n    landingPage        = class_character\n  )\n)\n```\n:::\n\n\n--------------------------------------------------------------------------------\n\n## Catalog\n\n::: {.cell}\n\n```{.r .cell-code}\nmain <- main_data_rcpp()\n\nmain\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n$context\n[1] \"https://project-open-data.cio.gov/v1.1/schema/catalog.jsonld\"\n\n$id\n[1] \"https://data.cms.gov/data.json\"\n\n$type\n[1] \"dcat:Catalog\"\n\n$conformsTo\n[1] \"https://project-open-data.cio.gov/v1.1/schema\"\n\n$describedBy\n[1] \"https://project-open-data.cio.gov/v1.1/schema/catalog.json\"\n\n$dataset\n# A tibble: 139 × 21\n   type       accessLevel accrualPeriodicity bureauCode contactPoint describedBy\n   <chr>      <chr>       <chr>              <chr>      <list>       <chr>      \n 1 dcat:Data… public      R/P1Y              009:38     <named list> https://da…\n 2 dcat:Data… public      R/P1Y              009:38     <named list> https://da…\n 3 dcat:Data… public      R/P1Y              009:38     <named list> https://da…\n 4 dcat:Data… public      R/P1Y              009:38     <named list> https://da…\n 5 dcat:Data… public      R/P1Y              009:38     <named list> https://da…\n 6 dcat:Data… public      R/P1Y              009:38     <named list> https://da…\n 7 dcat:Data… public      R/P1Y              009:38     <named list> https://da…\n 8 dcat:Data… public      R/P1Y              009:38     <named list> https://da…\n 9 dcat:Data… public      R/P1Y              009:38     <named list> https://da…\n10 dcat:Data… public      R/P1Y              009:38     <named list> https://da…\n# ℹ 129 more rows\n# ℹ 15 more variables: dataQuality <lgl>, description <chr>, identifier <chr>,\n#   keyword <chr>, landingPage <chr>, language <chr>, license <chr>,\n#   modified <chr>, programCode <chr>, publisher <list>, references <chr>,\n#   temporal <chr>, theme <chr>, title <chr>, describedByType <chr>\n\n$distribution_latest\n# A tibble: 112 × 8\n   type        format accessURL resourcesAPI description title modified temporal\n   <chr>       <chr>  <chr>     <chr>        <chr>       <chr> <chr>    <chr>   \n 1 dcat:Distr… API    https://… https://dat… latest      Acco… 2025-01… 2025-01…\n 2 dcat:Distr… API    https://… https://dat… latest      Acco… 2025-01… 2025-01…\n 3 dcat:Distr… API    https://… https://dat… latest      ACO … 2024-01… 2021-01…\n 4 dcat:Distr… API    https://… https://dat… latest      ACO … 2024-01… 2021-01…\n 5 dcat:Distr… API    https://… https://dat… latest      ACO … 2024-01… 2021-01…\n 6 dcat:Distr… API    https://… https://dat… latest      ACO … 2024-01… 2021-01…\n 7 dcat:Distr… API    https://… https://dat… latest      Adva… 2024-01… 2024-01…\n 8 dcat:Distr… API    https://… https://dat… latest      Agen… 2020-12… 2016-01…\n 9 dcat:Distr… API    https://… https://dat… latest      Comp… 2021-01… 2020-01…\n10 dcat:Distr… API    https://… https://dat… latest      Coun… 2024-12… 2023-01…\n# ℹ 102 more rows\n\n$distribution_api\n# A tibble: 1,697 × 7\n   type              format accessURL       resourcesAPI title modified temporal\n   <chr>             <chr>  <chr>           <chr>        <chr> <chr>    <chr>   \n 1 dcat:Distribution API    https://data.c… https://dat… Acco… 2025-01… 2025-01…\n 2 dcat:Distribution API    https://data.c… https://dat… Acco… 2024-01… 2024-01…\n 3 dcat:Distribution API    https://data.c… https://dat… Acco… 2023-03… 2023-01…\n 4 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2022-01…\n 5 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2021-01…\n 6 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2020-01…\n 7 dcat:Distribution API    https://data.c… https://dat… Acco… 2024-01… 2019-01…\n 8 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2019-01…\n 9 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2018-01…\n10 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2017-01…\n# ℹ 1,687 more rows\n\n$distribution_csv\n# A tibble: 1,675 × 7\n   type              resourcesAPI  title modified temporal downloadURL mediaType\n   <chr>             <chr>         <chr> <chr>    <chr>    <chr>       <chr>    \n 1 dcat:Distribution https://data… Acco… 2025-01… 2025-01… https://da… text/csv \n 2 dcat:Distribution https://data… Acco… 2024-01… 2024-01… https://da… text/csv \n 3 dcat:Distribution https://data… Acco… 2023-03… 2023-01… https://da… text/csv \n 4 dcat:Distribution https://data… Acco… 2022-01… 2022-01… https://da… text/csv \n 5 dcat:Distribution https://data… Acco… 2025-01… 2025-01… https://da… text/csv \n 6 dcat:Distribution https://data… Acco… 2024-04… 2024-01… https://da… text/csv \n 7 dcat:Distribution https://data… Acco… 2023-03… 2023-01… https://da… text/csv \n 8 dcat:Distribution https://data… Acco… 2022-01… 2022-01… https://da… text/csv \n 9 dcat:Distribution https://data… ACO … 2024-01… 2021-01… https://da… text/csv \n10 dcat:Distribution https://data… ACO … 2024-01… 2021-01… https://da… text/csv \n# ℹ 1,665 more rows\n```\n\n\n:::\n:::\n\n### Dataset\n\n::: {.cell}\n\n```{.r .cell-code}\nmain[[\"dataset\"]] |> \n  tidyr::unnest_wider(contactPoint, names_sep = \"_\") |>\n  tidyr::unnest_wider(publisher, names_sep = \"_\") |> \n  collapse::frename(remove_at_symbol) |> \n  remove_all_na() |> \n  purse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n- $type                  c139 dcat:Dataset                                  ...\n- $accessLevel           c139 public                                        ...\n- $accrualPeriodicity    c139 R/P1Y                                         ...\n- $bureauCode            c139 009:38                                        ...\n- $contactPoint_type     c139 vcard:Contact                                 ...\n- $contactPoint_fn       c139 Shared Savings Program - CM                   ...\n- $contactPoint_hasEmail c139 mailto:SharedSavingsProgram@cms.hhs.gov       ...\n- $describedBy           c139 https://data.cms.gov/resources/accountable-ca ...\n- $dataQuality           l139 T                                             ...\n- $description           c139 The Accountable Care Organization Participant ...\n- $identifier            c139 https://data.cms.gov/data-api/v1/dataset/9767 ...\n- $keyword               c139 Medicare, Value-Based Care, Coordinated Care, ...\n- $landingPage           c139 https://data.cms.gov/medicare-shared-savings- ...\n- $language              c139 en-US                                         ...\n- $license               c139 https://www.usa.gov/government-works          ...\n- $modified              c139 2025-01-15                                    ...\n- $programCode           c139 009:000                                       ...\n- $publisher_type        c139 org:Organization                              ...\n- $publisher_name        c139 Centers for Medicare & Medicaid Services      ...\n- $references            c139 https://data.cms.gov/resources/acos-aco-parti ...\n- $temporal              c139 2014-01-01/2025-12-31                         ...\n- $theme                 c139 Medicare                                      ...\n- $title                 c139 Accountable Care Organization Participants    ...\n- $describedByType       c139 NA                                            ...\n```\n\n\n:::\n:::\n\n### Distribution\n\n`\"latest\"`\n\n::: {.cell}\n\n```{.r .cell-code}\nmain[[\"distribution_latest\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 112 × 8\n   type        format accessURL resourcesAPI description title modified temporal\n   <chr>       <chr>  <chr>     <chr>        <chr>       <chr> <chr>    <chr>   \n 1 dcat:Distr… API    https://… https://dat… latest      Acco… 2025-01… 2025-01…\n 2 dcat:Distr… API    https://… https://dat… latest      Acco… 2025-01… 2025-01…\n 3 dcat:Distr… API    https://… https://dat… latest      ACO … 2024-01… 2021-01…\n 4 dcat:Distr… API    https://… https://dat… latest      ACO … 2024-01… 2021-01…\n 5 dcat:Distr… API    https://… https://dat… latest      ACO … 2024-01… 2021-01…\n 6 dcat:Distr… API    https://… https://dat… latest      ACO … 2024-01… 2021-01…\n 7 dcat:Distr… API    https://… https://dat… latest      Adva… 2024-01… 2024-01…\n 8 dcat:Distr… API    https://… https://dat… latest      Agen… 2020-12… 2016-01…\n 9 dcat:Distr… API    https://… https://dat… latest      Comp… 2021-01… 2020-01…\n10 dcat:Distr… API    https://… https://dat… latest      Coun… 2024-12… 2023-01…\n# ℹ 102 more rows\n```\n\n\n:::\n:::\n\n`\"API\"`\n\n::: {.cell}\n\n```{.r .cell-code}\nmain[[\"distribution_api\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,697 × 7\n   type              format accessURL       resourcesAPI title modified temporal\n   <chr>             <chr>  <chr>           <chr>        <chr> <chr>    <chr>   \n 1 dcat:Distribution API    https://data.c… https://dat… Acco… 2025-01… 2025-01…\n 2 dcat:Distribution API    https://data.c… https://dat… Acco… 2024-01… 2024-01…\n 3 dcat:Distribution API    https://data.c… https://dat… Acco… 2023-03… 2023-01…\n 4 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2022-01…\n 5 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2021-01…\n 6 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2020-01…\n 7 dcat:Distribution API    https://data.c… https://dat… Acco… 2024-01… 2019-01…\n 8 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2019-01…\n 9 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2018-01…\n10 dcat:Distribution API    https://data.c… https://dat… Acco… 2022-01… 2017-01…\n# ℹ 1,687 more rows\n```\n\n\n:::\n:::\n\n`\"text/csv\"`\n\n::: {.cell}\n\n```{.r .cell-code}\nmain[[\"distribution_csv\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 1,675 × 7\n   type              resourcesAPI  title modified temporal downloadURL mediaType\n   <chr>             <chr>         <chr> <chr>    <chr>    <chr>       <chr>    \n 1 dcat:Distribution https://data… Acco… 2025-01… 2025-01… https://da… text/csv \n 2 dcat:Distribution https://data… Acco… 2024-01… 2024-01… https://da… text/csv \n 3 dcat:Distribution https://data… Acco… 2023-03… 2023-01… https://da… text/csv \n 4 dcat:Distribution https://data… Acco… 2022-01… 2022-01… https://da… text/csv \n 5 dcat:Distribution https://data… Acco… 2025-01… 2025-01… https://da… text/csv \n 6 dcat:Distribution https://data… Acco… 2024-04… 2024-01… https://da… text/csv \n 7 dcat:Distribution https://data… Acco… 2023-03… 2023-01… https://da… text/csv \n 8 dcat:Distribution https://data… Acco… 2022-01… 2022-01… https://da… text/csv \n 9 dcat:Distribution https://data… ACO … 2024-01… 2021-01… https://da… text/csv \n10 dcat:Distribution https://data… ACO … 2024-01… 2021-01… https://da… text/csv \n# ℹ 1,665 more rows\n```\n\n\n:::\n:::\n\n### `S7` Sketches\n\n#### `class_contactPoint`\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_contactPoint <- new_class(\n  name       = \"class_contactPoint\",\n  properties = list(\n    type     = new_property(class_character, \n                            default = \"vcard:Contact\"),\n    fn       = class_character,\n    hasEmail = class_character,\n    hasURL   = class_character\n  )\n)\n```\n:::\n\n#### `class_publisher`\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_publisher <- new_class(\n  name       = \"class_publisher\",\n  properties = list(\n    type     = new_property(class_character, \n                            default = \"org:Organization\"),\n    name     = new_property(class_character, \n                            default = \"Centers for Medicare & Medicaid Services\")\n  )\n)\n```\n:::\n\n#### `class_Distribution`\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_Distribution <- new_class(\n  name           = \"class_Distribution\",\n  properties     = list(\n    type         = new_property(class_character, \n                                default = \"dcat:Distribution\"),\n    format       = class_character,\n    accessURL    = class_character,\n    resourcesAPI = class_character,\n    description  = class_character,\n    title        = class_character,\n    modified     = class_Date,\n    temporal     = class_character,\n    downloadURL  = class_character,\n    mediaType    = class_character\n    )\n  )\n```\n:::\n\n#### `class_Dataset`\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_Dataset <- new_class(\n  name = \"class_Dataset\",\n  properties = list(\n    type               = new_property(class_character, \n                                      default = \"dcat:Dataset\"),\n    accessLevel        = new_property(class_character, \n                                      default = \"public\"),\n    accrualPeriodicity = class_character,\n    bureauCode         = new_property(class_character, \n                                      default = \"009:38\"),\n    contactPoint       = new_property(class_contactPoint),\n    describedBy        = class_character,\n    dataQuality        = new_property(class_logical, \n                                      default = TRUE),\n    description        = class_character,\n    distribution       = class_Distribution,\n    identifier         = class_character,\n    keyword            = class_character,\n    landingPage        = class_character,\n    language           = class_character,\n    license            = class_character,\n    issued             = class_Date,\n    modified           = class_Date,\n    released           = class_Date,\n    programCode        = new_property(class_character, \n                                      default = \"009:000\"),\n    publisher          = new_property(class_publisher),\n    references         = class_character,\n    temporal           = class_character,\n    theme              = class_character,\n    title              = class_character,\n    describedByType    = class_character,\n    archiveExclude     = new_property(class_logical)\n  ))\n\nclass_Dataset()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<class_Dataset>\n @ type              : chr \"dcat:Dataset\"\n @ accessLevel       : chr \"public\"\n @ accrualPeriodicity: chr(0) \n @ bureauCode        : chr \"009:38\"\n @ contactPoint      : <class_contactPoint>\n .. @ type    : chr \"vcard:Contact\"\n .. @ fn      : chr(0) \n .. @ hasEmail: chr(0) \n .. @ hasURL  : chr(0) \n @ describedBy       : chr(0) \n @ dataQuality       : logi TRUE\n @ description       : chr(0) \n @ distribution      : <class_Distribution>\n .. @ type        : chr \"dcat:Distribution\"\n .. @ format      : chr(0) \n .. @ accessURL   : chr(0) \n .. @ resourcesAPI: chr(0) \n .. @ description : chr(0) \n .. @ title       : chr(0) \n .. @ modified    : 'Date' num(0) \n .. @ temporal    : chr(0) \n .. @ downloadURL : chr(0) \n .. @ mediaType   : chr(0) \n @ identifier        : chr(0) \n @ keyword           : chr(0) \n @ landingPage       : chr(0) \n @ language          : chr(0) \n @ license           : chr(0) \n @ issued            : 'Date' num(0) \n @ modified          : 'Date' num(0) \n @ released          : 'Date' num(0) \n @ programCode       : chr \"009:000\"\n @ publisher         : <class_publisher>\n .. @ type: chr \"org:Organization\"\n .. @ name: chr \"Centers for Medicare & Medicaid Services\"\n @ references        : chr(0) \n @ temporal          : chr(0) \n @ theme             : chr(0) \n @ title             : chr(0) \n @ describedByType   : chr(0) \n @ archiveExclude    : logi(0) \n```\n\n\n:::\n:::\n\n#### `class_Catalog`\n\n::: {.cell}\n\n```{.r .cell-code}\nclass_Catalog <- new_class(\n  name = \"class_Catalog\",\n  properties = list(\n    type        = new_property(class_character, \n                               default = \"dcat:Catalog\"),\n    context     = new_property(class_character, \n                               default = \"https://project-open-data.cio.gov/v1.1/schema/catalog.jsonld\"),\n    id          = class_character,\n    conformsTo  = new_property(class_character, \n                               default = \"https://project-open-data.cio.gov/v1.1/schema\"),\n    describedBy = new_property(class_character, \n                               default = \"https://project-open-data.cio.gov/v1.1/schema/catalog.json\"),\n    dataset     = class_Dataset\n  )\n)\n\nclass_Catalog()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n<class_Catalog>\n @ type       : chr \"dcat:Catalog\"\n @ context    : chr \"https://project-open-data.cio.gov/v1.1/schema/catalog.jsonld\"\n @ id         : chr(0) \n @ conformsTo : chr \"https://project-open-data.cio.gov/v1.1/schema\"\n @ describedBy: chr \"https://project-open-data.cio.gov/v1.1/schema/catalog.json\"\n @ dataset    : <class_Dataset>\n .. @ type              : chr \"dcat:Dataset\"\n .. @ accessLevel       : chr \"public\"\n .. @ accrualPeriodicity: chr(0) \n .. @ bureauCode        : chr \"009:38\"\n .. @ contactPoint      : <class_contactPoint>\n .. .. @ type    : chr \"vcard:Contact\"\n .. .. @ fn      : chr(0) \n .. .. @ hasEmail: chr(0) \n .. .. @ hasURL  : chr(0) \n .. @ describedBy       : chr(0) \n .. @ dataQuality       : logi TRUE\n .. @ description       : chr(0) \n .. @ distribution      : <class_Distribution>\n .. .. @ type        : chr \"dcat:Distribution\"\n .. .. @ format      : chr(0) \n .. .. @ accessURL   : chr(0) \n .. .. @ resourcesAPI: chr(0) \n .. .. @ description : chr(0) \n .. .. @ title       : chr(0) \n .. .. @ modified    : 'Date' num(0) \n .. .. @ temporal    : chr(0) \n .. .. @ downloadURL : chr(0) \n .. .. @ mediaType   : chr(0) \n .. @ identifier        : chr(0) \n .. @ keyword           : chr(0) \n .. @ landingPage       : chr(0) \n .. @ language          : chr(0) \n .. @ license           : chr(0) \n .. @ issued            : 'Date' num(0) \n .. @ modified          : 'Date' num(0) \n .. @ released          : 'Date' num(0) \n .. @ programCode       : chr \"009:000\"\n .. @ publisher         : <class_publisher>\n .. .. @ type: chr \"org:Organization\"\n .. .. @ name: chr \"Centers for Medicare & Medicaid Services\"\n .. @ references        : chr(0) \n .. @ temporal          : chr(0) \n .. @ theme             : chr(0) \n .. @ title             : chr(0) \n .. @ describedByType   : chr(0) \n .. @ archiveExclude    : logi(0) \n```\n\n\n:::\n:::\n\n## Dataset Object\n\n::: {.cell}\n\n```{.r .cell-code}\nprovider_data() |> \n  purse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n- $accessLevel              c151 public                                     ...\n- $landingPage              c151 https://data.cms.gov/provider-data/dataset ...\n- $bureauCode               c151 009:38                                     ...\n- $issued                   c151 2020-03-14                                 ...\n- $type                     c151 dcat:Dataset                               ...\n- $modified                 c151 2024-12-21                                 ...\n- $released                 c151 2025-01-15                                 ...\n- $keyword                  c151 Quality, Quality Measures                  ...\n- $contactPoint_type        c151 vcard:Contact                              ...\n- $contactPoint_fn          c151 Dialysis Facility Helpdesk                 ...\n- $contactPoint_hasEmail    c151 mailto:DialysisData@umich.edu              ...\n- $contactPoint_hasURL      c151 NA                                         ...\n- $publisher_type           c151 org:Organization                           ...\n- $publisher_name           c151 Centers for Medicare & Medicaid Services ( ...\n- $identifier               c151 23ew-n7w9                                  ...\n- $description              c151 A list of all dialysis facilities register ...\n- $title                    c151 Dialysis Facility - Listing by Facility    ...\n- $programCode              c151 009:000                                    ...\n- $distribution_type        c151 dcat:Distribution                          ...\n- $distribution_downloadURL c151 https://data.cms.gov/provider-data/sites/d ...\n- $distribution_mediaType   c151 text/csv                                   ...\n- $distribution_title       c151 NA                                         ...\n- $theme                    c151 Dialysis facilities                        ...\n- $archiveExclude           l151 NA                                         ...\n```\n\n\n:::\n:::\n\n### National Downloadable File\n\n::: {.cell}\n\n```{.r .cell-code}\nhttr2::url_parse(\"https://data.cms.gov/provider-data/api/1/datastore/query/\")\n    \n# distro \n\nunclass(\n  httr2::url_parse(\n    \"?limit=1&offset=100&count=true&results=true&schema=true&keys=true&format=json&rowIds=true\"\n    )\n  )\n\nndf_identifier <- \\(x) {\n  kit::nswitch(x,\n    \"affiliations\", \"27ea-46a8\",\n    \"clinicians\", \"mj5m-pzi6\",\n    default = NA_character_,\n    nThread = 4L)\n}\n\nurl_ndf <- httr2::url_parse(\n  \"https://data.cms.gov/provider-data/api/1/metastore/schemas/dataset/items/\"\n  )\n\nurl_tmp <- url_ndf |> \n  httr2::url_build() |> \n  httr2::request()\n\nhttr2::req_template(\n  url_tmp, \n  \"/{fname}?show-reference-ids=true\", \n  fname = ndf_identifier(\"affiliations\"))\n\nurl_ndf |> \n  httr2::url_build() |> \n  httr2::request() |> \n  httr2::req_url_path_append(\n    ndf_identifier(fname)) |> \n  httr2::req_url_path_append(\"?show-reference-ids=true\") |>\n  httr2::req_perform() |>\n  httr2::resp_body_json(check_type = FALSE, simplifyVector = TRUE)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmeta_ndf <- \\(fname) {\n  \n  stopifnot(curl::has_internet())\n  \n  x <- request(\n    paste0(\n      \"https://data.cms.gov/\",\n      \"provider-data/api/1/\",\n      \"metastore/schemas/\",\n      \"dataset/items/\",\n      switch(fname, \n             affiliations = \"27ea-46a8\", \n             clinicians   = \"mj5m-pzi6\", \n             stop(\"Invalid argument\")),\n    \"?show-reference-ids=true\")) |>\n       req_perform() |>\n       resp_body_json(\n         check_type     = FALSE,\n         simplifyVector = TRUE)\n  \n  distro <- gelm(gelm(x, \"distribution\"), \"identifier\")\n  \n  y <- request(\n    paste0(\n    \"https://data.cms.gov/\", \n    \"provider-data/api/1/\",\n    \"datastore/query/\", \n    distro, \n    \"?limit=1&offset=100&\",\n    \"count=true&results=true&\", \n    \"schema=true&keys=true&\",\n    \"format=json&rowIds=true\")) |>\n       req_perform() |>\n       resp_body_json(\n         check_type = FALSE,\n         simplifyVector = TRUE)\n  \n  z <- gelm(gelm(gelm(y, \"schema\"), distro), \"fields\")\n  \n  list(\n    title        = gelm(x, \"title\"),\n    description  = gelm(x, \"description\"),\n    identifier   = gelm(gelm(x, \"identifier\"), \"identifier\"),\n    distribution = distro,\n    issued       = gelm(x, \"issued\"), \n    modified     = gelm(x, \"modified\")[[1]], \n    released     = gelm(x, \"released\"),\n    dimensions   = paste0(gelm(gelm(y, \"count\"), is.numeric), \" x \", gelm(gelm(z, \"record_number\"), \"length\")), \n    fields       = names(z),\n    site         = gelm(x, \"landingPage\"),\n    csv          = gelm(gelm(gelm(x, \"distribution\"), \"data\"), \"downloadURL\", m = \"df\"),\n    dictionary   = paste0(\"https://data.cms.gov/provider-data/sites/default/files/data_dictionaries/physician/DOC_Data_Dictionary.pdf\"))\n  \n}\n```\n:::\n\n### Examples\n\n::: {.cell}\n\n```{.r .cell-code}\nmeta_ndf(\"affiliations\") |> purse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n- $title        c1  Facility Affiliation Data\n- $description  c1  This is the facility affiliations data publicly reporte ...\n- $identifier   c1  27ea-46a8\n- $distribution c1  5684f9d9-3d9c-58c4-97bc-0b07fbe5348b\n- $issued       c1  2023-08-17\n- $modified     c1  2025-01-07\n- $released     c1  2025-01-16\n- $dimensions   c1  1571916 x 10\n- $fields       c10 record_number npi ind_pac_id provider_last_name provide ...\n- $site         c1  https://data.cms.gov/provider-data/dataset/27ea-46a8\n- $csv          c1  https://data.cms.gov/provider-data/sites/default/files/ ...\n- $dictionary   c1  https://data.cms.gov/provider-data/sites/default/files/ ...\n```\n\n\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmeta_ndf(\"clinicians\") |> purse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n- $title        c1  National Downloadable File\n- $description  c1  The Doctors and Clinicians national downloadable file i ...\n- $identifier   c1  mj5m-pzi6\n- $distribution c1  34140eb1-cca1-5d8d-9939-f41be3e35762\n- $issued       c1  2023-08-17\n- $modified     c1  2025-01-07\n- $released     c1  2025-01-16\n- $dimensions   c1  2619742 x 10\n- $fields       c32 record_number npi ind_pac_id ind_enrl_id provider_last_ ...\n- $site         c1  https://data.cms.gov/provider-data/dataset/mj5m-pzi6\n- $csv          c1  https://data.cms.gov/provider-data/sites/default/files/ ...\n- $dictionary   c1  https://data.cms.gov/provider-data/sites/default/files/ ...\n```\n\n\n:::\n:::\n",
    "supporting": [
      "wk_backend_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}