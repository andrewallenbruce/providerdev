{
  "hash": "8ed6f346ad7a1f0b948548361dd9a678",
  "result": {
    "engine": "knitr",
    "markdown": "# API FAQ\n\n::: {.cell}\n\n:::\n\n   * [Centers for Medicare & Medicaid Services Data API](https://data.cms.gov/api-docs)\n   * [API FAQ for data.CMS.gov | OCTOBER 2024 VERSION 1.6](https://data.cms.gov/sites/default/files/2024-10/7ef65521-65a4-41ed-b600-3a0011f8ec4b/API%20Guide%20Formatted%201_6.pdf)\n\n### Finding Data\n\n> Is there a catalog of available data?\n\nYes, the [`data.json`](https://data.cms.gov/data.json) file is an [**Open Data**](https://resources.data.gov/resources/dcat-us/) catalog containing the datasets available on our site. As new data is added, it is automatically updated to the **data.json**.\n\nIn the **data.json**, there is an array called **dataset**. You can search through this array using the title of your dataset, such as `\"Payroll Based Journal Daily Nurse Staffing\"`. \n\nInside of the dataset, there is an array called **distribution** which will contain all the versions of the data in all available formats for each version. In this array there are a few different types of entries:\n\nThe first entry (with a description of 'latest') will provide a URL that will always point to the latest data, even as new versions are published.\n\nThe remaining entries will provide references to the data at fixed points in time, listed in descending order by date. \n\nFor example, the URL in the following example will *always* point to the **Payroll Based Journal Daily Nurse Staffing** data from **Q2 2021**:\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\nurl_nurse <- url_parse(\"https://data.cms.gov/data-api/v1/dataset/d10d792e-ea6e-4145-8512-34efbc1be04b/data\")\n\nurl_nurse\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n<httr2_url>\nhttps://data.cms.gov/data-api/v1/dataset/d10d792e-ea6e-4145-8512-34efbc1be04b/data\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• scheme: https\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• hostname: data.cms.gov\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n• path: /data-api/v1/dataset/d10d792e-ea6e-4145-8512-34efbc1be04b/data\n```\n\n\n:::\n\n```{.r .cell-code}\nresp_nurse <- request(\n  url_build(url_nurse)) |> \n  req_perform(verbosity = 3) |> \n  resp_body_json(simplifyVector = TRUE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n*  Host data.cms.gov:443 was resolved.\n*  IPv6: 2600:1403:9c00:5b7::28a, 2600:1403:9c00:5aa::28a\n*  IPv4: 72.246.62.101\n*    Trying [2600:1403:9c00:5b7::28a]:443...\n*  schannel: disabled automatic use of client certificate\n*  Connected to data.cms.gov (2600:1403:9c00:5b7::28a) port 443\n*  using HTTP/1.x\n-> GET /data-api/v1/dataset/d10d792e-ea6e-4145-8512-34efbc1be04b/data HTTP/1.1\n-> Host: data.cms.gov\n-> User-Agent: httr2/1.0.7 r-curl/6.0.1 libcurl/8.10.1\n-> Accept: */*\n-> Accept-Encoding: deflate, gzip\n-> \n*  Request completely sent off\n*  schannel: failed to decrypt data, need more data\n<- HTTP/1.1 200 OK\n<- Accept-Ranges: bytes\n<- Content-Encoding: gzip\n<- Content-Language: en\n<- Content-Security-Policy: report-uri /report-csp-violation\n<- Content-Type: application/json\n<- ETag: \"1734497934-gzip\"\n<- Last-Modified: Wed, 18 Dec 2024 04:58:54 GMT\n<- Referrer-Policy: no-referrer-when-downgrade\n<- X-Age: 0\n<- X-AH-Environment: prod\n<- x-akamai-original-url: 08ff4c8072129a48657f3e6043a1820662e60637\n<- X-Consumer-ID: 07eafadc-1bac-4607-8441-20c35fa46f17\n<- X-Content-Type-Options: nosniff\n<- X-Drupal-Dynamic-Cache: HIT\n<- X-File-System-Cache: MISS\n<- X-Frame-Options: SAMEORIGIN\n<- X-Generator: Drupal 10 (https://www.drupal.org)\n<- X-Request-ID: v-c7aa8152-bcfc-11ef-b7fa-5ff8f4bb3c62\n<- X-XSS-Protection: 1; mode=block\n<- Content-Length: 39279\n<- Expires: Thu, 19 Dec 2024 01:21:49 GMT\n<- Cache-Control: max-age=0, no-cache, no-store\n<- Pragma: no-cache\n<- Date: Thu, 19 Dec 2024 01:21:49 GMT\n<- Connection: keep-alive\n<- Vary: Accept-Encoding\n<- Strict-Transport-Security: max-age=31536000\n<- X-XSS-Protection: 1; mode=block\n<- \n<< 15395 bytes of binary data\n*  schannel: failed to decrypt data, need more data\n<< 9181 bytes of binary data\n<< 14703 bytes of binary data\n*  Connection #0 to host data.cms.gov left intact\n```\n\n\n:::\n\n```{.r .cell-code}\nglimpse(head(resp_nurse, 1))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1\nColumns: 33\n$ PROVNUM          <chr> \"015010\"\n$ PROVNAME         <chr> \"COOSA VALLEY HEALTHCARE CENTER\"\n$ CITY             <chr> \"SYLACAUGA\"\n$ STATE            <chr> \"AL\"\n$ COUNTY_NAME      <chr> \"Talladega\"\n$ COUNTY_FIPS      <chr> \"121\"\n$ CY_Qtr           <chr> \"2021Q2\"\n$ WorkDate         <chr> \"20210401\"\n$ MDScensus        <chr> \"70\"\n$ Hrs_RNDON        <chr> \"8\"\n$ Hrs_RNDON_emp    <chr> \"8\"\n$ Hrs_RNDON_ctr    <chr> \"0\"\n$ Hrs_RNadmin      <chr> \"48.25\"\n$ Hrs_RNadmin_emp  <chr> \"48.25\"\n$ Hrs_RNadmin_ctr  <chr> \"0\"\n$ Hrs_RN           <chr> \"32\"\n$ Hrs_RN_emp       <chr> \"32\"\n$ Hrs_RN_ctr       <chr> \"0\"\n$ Hrs_LPNadmin     <chr> \"0\"\n$ Hrs_LPNadmin_emp <chr> \"0\"\n$ Hrs_LPNadmin_ctr <chr> \"0\"\n$ Hrs_LPN          <chr> \"63.25\"\n$ Hrs_LPN_emp      <chr> \"63.25\"\n$ Hrs_LPN_ctr      <chr> \"0\"\n$ Hrs_CNA          <chr> \"189.5\"\n$ Hrs_CNA_emp      <chr> \"189.5\"\n$ Hrs_CNA_ctr      <chr> \"0\"\n$ Hrs_NAtrn        <chr> \"0\"\n$ Hrs_NAtrn_emp    <chr> \"0\"\n$ Hrs_NAtrn_ctr    <chr> \"0\"\n$ Hrs_MedAide      <chr> \"0\"\n$ Hrs_MedAide_emp  <chr> \"0\"\n$ Hrs_MedAide_ctr  <chr> \"0\"\n```\n\n\n:::\n:::\n\n\nSome datasets will have multiple historical versions available and some will only have the most recent data available.\n\nThe data with mediaType of \"text/csv\" is downloadable as a CSV file and data with mediaType of \"application/zip\" is downloadable as a ZIP file.\n\nThe data with a format of \"API\" will point to an API endpoint.\n\n> How can I get an earlier version of the data?\n\nIf your data has earlier versions available, there is a \"temporal\" field in the distribution section of the data.json file which will indicate the time period. An example is below.\n\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndata_json_url <- \"https://data.cms.gov/data.json\"\ndataset_title <- \"Medicare Inpatient Hospitals - by Provider and Service\"\ntime_period   <- \"2017-01-01/2017-12-31\"\n\ndata_json_meta <- read_json_arrow(\n  file = data_json_url,\n  col_select = c(\"dataset\"),\n    as_data_frame = TRUE)\n\nmeta <- to_duckdb(data_json_meta) |> \n  pull(dataset) |> \n  pluck(1)\n  \nmeta |> \n  dplyr::filter(grepl(dataset_title, title)) |> \n  dplyr::glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1\nColumns: 22\n$ `@type`            <chr> \"dcat:Dataset\"\n$ accessLevel        <chr> \"public\"\n$ accrualPeriodicity <chr> \"R/P1Y\"\n$ bureauCode         <list> \"009:38\"\n$ contactPoint       <df[,3]> <data.frame[1 x 3]>\n$ describedBy        <chr> \"https://data.cms.gov/resources/medicare-inpatient-…\n$ dataQuality        <lgl> TRUE\n$ description        <chr> \"The Medicare Inpatient Hospitals by Provider and S…\n$ distribution       <list> [<data.frame[21 x 10]>]\n$ identifier         <chr> \"https://data.cms.gov/data-api/v1/dataset/690ddc6c-…\n$ keyword            <list> <\"Medicare\", \"Original Medicare\", \"Hospitals & Fac…\n$ landingPage        <chr> \"https://data.cms.gov/provider-summary-by-type-o…\n$ language           <list> \"en-US\"\n$ license            <chr> \"https://www.usa.gov/government-works\"\n$ modified           <dttm> 2024-06-04\n$ programCode        <list> \"009:000\"\n$ publisher          <df[,2]> <data.frame[1 x 2]>\n$ references         <list> \"https://data.cms.gov/resources/medicare-inpatient-…\n$ temporal           <chr> \"2013-01-01/2022-12-31\"\n$ theme              <list> \"Medicare\"\n$ title              <chr> \"Medicare Inpatient Hospitals - by Provider and Ser…\n$ describedByType    <chr> NA\n```\n\n\n:::\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}