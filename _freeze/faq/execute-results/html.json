{
  "hash": "ca3d6de57e44fa00253c6d65b95a7ad0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"API FAQ\"\neditor_options: \n   chunk_output_type: console\n---\n\n::: {.cell}\n::: {.cell-output-display}\n\n```{=html}\n<a href=\"https://data.cms.gov/api-docs\" class=\"btn btn-outline-secondary\" role=\"button\" target=\"_blank\">\n<i class=\"bi bi-box-arrow-up-right\"></i>\nCMS API Docs\n</a>\n<a href=\"https://data.cms.gov/sites/default/files/2024-10/7ef65521-65a4-41ed-b600-3a0011f8ec4b/API%20Guide%20Formatted%201_6.pdf\" class=\"btn btn-outline-secondary\" role=\"button\" target=\"_blank\">\n<i class=\"bi bi-box-arrow-up-right\"></i>\nAPI FAQ\n</a>\n```\n\n:::\n:::\n\n\nWorking through the new *(October 2024 - Version 1.6)* [API FAQ](https://data.cms.gov/sites/default/files/2024-10/7ef65521-65a4-41ed-b600-3a0011f8ec4b/API%20Guide%20Formatted%201_6.pdf) for [data.CMS.gov](https://data.cms.gov/api-docs), extracting the relevant information\n\n# Accessing the Data Catalog\n\nThe [`data.json`](https://data.cms.gov/data.json) file is an [**Open Data**](https://resources.data.gov/resources/dcat-us/) catalog containing all available datasets. As new data is added, `data.json` is automatically updated.\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndata_json <- read_json_arrow(\n  file = \"https://data.cms.gov/data.json\",\n  col_select = c(\"dataset\"),\n    as_data_frame = TRUE) |> \n  to_duckdb()\n\ndata_json |> glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: ??\nColumns: 1\nDatabase: DuckDB v1.1.3 [Andrew@Windows 10 x64:R 4.4.2/:memory:]\n$ dataset <list> [<data.frame[139 x 22]>]\n```\n\n\n:::\n:::\n\n\n> **Note:** Removing `col_select = c(\"dataset\")` from the above call returns the following metadata:\n\n\n::: {.cell layout-align=\"center\"}\n::: {.cell-output .cell-output-stdout}\n\n```\n@context    <chr> https://project-open-data.cio.gov/v1.1/schema/catalog.jsonld\n@id         <chr> https://data.cms.gov/data.json\n@type       <chr> dcat:Catalog\nconformsTo  <chr> https://project-open-data.cio.gov/v1.1/schema\ndescribedBy <chr> https://project-open-data.cio.gov/v1.1/schema/catalog.json\ndataset     <list> [<data.frame[138 x 22]>]\n```\n\n\n:::\n:::\n\n\nWithin `data.json`, there is an array called `dataset`. One can search through this array using the dataset's `title`, such as `\"Payroll Based Journal Daily Nurse Staffing\"`:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndata_json |> \n  pull(dataset) |> \n  pluck(1) |> \n  filter(\n    grepl(\n      \"Payroll Based Journal Daily Nurse Staffing\", \n      title)) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1\nColumns: 22\n$ `@type`            <chr> \"dcat:Dataset\"\n$ accessLevel        <chr> \"public\"\n$ accrualPeriodicity <chr> \"R/P3M\"\n$ bureauCode         <list> \"009:38\"\n$ contactPoint       <df[,3]> <data.frame[1 x 3]>\n$ describedBy        <chr> \"https://data.cms.gov/resources/payroll-based-journ…\n$ dataQuality        <lgl> TRUE\n$ description        <chr> \"The Payroll Based Journal (PBJ) Nurse Staffing and…\n$ distribution       <list> [<data.frame[61 x 10]>]\n$ identifier         <chr> \"https://data.cms.gov/data-api/v1/dataset/7e0d53ba-…\n$ keyword            <list> <\"Medicare\", \"Original Medicare\", \"Hospitals & Fac…\n$ landingPage        <chr> \"https://data.cms.gov/quality-of-care/payroll-ba…\n$ language           <list> \"en-US\"\n$ license            <chr> \"https://www.usa.gov/government-works\"\n$ modified           <dttm> 2024-10-31\n$ programCode        <list> \"009:000\"\n$ publisher          <df[,2]> <data.frame[1 x 2]>\n$ references         <list> \"https://data.cms.gov/resources/payroll-based-journ…\n$ temporal           <chr> \"2017-01-01/2024-06-30\"\n$ theme              <list> \"Medicare\"\n$ title              <chr> \"Payroll Based Journal Daily Nurse Staffing\"\n$ describedByType    <chr> NA\n```\n\n\n:::\n:::\n\n\nWithin `dataset`, there is an array called `distribution` which contains all dataset versions, in all available formats:\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndistribution <- data_json |> \n  pull(dataset) |> \n  pluck(1) |> \n  select(distribution) |> \n  unnest(distribution)\n\ndistribution\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3,897 × 10\n   `@type`   format accessURL resourcesAPI description title modified           \n   <chr>     <chr>  <chr>     <chr>        <chr>       <chr> <dttm>             \n 1 dcat:Dis… API    https://… https://dat… latest      Acco… 2024-01-29 00:00:00\n 2 dcat:Dis… <NA>   <NA>      https://dat… <NA>        Acco… 2024-01-29 00:00:00\n 3 dcat:Dis… API    https://… https://dat… <NA>        Acco… 2024-01-29 00:00:00\n 4 dcat:Dis… <NA>   <NA>      https://dat… <NA>        Acco… 2023-03-06 00:00:00\n 5 dcat:Dis… API    https://… https://dat… <NA>        Acco… 2023-03-06 00:00:00\n 6 dcat:Dis… <NA>   <NA>      https://dat… <NA>        Acco… 2022-01-26 00:00:00\n 7 dcat:Dis… API    https://… https://dat… <NA>        Acco… 2022-01-26 00:00:00\n 8 dcat:Dis… <NA>   <NA>      https://dat… <NA>        Acco… 2022-01-27 00:00:00\n 9 dcat:Dis… API    https://… https://dat… <NA>        Acco… 2022-01-27 00:00:00\n10 dcat:Dis… <NA>   <NA>      https://dat… <NA>        Acco… 2022-01-27 00:00:00\n# ℹ 3,887 more rows\n# ℹ 3 more variables: temporal <chr>, downloadURL <chr>, mediaType <chr>\n```\n\n\n:::\n\n```{.r .cell-code}\nfuimus::describe2(distribution[c(-7)])\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 9 × 13\n  column    type       n   min   mean   med   max   iqr    sd   mad distribution\n  <chr>     <chr>  <int> <int>  <dbl> <dbl> <int> <dbl> <dbl> <dbl> <chr>       \n1 @type     <chr>  66249    17  17       17    17     0  0      0   ▇           \n2 format    <chr>   5214     3   3        3     3     0  0      0   ▇           \n3 accessURL <chr> 142516    82  82       82    82     0  0      0   ▇           \n4 resource… <chr> 339039    87  87       87    87     0  0      0   ▇           \n5 descript… <chr>    672     6   6        6     6     0  0      0   ▇           \n6 title     <chr> 221787    27  56.9     60   163    25 17.5   16.3 ▁▅▃▅▇▂▁▁▁▁▁…\n7 temporal  <chr>  81837    21  21       21    21     0  0      0   ▇           \n8 download… <chr> 246470    62 114.     116   207    23 20.6   19.3 ▂▂▇▇▁▁▁▁    \n9 mediaType <chr>  21346     8   9.89     8    24     7  3.32   0   ▇▁▁▂▁▁▁▁    \n# ℹ 2 more variables: uniq <int>, top <chr>\n```\n\n\n:::\n:::\n\n## Formats\n\n   * __description__ `\"latest\"` is a URL that always point to the latest data\n   * __mediaType__ `\"text/csv\"` is a downloadable CSV file\n   * __mediaType__ `\"application/zip\"` is a downloadable ZIP file\n   * __format__ `\"API\"` is an API endpoint\n   * Remaining entries provide references to the data at fixed points in time, listed in descending order by date.\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndistribution |> \n  count(description, \n        format, \n        mediaType) |> \n  gt() |> \n  gtExtras::gt_theme_538() |> \n  tab_options(\n    quarto.disable_processing = TRUE,\n    quarto.use_bootstrap = FALSE)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"glvqdlowfi\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n@import url(\"https://fonts.googleapis.com/css2?family=Chivo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n@import url(\"https://fonts.googleapis.com/css2?family=Cairo:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap\");\n#glvqdlowfi table {\n  font-family: Cairo, system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#glvqdlowfi thead, #glvqdlowfi tbody, #glvqdlowfi tfoot, #glvqdlowfi tr, #glvqdlowfi td, #glvqdlowfi th {\n  border-style: none;\n}\n\n#glvqdlowfi p {\n  margin: 0;\n  padding: 0;\n}\n\n#glvqdlowfi .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: 400;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: none;\n  border-top-width: 3px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#glvqdlowfi .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#glvqdlowfi .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#glvqdlowfi .gt_heading {\n  background-color: #FFFFFF;\n  text-align: left;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_bottom_border {\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_col_headings {\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#glvqdlowfi .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#glvqdlowfi .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#glvqdlowfi .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#glvqdlowfi .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #000000;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#glvqdlowfi .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#glvqdlowfi .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#glvqdlowfi .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: none;\n  border-top-width: 2px;\n  border-top-color: #000000;\n  border-bottom-style: solid;\n  border-bottom-width: 1px;\n  border-bottom-color: #FFFFFF;\n  vertical-align: middle;\n}\n\n#glvqdlowfi .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#glvqdlowfi .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#glvqdlowfi .gt_row {\n  padding-top: 3px;\n  padding-bottom: 3px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#glvqdlowfi .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 0px;\n  border-right-color: #FFFFFF;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#glvqdlowfi .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#glvqdlowfi .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#glvqdlowfi .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#glvqdlowfi .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#glvqdlowfi .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#glvqdlowfi .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#glvqdlowfi .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#glvqdlowfi .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#glvqdlowfi .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#glvqdlowfi .gt_sourcenote {\n  font-size: 12px;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#glvqdlowfi .gt_left {\n  text-align: left;\n}\n\n#glvqdlowfi .gt_center {\n  text-align: center;\n}\n\n#glvqdlowfi .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#glvqdlowfi .gt_font_normal {\n  font-weight: normal;\n}\n\n#glvqdlowfi .gt_font_bold {\n  font-weight: bold;\n}\n\n#glvqdlowfi .gt_font_italic {\n  font-style: italic;\n}\n\n#glvqdlowfi .gt_super {\n  font-size: 65%;\n}\n\n#glvqdlowfi .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#glvqdlowfi .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#glvqdlowfi .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#glvqdlowfi .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#glvqdlowfi .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#glvqdlowfi .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#glvqdlowfi .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#glvqdlowfi .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#glvqdlowfi div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n\ntbody tr:last-child {\n  border-bottom: 2px solid #ffffff00;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"true\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;\" scope=\"col\" id=\"description\">description</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;\" scope=\"col\" id=\"format\">format</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;\" scope=\"col\" id=\"mediaType\">mediaType</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" style=\"border-top-width: 0px; border-top-style: solid; border-top-color: black; font-family: Chivo; font-size: 14px; vertical-align: bottom; font-weight: 200; text-transform: uppercase;\" scope=\"col\" id=\"n\">n</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"description\" class=\"gt_row gt_left\">latest</td>\n<td headers=\"format\" class=\"gt_row gt_left\">API</td>\n<td headers=\"mediaType\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"n\" class=\"gt_row gt_right\">112</td></tr>\n    <tr><td headers=\"description\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"format\" class=\"gt_row gt_left\">API</td>\n<td headers=\"mediaType\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1626</td></tr>\n    <tr><td headers=\"description\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"format\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"mediaType\" class=\"gt_row gt_left\">application/vnd.ms-excel</td>\n<td headers=\"n\" class=\"gt_row gt_right\">21</td></tr>\n    <tr><td headers=\"description\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"format\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"mediaType\" class=\"gt_row gt_left\">application/zip</td>\n<td headers=\"n\" class=\"gt_row gt_right\">534</td></tr>\n    <tr><td headers=\"description\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"format\" class=\"gt_row gt_left\">NA</td>\n<td headers=\"mediaType\" class=\"gt_row gt_left\">text/csv</td>\n<td headers=\"n\" class=\"gt_row gt_right\">1604</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\nFor example, the URL in the following example will *always* point to the **Payroll Based Journal Daily Nurse Staffing** data from **Q2 2021**:\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\n# \"https://data.cms.gov/data-api/v1/dataset/d10d792e-ea6e-4145-8512-34efbc1be04b/data\"\nstaffing <- distribution |> \n  filter(\n    grepl(\"Payroll Based Journal Daily Nurse Staffing\", title),\n    format == \"API\",\n    grepl(\"^2021-04\", temporal)) |> \n  pull(accessURL) |> \n  request() |> \n  req_perform() |> \n  resp_body_json(simplifyVector = TRUE)\n\nglimpse(head(staffing, 1))\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1\nColumns: 33\n$ PROVNUM          <chr> \"015010\"\n$ PROVNAME         <chr> \"COOSA VALLEY HEALTHCARE CENTER\"\n$ CITY             <chr> \"SYLACAUGA\"\n$ STATE            <chr> \"AL\"\n$ COUNTY_NAME      <chr> \"Talladega\"\n$ COUNTY_FIPS      <chr> \"121\"\n$ CY_Qtr           <chr> \"2021Q2\"\n$ WorkDate         <chr> \"20210401\"\n$ MDScensus        <chr> \"70\"\n$ Hrs_RNDON        <chr> \"8\"\n$ Hrs_RNDON_emp    <chr> \"8\"\n$ Hrs_RNDON_ctr    <chr> \"0\"\n$ Hrs_RNadmin      <chr> \"48.25\"\n$ Hrs_RNadmin_emp  <chr> \"48.25\"\n$ Hrs_RNadmin_ctr  <chr> \"0\"\n$ Hrs_RN           <chr> \"32\"\n$ Hrs_RN_emp       <chr> \"32\"\n$ Hrs_RN_ctr       <chr> \"0\"\n$ Hrs_LPNadmin     <chr> \"0\"\n$ Hrs_LPNadmin_emp <chr> \"0\"\n$ Hrs_LPNadmin_ctr <chr> \"0\"\n$ Hrs_LPN          <chr> \"63.25\"\n$ Hrs_LPN_emp      <chr> \"63.25\"\n$ Hrs_LPN_ctr      <chr> \"0\"\n$ Hrs_CNA          <chr> \"189.5\"\n$ Hrs_CNA_emp      <chr> \"189.5\"\n$ Hrs_CNA_ctr      <chr> \"0\"\n$ Hrs_NAtrn        <chr> \"0\"\n$ Hrs_NAtrn_emp    <chr> \"0\"\n$ Hrs_NAtrn_ctr    <chr> \"0\"\n$ Hrs_MedAide      <chr> \"0\"\n$ Hrs_MedAide_emp  <chr> \"0\"\n$ Hrs_MedAide_ctr  <chr> \"0\"\n```\n\n\n:::\n:::\n\n## Temporal Data\n\nDatasets with multiple historical versions available will have a `temporal` field in the `distribution` array of the `data.json` file which will indicate the time period.\n\n**Format**: `yyyy-mm-dd/yyyy-mm-dd`\n\nThe following example finds the API link for the [2017 Medicare Inpatient Hospitals - by Provider and Service Data](https://data.cms.gov/provider-summary-by-type-of-service/medicare-inpatienthospitals/medicare-inpatient-hospitals-by-provider-and-service):\n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\ndistribution |> \n  filter(\n    grepl(\"Medicare Inpatient Hospitals - by Provider and Service\", title), \n    format == \"API\",\n    temporal == \"2017-01-01/2017-12-31\") |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1\nColumns: 10\n$ `@type`      <chr> \"dcat:Distribution\"\n$ format       <chr> \"API\"\n$ accessURL    <chr> \"https://data.cms.gov/data-api/v1/dataset/b61ba5eb-021b-4…\n$ resourcesAPI <chr> \"https://data.cms.gov/data-api/v1/dataset-resources/b61ba…\n$ description  <chr> NA\n$ title        <chr> \"Medicare Inpatient Hospitals - by Provider and Service :…\n$ modified     <dttm> 2023-05-10\n$ temporal     <chr> \"2017-01-01/2017-12-31\"\n$ downloadURL  <chr> NA\n$ mediaType    <chr> NA\n```\n\n\n:::\n:::\n\n## Methods: Same Data, Different Output\n\nThere are two methods of accessing the latest data. \n\nBoth result in a URL pointing to the most recent version of the dataset. This URL is canonical, i.e., will not change as new versions are added. \n\nFor this reason, it is _recommended to **always** start with the **`data.json` object** as opposed to hardcoding any URL_.\n\n### Method 1: Standard JSON\n\n```r\n<data_json>\n    => <dataset> \n    => <distribution> \n    -> $(description == \"latest\")\n    -> $(accessURL)\n```\nUse the `distribution` with the \"latest\" `description`. This URL returns **standard JSON**.\n\n> For example, this URL for Opt Out Affidavits is \n> `\"https://data.cms.gov/dataapi/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data\"` \n\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\njson_standard <- distribution |> \n  filter(\n    grepl(\"Order and Referring\", title),\n    description == \"latest\")\n\n\njson_standard |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1\nColumns: 10\n$ `@type`      <chr> \"dcat:Distribution\"\n$ format       <chr> \"API\"\n$ accessURL    <chr> \"https://data.cms.gov/data-api/v1/dataset/c99b5865-1119-4…\n$ resourcesAPI <chr> \"https://data.cms.gov/data-api/v1/dataset-resources/c99b5…\n$ description  <chr> \"latest\"\n$ title        <chr> \"Order and Referring : 2024-12-20\"\n$ modified     <dttm> 2024-12-20\n$ temporal     <chr> \"2024-12-08/2024-12-14\"\n$ downloadURL  <chr> NA\n$ mediaType    <chr> NA\n```\n\n\n:::\n\n```{.r .cell-code}\njson_standard[[\"accessURL\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"https://data.cms.gov/data-api/v1/dataset/c99b5865-1119-4436-bb80-c5af2773ea1f/data\"\n```\n\n\n:::\n\n```{.r .cell-code}\njson_standard[[\"resourcesAPI\"]]\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"https://data.cms.gov/data-api/v1/dataset-resources/c99b5865-1119-4436-bb80-c5af2773ea1f\"\n```\n\n\n:::\n:::\n\n### Method 2: JSON:API\n\n```r\n<data_json>\n    => <dataset> \n    -> $(title == \"Order and Referring\")\n    -> $(identifier)\n```\n\nUse the URL in the `identifier` field. \n\nThis URL returns JSON in the **JSON:API** form. It has a different response structure that includes metadata about the dataset. Otherwise it is identical to Method 1. \n\n> For example, this URL for Opt Out Affidavits: \n> `\"https://data.cms.gov/dataapi/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data-viewer\"`\n\nThe following example finds the API link for the latest [Order and Referring](https://data.cms.gov/provider-characteristics/medicare-provider-supplierenrollment/order-and-referring) Data:\n\n::: {.cell layout-align=\"center\"}\n\n```{.r .cell-code}\njson_api <- data_json |> \n  pull(dataset) |> \n  pluck(1) |> \n  dplyr::tibble() |> \n  filter(grepl(\"Order and Referring\", title))\n\njson_api |> glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 1\nColumns: 22\n$ `@type`            <chr> \"dcat:Dataset\"\n$ accessLevel        <chr> \"public\"\n$ accrualPeriodicity <chr> \"R/P3.5D\"\n$ bureauCode         <list> \"009:38\"\n$ contactPoint       <df[,3]> <data.frame[1 x 3]>\n$ describedBy        <chr> \"https://data.cms.gov/resources/order-and-referring…\n$ dataQuality        <lgl> TRUE\n$ description        <chr> \"The Order and Referring dataset provides informati…\n$ distribution       <list> [<data.frame[325 x 10]>]\n$ identifier         <chr> \"https://data.cms.gov/data-api/v1/dataset/c99b5865-…\n$ keyword            <list> <\"Medicare\", \"Original Medicare\", \"Provider Enroll…\n$ landingPage        <chr> \"https://data.cms.gov/provider-characteristics/m…\n$ language           <list> \"en-US\"\n$ license            <chr> \"https://www.usa.gov/government-works\"\n$ modified           <dttm> 2024-12-20\n$ programCode        <list> \"009:000\"\n$ publisher          <df[,2]> <data.frame[1 x 2]>\n$ references         <list> \"https://data.cms.gov/resources/order-and-referring…\n$ temporal           <chr> \"2023-05-21/2024-12-14\"\n$ theme              <list> \"Medicare\"\n$ title              <chr> \"Order and Referring\"\n$ describedByType    <chr> NA\n```\n\n\n:::\n\n```{.r .cell-code}\njson_api$identifier\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] \"https://data.cms.gov/data-api/v1/dataset/c99b5865-1119-4436-bb80-c5af2773ea1f/data-viewer\"\n```\n\n\n:::\n:::\n\n--------------------------------------------------------------------------------\n\n# Using Pagination\n\nThe default is to provide the first 1,000 rows per request. However, there is an ability to increase the limit to 5,000 rows per request. You can use pagination to retrieve the entire dataset. \n\nFor example, with our [Opt Out Affidavits]() dataset:\n\n   1. Start with the following request to get the number of rows:\n\n    ::: {.cell layout-align=\"center\"}\n    \n    ```{.r .cell-code}\n    request(\n      \"https://data.cms.gov/data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data/stats\"\n      ) |> \n      req_perform() |> \n      resp_body_json(simplifyVector = TRUE)\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    \n    ```\n    $found_rows\n    [1] 47984\n    \n    $total_rows\n    [1] 47984\n    ```\n    \n    \n    :::\n    :::\n      \n   \n   2. Make a request for the *first* 5,000 rows:\n      \n    ::: {.cell layout-align=\"center\"}\n    \n    ```{.r .cell-code}\n    request(\n      \"https://data.cms.gov/data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data?size=5000&offset=0\"\n      ) |> \n      req_perform() |> \n      resp_body_json(simplifyVector = TRUE) |> \n      dplyr::tibble()\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    \n    ```\n    # A tibble: 5,000 × 13\n       `First Name` `Last Name` NPI        Specialty          Optout Effective Dat…¹\n       <chr>        <chr>       <chr>      <chr>              <chr>                 \n     1 Jonathan     Raines      1720444581 Psychiatry         01/30/1998            \n     2 Kevin        Carlson     1811981905 Internal Medicine  07/01/2010            \n     3 David        Altchek     1114974490 Orthopedic Surgery 07/01/2012            \n     4 Bruce        Shapiro     1548271240 Psychiatry         12/28/2015            \n     5 Alan         Mcfarland   1861482408 Clinical Psycholo… 01/01/2018            \n     6 Heather      Raznick     1689838914 Clinical Social W… 06/01/2010            \n     7 Laura        Brenner     1235359019 Psychiatry         05/01/2006            \n     8 Phyllis      Tuthill     1003924556 Oral Surgery       02/16/2012            \n     9 Firas        Katabi      1366540924 Oral Surgery       10/01/2015            \n    10 Geralyn      Carducci    1790869717 Psychiatry         04/28/1998            \n    # ℹ 4,990 more rows\n    # ℹ abbreviated name: ¹​`Optout Effective Date`\n    # ℹ 8 more variables: `Optout End Date` <chr>,\n    #   `First Line Street Address` <chr>, `Second Line Street Address` <chr>,\n    #   `City Name` <chr>, `State Code` <chr>, `Zip code` <chr>,\n    #   `Eligible to Order and Refer` <chr>, `Last updated` <chr>\n    ```\n    \n    \n    :::\n    :::\n      \n   3. Make a request for the *next* 5,000 rows:\n   \n    ::: {.cell layout-align=\"center\"}\n    \n    ```{.r .cell-code}\n    request(\n      \"https://data.cms.gov/data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data?size=5000&offset=5000\"\n      ) |> \n      req_perform() |> \n      resp_body_json(simplifyVector = TRUE) |> \n      dplyr::tibble()\n    ```\n    \n    ::: {.cell-output .cell-output-stdout}\n    \n    ```\n    # A tibble: 5,000 × 13\n       `First Name` `Last Name` NPI        Specialty          Optout Effective Dat…¹\n       <chr>        <chr>       <chr>      <chr>              <chr>                 \n     1 Katherine    Whipple     1184839557 Clinical Psycholo… 08/29/2013            \n     2 Bret         Jacobson    1790893956 Oral Surgery       06/28/2014            \n     3 Jeffrey      Zeller      1730172248 Dentist            09/28/2022            \n     4 Lorna        Benjamin    1760572390 Clinical Psycholo… 07/01/2014            \n     5 Kenneth      Kloss       1710190038 Clinical Social W… 04/01/2014            \n     6 Heidi        Rendall     1497900609 Family Practice    04/09/2014            \n     7 Sam          Goodman     1083848246 Psychiatry         05/01/2013            \n     8 Nancy        Goodman     1114267952 Clinical Psycholo… 08/01/2014            \n     9 Marilyn      Meyers      1912320797 Clinical Psycholo… 10/01/2016            \n    10 Christine    Salter      1316024540 Family Practice    06/19/2014            \n    # ℹ 4,990 more rows\n    # ℹ abbreviated name: ¹​`Optout Effective Date`\n    # ℹ 8 more variables: `Optout End Date` <chr>,\n    #   `First Line Street Address` <chr>, `Second Line Street Address` <chr>,\n    #   `City Name` <chr>, `State Code` <chr>, `Zip code` <chr>,\n    #   `Eligible to Order and Refer` <chr>, `Last updated` <chr>\n    ```\n    \n    \n    :::\n    :::\n\n   4. Continue increasing the offset until you reach the count from step 1\n\nPagination Code Example\n\n-------------------------------------------------------------------------------\n\n## Schema\n\n```r\n<data.json>\n  |--@context\n  |--@id\n  |--@type\n  |--conformsTo\n  |--describedBy\n  |==<dataset>\n  |    |--@type\n  |    |--accessLevel\n  |    |--accrualPeriodicity\n  |    |--bureauCode\n  |    |--contactPoint\n  |    |--describedBy\n  |    |--dataQuality\n  |    |--description\n  |    |==<distribution>\n  |    |    |--@type\n  |    |    |--format\n  |    |    |--accessURL\n  |    |    |--resourcesAPI\n  |    |    |--description\n  |    |    |--title\n  |    |    |--modified\n  |    |    |--temporal\n  |    |    |--downloadURL\n  |    |    |--mediaType\n  |    |--identifier\n  |    |--keyword\n  |    |--landingPage\n  |    |--language\n  |    |--license\n  |    |--modified\n  |    |--programCode\n  |    |--publisher\n  |    |--references\n  |    |--temporal\n  |    |--theme\n  |    |--title\n  |____|--describedByType\n```\n",
    "supporting": [
      "faq_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}