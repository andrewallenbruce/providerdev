{
  "hash": "ff7ca0fd427e18b6e8659cdb69c754cf",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Open Payments API\"\neditor_options: \n   chunk_output_type: console\n---\n\n\n## Dataset\n\n::: {.cell}\n\n```{.r .cell-code}\nopen_dataset <- qTBL(\n  fload(\n    \"https://openpaymentsdata.cms.gov/api/1/metastore/schemas/dataset/items?show-reference-ids\"\n    ), \n  keep.attr = TRUE) |>\n    mtt(issued             = as_date(issued),\n        modified           = as_date(modified),\n        accrualPeriodicity = recode_iso8601(accrualPeriodicity),\n        description        = sf_remove(description, \"\\n\"),\n        bureauCode         = delist(bureauCode),\n        programCode        = delist(programCode))\n\nopen_dataset\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 74 × 19\n   bureauCode programCode accessLevel keyword      contactPoint     dataQuality\n   <chr>      <chr>       <chr>       <list>       <list>           <lgl>      \n 1 009:38     009:000     public      <df [1 × 2]> <named list [2]> TRUE       \n 2 009:38     009:000     public      <df [1 × 2]> <named list [2]> TRUE       \n 3 009:38     009:000     public      <df [1 × 2]> <named list [2]> TRUE       \n 4 009:38     009:000     public      <df [1 × 2]> <named list [2]> TRUE       \n 5 009:38     009:000     public      <df [1 × 2]> <named list [2]> TRUE       \n 6 009:38     009:000     public      <df [1 × 2]> <named list [2]> TRUE       \n 7 009:38     009:000     public      <df [1 × 2]> <named list [2]> TRUE       \n 8 009:38     009:000     public      <df [1 × 2]> <named list [2]> TRUE       \n 9 009:38     009:000     public      <df [1 × 2]> <named list [2]> TRUE       \n10 009:38     009:000     public      <df [1 × 2]> <named list [2]> TRUE       \n# ℹ 64 more rows\n# ℹ 13 more variables: description <chr>, distribution <list>,\n#   identifier <chr>, title <chr>, issued <date>, modified <date>,\n#   temporal <chr>, publisher <list>, license <chr>, theme <list>,\n#   `%modified` <chr>, `@type` <chr>, accrualPeriodicity <chr>\n```\n\n\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nidentifiers <- uniq(qTBL(rowbind(gelm(open_dataset, \"keyword\"))))\n\nidentifiers\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 8 × 2\n  identifier                           data     \n  <chr>                                <chr>    \n1 7a69eb60-9b96-52b9-a965-bc355eb14783 2017     \n2 84dbcaf9-e303-5091-bc41-db1d8a56b15e 2018     \n3 9a0e833d-bee5-5a80-a438-f9bccb1e0317 2019     \n4 299719dd-3e81-510f-a4ca-1d48bfb5f412 2020     \n5 d15f292d-9e85-5beb-93fb-8a0cb73798f2 2021     \n6 53edf88c-ba11-5f87-9794-cb14e4eb48aa 2022     \n7 9409f61b-252f-5359-ac36-8d6684df11fb 2023     \n8 33f48f29-a62d-56ce-ad0f-5829514d427b all years\n```\n\n\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nidentifier <- qTBL(rowbind(gelm(open_dataset, \"distribution\"), fill = TRUE), keep.attr = TRUE)\n\nidentifier\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 74 × 2\n   identifier                           data            \n   <chr>                                <list>          \n 1 10ec915a-726a-53b1-9eee-546846c90a60 <named list [7]>\n 2 74072985-5917-5079-a3f4-a0da51425bf8 <named list [7]>\n 3 972fcce6-f7d1-5be0-9241-863086d2480f <named list [7]>\n 4 bfb00fa2-35de-5252-af36-3792394e0f4d <named list [7]>\n 5 e8e70351-162d-5ef6-b1ac-2ee76547596c <named list [7]>\n 6 ce9b904c-ba82-538d-aa58-8aaf403485c7 <named list [7]>\n 7 6817039d-2e36-5f2f-a39a-ff06348fde9d <named list [7]>\n 8 76157bd1-ad0c-5013-8507-7d1d60c8704c <named list [7]>\n 9 9604af6a-476a-5106-ac01-9a0fb7749e01 <named list [7]>\n10 d3d56ac4-0d97-5e8f-986c-eb577ff5086a <named list [7]>\n# ℹ 64 more rows\n```\n\n\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndistribution <- qTBL(rowbind(gelm(identifier, \"data\"), fill = TRUE), keep.attr = TRUE)\n\ndistribution |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 148\nColumns: 8\n$ title              <chr> \"Research Payment Data – Detailed Dataset 2017 Repo…\n$ mediaType          <chr> \"text/csv\", \"text/csv\", \"text/csv\", \"text/csv\", \"te…\n$ format             <chr> \"csv\", \"csv\", \"csv\", \"csv\", \"csv\", \"csv\", \"csv\", \"c…\n$ downloadURL        <chr> \"https://download.cms.gov/openpayments/PGYR17_P0628…\n$ describedBy        <chr> \"https://openpaymentsdata.cms.gov/api/1/metastore/s…\n$ describedByType    <chr> \"application/vnd.tableschema+json\", \"application/vn…\n$ `%Ref:downloadURL` <df[,148]> <data.frame[26 x 148]>\n$ `@type`            <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA…\n```\n\n\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nslt(open_dataset, \n    title, \n    keyword, \n    description, \n    identifier,\n    issued,\n    modified,\n    temporal,\n    publisher,\n    contactPoint,\n    theme,\n    `%modified`,\n    accrualPeriodicity) |>\n  add_vars(id2 = gelm(identifier, \"identifier\")) |> \n  glimpse()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 74\nColumns: 13\n$ title              <chr> \"2017 Research Payment Data\", \"2017 Ownership Payme…\n$ keyword            <list> [<data.frame[1 x 2]>], [<data.frame[1 x 2]>], [<da…\n$ description        <chr> \"Research Payment Data – Detailed Dataset 2017 Repo…\n$ identifier         <chr> \"0e3977b9-a5d6-427e-bc02-480481edd6e0\", \"f90c33d1-c…\n$ issued             <date> 2024-06-28, 2024-06-28, 2024-06-28, 2024-06-28, 20…\n$ modified           <date> 2024-06-28, 2024-06-28, 2024-06-28, 2024-06-28, 20…\n$ temporal           <chr> \"2017-01-01/2017-12-31\", \"2017-01-01/2017-12-31\", \"…\n$ publisher          <list> [\"11b41668-9929-5de3-b494-6464ac4f018d\", [\"openpay…\n$ contactPoint       <list> [\"Open Payments\", \"mailto:openpayments@cms.hhs.gov…\n$ theme              <list> [<data.frame[1 x 2]>], [<data.frame[1 x 2]>], [<da…\n$ `%modified`        <chr> \"2024-07-29T20:42:01+0000\", \"2024-07-29T20:42:03+00…\n$ accrualPeriodicity <chr> NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA, NA,…\n$ id2                <chr> \"10ec915a-726a-53b1-9eee-546846c90a60\", \"74072985-5…\n```\n\n\n:::\n:::\n\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "faq_openpay_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}