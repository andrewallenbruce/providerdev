{
  "hash": "0544e56f5c82989e62e2c2fe9fca4caa",
  "result": {
    "engine": "knitr",
    "markdown": "---\noutput: html_document\neditor_options: \n  chunk_output_type: console\n---\n# Geospatial {#sec-demogeo}\n\n\n\n## Load Packages\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n# library(provider)\nlibrary(tidygeocoder)\nlibrary(tigris)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> To enable caching of data, set `options(tigris_use_cache = TRUE)`\n#> in your R script or .Rprofile.\n```\n\n\n:::\n\n```{.r .cell-code}\nlibrary(rmapshaper)\nlibrary(sf)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\n#> Linking to GEOS 3.12.2, GDAL 3.9.3, PROJ 9.4.1; sf_use_s2() is TRUE\n```\n\n\n:::\n\n```{.r .cell-code}\noptions(tigris_use_cache = TRUE)\n```\n:::\n\n## Retrieve Addresses of all RHCs in Georgia\n\n::: {.cell}\n\n```{.r .cell-code}\nx <- careMain(\"enrollees\")\n\nreq <- x@identifier |> \n  request() |> \n  req_url_query(\n    \"filter[STATE_CD]\" = \"GA\",\n    \"filter[PROVIDER_TYPE_CD]\" = \"00-17\"\n  )\n\nnres <- req |> \n  req_url_path_append(\"stats\") |>\n  providertwo:::perform_simple() |> \n  _[[\"data\"]] |> \n  _[[\"found_rows\"]]\n\nnres\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> [1] 85\n```\n\n\n:::\n\n```{.r .cell-code}\nres <- req |> \n  req_url_query(\n    offset = 0L,\n    size = 5000L\n    ) |> \n  req_perform() |> \n  providertwo:::resp_simple_json() |> \n  get_elem(\"^data$|headers\", regex = TRUE)\n\nrhc_res <- as_tbl(res$data) |> \n  set_names(res$meta) |> \n  providertwo:::map_na_if() |> \n  sbt(ORG_NAME != \"UNIVERSITY OF FLORIDA JACKSONVILLE PHYSICIANS, INC.\") |>\n  slt(ORG_NAME, NPI:STATE_CD) |>\n  roworder(ORG_NAME)\n\nrhc_res |> print(n = 100)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 84 × 7\n#>    ORG_NAME                  NPI   PECOS_ASCT_CNTL_ID ENRLMT_ID PROVIDER_TYPE_CD\n#>    <chr>                     <chr> <chr>              <chr>     <chr>           \n#>  1 ACCESS MEDICAL CLINIC GE… 1639… 2961814694         O2021040… 00-17           \n#>  2 ACCESS MEDICAL CLINIC GE… 1174… 2961814694         O2021112… 00-17           \n#>  3 ACCESS MEDICAL CLINIC GE… 1568… 2961814694         O2022083… 00-17           \n#>  4 BACON COUNTY HEALTH SERV… 1821… 1850294034         O2004042… 00-17           \n#>  5 BACON COUNTY HEALTH SERV… 1558… 1850294034         O2017080… 00-17           \n#>  6 BOWDON- MT. ZION PRIMARY… 1750… 2264415538         O2004060… 00-17           \n#>  7 BOWDON- MT. ZION PRIMARY… 1417… 2264415538         O2008111… 00-17           \n#>  8 BOWDON- MT. ZION PRIMARY… 1538… 2264415538         O2010120… 00-17           \n#>  9 BURKE HOSPITAL COMPANY    1851… 3476956012         O2021072… 00-17           \n#> 10 COFFEE REGIONAL MEDICAL … 1639… 4587656012         O2010060… 00-17           \n#> 11 COLQUITT REGIONAL MEDICA… 1881… 6204821796         O2009082… 00-17           \n#> 12 CRISP REGIONAL HOSPITAL … 1790… 5991616336         O2009060… 00-17           \n#> 13 CRISP REGIONAL HOSPITAL … 1376… 5991616336         O2012080… 00-17           \n#> 14 DAHLONEGA PEDIATRIC AND … 1427… 6608015607         O2013062… 00-17           \n#> 15 DMC PHYSICIAN GROUP LLC   1821… 8628296845         O2015020… 00-17           \n#> 16 DMC PHYSICIAN GROUP LLC   1922… 8628296845         O2018010… 00-17           \n#> 17 DODGE COUNTY HOSPITAL AU… 1255… 1759372733         O2012010… 00-17           \n#> 18 EFFINGHAM HOSPITAL INC    1811… 1254628092         O2016093… 00-17           \n#> 19 EFFINGHAM HOSPITAL INC    1750… 1254628092         O2017062… 00-17           \n#> 20 ELLIJAY URGENT CARE & FA… 1700… 8426343880         O2018010… 00-17           \n#> 21 EMANUEL COUNTY HOSPITAL … 1063… 3577473040         O2009122… 00-17           \n#> 22 EMANUEL COUNTY HOSPITAL … 1437… 3577473040         O2015032… 00-17           \n#> 23 EMANUEL COUNTY HOSPITAL … 1366… 3577473040         O2015032… 00-17           \n#> 24 EMANUEL COUNTY HOSPITAL … 1912… 3577473040         O2015032… 00-17           \n#> 25 EMANUEL COUNTY HOSPITAL … 1538… 3577473040         O2015032… 00-17           \n#> 26 HIAWASSEE FAMILY PRACTIC… 1285… 1557271731         O2003061… 00-17           \n#> 27 HOSPITAL AUTHORITY OF CA… 1790… 5294623948         O2011010… 00-17           \n#> 28 HOSPITAL AUTHORITY OF JE… 1912… 4981692472         O2022071… 00-17           \n#> 29 HOSPITAL AUTHORITY OF JE… 1699… 7214823046         O2007120… 00-17           \n#> 30 HOSPITAL AUTHORITY OF JE… 1215… 7214823046         O2007120… 00-17           \n#> 31 HOSPITAL AUTHORITY OF JE… 1801… 7214823046         O2007120… 00-17           \n#> 32 HOSPITAL AUTHORITY OF MI… 1366… 6002724598         O2004110… 00-17           \n#> 33 HOSPITAL AUTHORITY OF MI… 1922… 6002724598         O2007083… 00-17           \n#> 34 HOSPITAL AUTHORITY OF MI… 1881… 6002724598         O2013072… 00-17           \n#> 35 HOSPITAL AUTHORITY OF WI… 1801… 8628051489         O2010032… 00-17           \n#> 36 HOSPITAL AUTHORITY OF WI… 1023… 8628051489         O2011022… 00-17           \n#> 37 ICH PHYSICIAN GROUP       1649… 9537592084         O2022031… 00-17           \n#> 38 LIFEBRITE HOSPITAL GROUP… 1912… 7810263589         O2018120… 00-17           \n#> 39 MEDICAL SPECIALISTS       1063… 0840108478         O2010111… 00-17           \n#> 40 MEDICAL SPECIALISTS       1851… 0840108478         O2011121… 00-17           \n#> 41 MEMORIAL HEALTH PARTNERS… 1467… 8022919570         O2022122… 00-17           \n#> 42 MEMORIAL HEALTH PARTNERS… 1760… 8022919570         O2022122… 00-17           \n#> 43 MERIWETHER HEALTHCARE LLC 1912… 1850430679         O2019101… 00-17           \n#> 44 NORMAN PARK FAMILY MEDIC… 1518… 4082833546         O2014101… 00-17           \n#> 45 O AKHRAS MD PC            1780… 5991770067         O2008031… 00-17           \n#> 46 O AKHRAS MD PC            1275… 5991770067         O2008032… 00-17           \n#> 47 PHOEBE SUMTER MEDICAL CE… 1376… 4385789213         O2010030… 00-17           \n#> 48 PHOEBE WORTH MEDICAL CEN… 1891… 0840104527         O2007111… 00-17           \n#> 49 PREMIER HEALTHCARE INVES… 1659… 9830327972         O2014092… 00-17           \n#> 50 PRESTON FAMILY MEDICINE … 1053… 8820342355         O2019053… 00-17           \n#> 51 PROFESSIONAL RESOURCES M… 1386… 1052342854         O2023050… 00-17           \n#> 52 SCREVEN COUNTY FAMILY HE… 1841… 4981756624         O2014101… 00-17           \n#> 53 SCREVEN COUNTY HOSPITAL … 1033… 5496944712         O2017101… 00-17           \n#> 54 SJC MEDICAL GROUP INC     1811… 7719978105         O2013062… 00-17           \n#> 55 SPEECH HEARING AND REHAB… 1386… 2062688518         O2012010… 00-17           \n#> 56 STEPHENS COUNTY HOSPITAL… 1649… 7012219306         O2020120… 00-17           \n#> 57 TATTNALL HOSPITAL COMPAN… 1285… 6204907124         O2008091… 00-17           \n#> 58 TATTNALL HOSPITAL COMPAN… 1972… 6204907124         O2008091… 00-17           \n#> 59 TATTNALL HOSPITAL COMPAN… 1285… 6204907124         O2009062… 00-17           \n#> 60 TAYLOR REGIONAL HOSPITAL  1568… 6800795154         O2020031… 00-17           \n#> 61 THE BAXLEY AND APPLING C… 1720… 8426957325         O2009060… 00-17           \n#> 62 THE BAXLEY AND APPLING C… 1073… 8426957325         O2009060… 00-17           \n#> 63 THE BAXLEY AND APPLING C… 1255… 8426957325         O2009060… 00-17           \n#> 64 THE HOSPITAL AUTHORITY O… 1740… 9436142338         O2019062… 00-17           \n#> 65 THE HOSPITAL AUTHORITY O… 1528… 0244224947         O2011010… 00-17           \n#> 66 THE HOSPITAL AUTHORITY O… 1235… 0244224947         O2013061… 00-17           \n#> 67 THE KIRK CLINIC LLC       1083… 7517068075         O2008080… 00-17           \n#> 68 THE MEDICAL CENTER OF EL… 1891… 2062493083         O2005022… 00-17           \n#> 69 THE MEDICAL CENTER OF PE… 1275… 3375795693         O2013060… 00-17           \n#> 70 TIFT REGIONAL HEALTH SYS… 1871… 2062745169         O2020012… 00-17           \n#> 71 TIFT REGIONAL HEALTH SYS… 1487… 2062745169         O2020061… 00-17           \n#> 72 TIFT REGIONAL HEALTH SYS… 1861… 2062745169         O2020061… 00-17           \n#> 73 TIFT REGIONAL HEALTH SYS… 1063… 2062745169         O2020061… 00-17           \n#> 74 TIFT REGIONAL HEALTH SYS… 1588… 2062745169         O2020071… 00-17           \n#> 75 TIFT REGIONAL HEALTH SYS… 1649… 2062745169         O2020071… 00-17           \n#> 76 TMC BUCHANAN FAMILY HEAL… 1508… 9032106604         O2014080… 00-17           \n#> 77 TMC HARALSON FAMILY HEAL… 1992… 8729997846         O2003040… 00-17           \n#> 78 TMC TALLAPOOSA FAMILY HE… 1497… 0042129074         O2003040… 00-17           \n#> 79 TMC WEST CARROLL FAMILY … 1982… 5991616039         O2003091… 00-17           \n#> 80 UNION COUNTY HOSPITAL AU… 1578… 3779490503         O2007060… 00-17           \n#> 81 UNION COUNTY HOSPITAL AU… 1427… 3779490503         O2010010… 00-17           \n#> 82 UPSON COUNTY HOSPITAL INC 1700… 8729075536         O2018072… 00-17           \n#> 83 WC PHYSICIAN GROUP LLC    1174… 0244560407         O2020032… 00-17           \n#> 84 WEAVER MEDICAL CENTER, L… 1629… 4082032727         O2021072… 00-17           \n#> # ℹ 2 more variables: PROVIDER_TYPE_DESC <chr>, STATE_CD <chr>\n```\n\n\n:::\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntictoc::tic()\nrhc_nppes <- npi_nppes(npi = rhc_res$NPI)\ntictoc::toc()\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> 1.11 sec elapsed\n```\n\n\n:::\n\n```{.r .cell-code}\nrhc_nppes |> \n  slt(-endpoints, -enumeration_type) |> \n  print(n = 100)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 84 × 7\n#>    number     addresses    practiceLocations basic        taxonomies identifiers\n#>    <chr>      <list>       <list>            <list>       <list>     <list>     \n#>  1 1639774714 <df>         <NULL>            <named list> <df>       <NULL>     \n#>  2 1174104657 <df>         <NULL>            <named list> <df>       <NULL>     \n#>  3 1568100519 <df>         <NULL>            <named list> <df>       <NULL>     \n#>  4 1821017831 <df>         <NULL>            <named list> <df>       <df>       \n#>  5 1558898882 <df>         <NULL>            <named list> <df>       <NULL>     \n#>  6 1750339511 <df>         <NULL>            <named list> <df>       <df>       \n#>  7 1417906348 <df>         <NULL>            <named list> <df>       <df>       \n#>  8 1538117932 <df>         <NULL>            <named list> <df>       <df>       \n#>  9 1851969372 <df [2 × 9]> <NULL>            <named list> <df>       <NULL>     \n#> 10 1639211956 <df>         <NULL>            <named list> <df>       <df>       \n#> 11 1881758753 <df>         <NULL>            <named list> <df>       <df>       \n#> 12 1790992352 <df>         <NULL>            <named list> <df>       <df>       \n#> 13 1376750976 <df>         <NULL>            <named list> <df>       <df>       \n#> 14 1427333095 <df>         <NULL>            <named list> <df>       <df>       \n#> 15 1821662008 <df [2 × 9]> <NULL>            <named list> <df>       <NULL>     \n#> 16 1922672120 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 17 1255948717 <df>         <NULL>            <named list> <df>       <df>       \n#> 18 1811020407 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 19 1750686382 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 20 1700237633 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 21 1063832202 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 22 1437577350 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 23 1366784415 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 24 1912319997 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 25 1538586243 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 26 1285706879 <df>         <NULL>            <named list> <df>       <df>       \n#> 27 1790088169 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 28 1912379082 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 29 1699782037 <df>         <NULL>            <named list> <df>       <df>       \n#> 30 1215943915 <df>         <NULL>            <named list> <df>       <df>       \n#> 31 1801801543 <df>         <NULL>            <named list> <df>       <df>       \n#> 32 1366472003 <df>         <NULL>            <named list> <df>       <df>       \n#> 33 1922211515 <df>         <NULL>            <named list> <df>       <df>       \n#> 34 1881960151 <df [2 × 9]> <NULL>            <named list> <df>       <NULL>     \n#> 35 1801128863 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 36 1023332970 <df>         <NULL>            <named list> <df>       <df>       \n#> 37 1649670894 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 38 1912430224 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 39 1063459899 <df>         <NULL>            <named list> <df>       <df>       \n#> 40 1851334015 <df>         <NULL>            <named list> <df>       <df>       \n#> 41 1467602482 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 42 1760632780 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 43 1912564618 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 44 1518398049 <df>         <NULL>            <named list> <df>       <df>       \n#> 45 1780695775 <df>         <NULL>            <named list> <df>       <df>       \n#> 46 1275714438 <df>         <NULL>            <named list> <df>       <df>       \n#> 47 1376778001 <df>         <NULL>            <named list> <df>       <df>       \n#> 48 1891770764 <df>         <NULL>            <named list> <df>       <df>       \n#> 49 1659700763 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 50 1053802553 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 51 1386339141 <df [2 × 9]> <NULL>            <named list> <df>       <NULL>     \n#> 52 1841432044 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 53 1033428214 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 54 1811233828 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 55 1386708154 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 56 1649853862 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 57 1285893818 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 58 1972762508 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 59 1285132415 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 60 1568713873 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 61 1720227895 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 62 1073752143 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 63 1255570321 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 64 1740778828 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 65 1528110103 <df>         <NULL>            <named list> <df>       <df>       \n#> 66 1235227752 <df>         <NULL>            <named list> <df>       <df>       \n#> 67 1083816128 <df>         <NULL>            <named list> <df>       <df>       \n#> 68 1891863569 <df>         <NULL>            <named list> <df>       <df>       \n#> 69 1275775314 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 70 1871816918 <df>         <df [1 × 10]>     <named list> <df>       <df>       \n#> 71 1487284956 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 72 1861022329 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 73 1063042562 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 74 1588294045 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 75 1649800111 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 76 1508801416 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 77 1992710610 <df>         <NULL>            <named list> <df>       <df>       \n#> 78 1497760243 <df>         <NULL>            <named list> <df>       <df>       \n#> 79 1982631321 <df>         <NULL>            <named list> <df>       <df>       \n#> 80 1578682696 <df [2 × 9]> <NULL>            <named list> <df>       <df>       \n#> 81 1427384353 <df>         <NULL>            <named list> <df>       <NULL>     \n#> 82 1700392438 <df>         <NULL>            <named list> <df>       <df>       \n#> 83 1174024665 <df [2 × 9]> <NULL>            <named list> <df>       <NULL>     \n#> 84 1629531694 <df [2 × 9]> <NULL>            <named list> <df>       <NULL>     \n#> # ℹ 1 more variable: other_names <list>\n```\n\n\n:::\n\n```{.r .cell-code}\nrhc_nppes |> \n  slt(number, addresses) |> \n  unnest(addresses)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 168 × 12\n#>    number country_code country_name address_purpose address_type address_1 city \n#>    <chr>  <chr>        <chr>        <chr>           <chr>        <chr>     <chr>\n#>  1 16397… US           United Stat… LOCATION        DOM          304 N WE… SYLV…\n#>  2 16397… US           United Stat… MAILING         DOM          4196 HIG… HARDY\n#>  3 11741… US           United Stat… LOCATION        DOM          37 341 B… HAWK…\n#>  4 11741… US           United Stat… MAILING         DOM          4196 HIG… HARDY\n#>  5 15681… US           United Stat… LOCATION        DOM          140 MART… BRUN…\n#>  6 15681… US           United Stat… MAILING         DOM          4196 HIG… HARDY\n#>  7 18210… US           United Stat… MAILING         DOM          204 E 15… ALMA \n#>  8 18210… US           United Stat… LOCATION        DOM          204 E 15… ALMA \n#>  9 15588… US           United Stat… LOCATION        DOM          1205 VAN… NICH…\n#> 10 15588… US           United Stat… MAILING         DOM          302 S WA… ALMA \n#> # ℹ 158 more rows\n#> # ℹ 5 more variables: state <chr>, postal_code <chr>, telephone_number <chr>,\n#> #   fax_number <chr>, address_2 <chr>\n```\n\n\n:::\n\n```{.r .cell-code}\nrhc_nppes |> \n  slt(number, basic) |> \n  unnest_wider(basic)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 84 × 16\n#>    number organization_name organizational_subpart enumeration_date last_updated\n#>    <chr>  <chr>             <chr>                  <chr>            <chr>       \n#>  1 16397… ACCESS MEDICAL C… NO                     2020-12-04       2021-10-06  \n#>  2 11741… ACCESS MEDICAL C… NO                     2021-04-16       2022-09-13  \n#>  3 15681… ACCESS MEDICAL C… NO                     2022-05-20       2024-02-27  \n#>  4 18210… BACON COUNTY HEA… NO                     2006-07-19       2012-10-10  \n#>  5 15588… BACON COUNTY HEA… NO                     2017-05-17       2018-05-22  \n#>  6 17503… BOWDON- MT. ZION… YES                    2006-05-04       2022-02-21  \n#>  7 14179… BOWDENMTZION PRI… NO                     2006-05-08       2022-03-21  \n#>  8 15381… BOWDON- MT. ZION… NO                     2006-05-05       2023-02-28  \n#>  9 18519… BURKE HOSPITAL C… NO                     2021-06-11       2022-10-03  \n#> 10 16392… COFFEE REGIONAL … NO                     2007-02-13       2022-09-23  \n#> # ℹ 74 more rows\n#> # ℹ 11 more variables: certification_date <chr>, status <chr>,\n#> #   authorized_official_first_name <chr>, authorized_official_last_name <chr>,\n#> #   authorized_official_telephone_number <chr>,\n#> #   authorized_official_title_or_position <chr>,\n#> #   authorized_official_name_prefix <chr>,\n#> #   authorized_official_name_suffix <chr>, …\n```\n\n\n:::\n\n```{.r .cell-code}\nrhc_nppes |> \n  slt(number, taxonomies) |> \n  unnest(taxonomies)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 143 × 7\n#>    number     code       taxonomy_group              desc  state license primary\n#>    <chr>      <chr>      <chr>                       <chr> <chr> <chr>   <lgl>  \n#>  1 1639774714 207Q00000X \"193200000X - Multi-Specia… Fami… <NA>  <NA>    FALSE  \n#>  2 1639774714 261QR1300X \"\"                          Clin… <NA>  <NA>    TRUE   \n#>  3 1174104657 207Q00000X \"193200000X - Multi-Specia… Fami… <NA>  <NA>    FALSE  \n#>  4 1174104657 261QR1300X \"\"                          Clin… <NA>  <NA>    TRUE   \n#>  5 1568100519 207Q00000X \"193200000X - Multi-Specia… Fami… <NA>  <NA>    FALSE  \n#>  6 1568100519 261QR1300X \"\"                          Clin… <NA>  <NA>    TRUE   \n#>  7 1821017831 282NR1301X \"\"                          Gene… <NA>  <NA>    TRUE   \n#>  8 1558898882 282NR1301X \"\"                          Gene… <NA>  <NA>    FALSE  \n#>  9 1558898882 363LF0000X \"193200000X - Multi-Specia… Nurs… <NA>  <NA>    TRUE   \n#> 10 1750339511 261QR1300X \"\"                          Clin… <NA>  <NA>    TRUE   \n#> # ℹ 133 more rows\n```\n\n\n:::\n\n```{.r .cell-code}\nrhc_nppes |> \n  slt(number, identifiers) |> \n  unnest(identifiers) |> \n  print(n = 100)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 47 × 6\n#>    number     code  desc                 issuer                 identifier state\n#>    <chr>      <chr> <chr>                <chr>                  <chr>      <chr>\n#>  1 1821017831 05    MEDICAID             <NA>                   000000118C GA   \n#>  2 1821017831 01    Other (non-Medicare) Oscar Number           113408     GA   \n#>  3 1750339511 05    MEDICAID             <NA>                   000254064A GA   \n#>  4 1417906348 05    MEDICAID             <NA>                   000213749B GA   \n#>  5 1417906348 05    MEDICAID             <NA>                   000573262A GA   \n#>  6 1538117932 05    MEDICAID             <NA>                   000228588A GA   \n#>  7 1639211956 05    MEDICAID             <NA>                   00000448D  GA   \n#>  8 1881758753 05    MEDICAID             <NA>                   00002021D  GA   \n#>  9 1881758753 05    MEDICAID             <NA>                   00002021E  GA   \n#> 10 1790992352 05    MEDICAID             <NA>                   00000514F  GA   \n#> 11 1376750976 01    Other (non-Medicare) MCR CCN                11-8907    GA   \n#> 12 1427333095 05    MEDICAID             <NA>                   000548369c GA   \n#> 13 1255948717 05    MEDICAID             <NA>                   003257063A GA   \n#> 14 1285706879 05    MEDICAID             <NA>                   000195665I GA   \n#> 15 1285706879 05    MEDICAID             <NA>                   89011JU    NC   \n#> 16 1699782037 05    MEDICAID             <NA>                   000001031D GA   \n#> 17 1215943915 05    MEDICAID             <NA>                   000001031B GA   \n#> 18 1801801543 05    MEDICAID             <NA>                   000001031E GA   \n#> 19 1366472003 05    MEDICAID             <NA>                   000001339G GA   \n#> 20 1366472003 01    Other (non-Medicare) CLIA                   11D0909917 <NA> \n#> 21 1922211515 01    Other (non-Medicare) CLIA                   11D1056726 GA   \n#> 22 1922211515 05    MEDICAID             <NA>                   841859123C GA   \n#> 23 1023332970 05    MEDICAID             <NA>                   003110986A GA   \n#> 24 1063459899 05    MEDICAID             <NA>                   00700917A  GA   \n#> 25 1063459899 01    Other (non-Medicare) PALMETTO GBA RAILROAD  CE5080     GA   \n#> 26 1851334015 05    MEDICAID             <NA>                   00679775A  GA   \n#> 27 1851334015 01    Other (non-Medicare) PALMETTO GBA RAILROAD  CA6260     GA   \n#> 28 1518398049 05    MEDICAID             <NA>                   003155331A GA   \n#> 29 1518398049 01    Other (non-Medicare) Medicare Part A        11-8912    GA   \n#> 30 1780695775 01    Other (non-Medicare) RAILROAD MEDICARE      080137303  GA   \n#> 31 1275714438 01    Other (non-Medicare) RAILROAD MEDICARE      080137303  GA   \n#> 32 1376778001 05    MEDICAID             <NA>                   003112355A GA   \n#> 33 1891770764 05    MEDICAID             <NA>                   00002109E  GA   \n#> 34 1528110103 05    MEDICAID             <NA>                   0000014821 GA   \n#> 35 1235227752 05    MEDICAID             <NA>                   003140349A GA   \n#> 36 1083816128 05    MEDICAID             <NA>                   251066475A GA   \n#> 37 1891863569 05    MEDICAID             <NA>                   85000124G  GA   \n#> 38 1871816918 05    MEDICAID             <NA>                   003109531A GA   \n#> 39 1992710610 05    MEDICAID             <NA>                   300033792A GA   \n#> 40 1992710610 01    Other (non-Medicare) clinic rendering       367607289A GA   \n#> 41 1992710610 01    Other (non-Medicare) Medicare ID            DG2920     GA   \n#> 42 1497760243 01    Other (non-Medicare) Clinic rendering numb… 367607289B GA   \n#> 43 1497760243 05    MEDICAID             <NA>                   540960632A GA   \n#> 44 1497760243 01    Other (non-Medicare) Medicare ID            CH7677     GA   \n#> 45 1982631321 05    MEDICAID             <NA>                   000750274A GA   \n#> 46 1578682696 01    Other (non-Medicare) RHC NUMBER             11-8516    GA   \n#> 47 1700392438 05    MEDICAID             <NA>                   003213614A GA\n```\n\n\n:::\n\n```{.r .cell-code}\nrhc_nppes |> \n  slt(number, other_names) |> \n  unnest(other_names) |> \n  print(n = 100)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 76 × 4\n#>    number     organization_name                                   type     code \n#>    <chr>      <chr>                                               <chr>    <chr>\n#>  1 1174104657 ACCESS MEDICAL CLINIC                               Doing B… 3    \n#>  2 1821017831 BACON COUNTY RURAL HEALTH CLINIC                    Doing B… 3    \n#>  3 1558898882 NICHOLLS FAMILY HEALTHCARE                          Doing B… 3    \n#>  4 1750339511 CARROLL CO PRIMARY HEALTH CARE                      Doing B… 3    \n#>  5 1417906348 FRANKLIN CLINIC                                     Doing B… 3    \n#>  6 1538117932 CARROLL COUNTY PRIMARY HEALTH CARE                  Doing B… 3    \n#>  7 1639211956 COFFEE REGIONAL FIRST CARE                          Doing B… 3    \n#>  8 1881758753 COLQUITT REGIONAL PRIMARY CARE CLINIC               Doing B… 3    \n#>  9 1790992352 WARWICK HEALTH CARE CLINIC                          Doing B… 3    \n#> 10 1376750976 CRISP REGIONAL CONVENIENT CARE                      Doing B… 3    \n#> 11 1427333095 DAHLONEGA PEDIATRICS                                Doing B… 3    \n#> 12 1821662008 DMC INTERNAL MEDICINE AND FAMILY HEALTH             Doing B… 3    \n#> 13 1821662008 DMC INTERNAL AND FAMILY MEDICINE CLINIC             Doing B… 3    \n#> 14 1922672120 DMC PRIMARY CARE                                    Doing B… 3    \n#> 15 1255948717 EASTMAN FAMILY PRACTICE                             Doing B… 3    \n#> 16 1811020407 EFFINGHAM FAMILY MEDICINE AT GOSHEN                 Doing B… 3    \n#> 17 1750686382 EFFINGHAM FAMILY MEDICINE AT TWENTY-ONE             Doing B… 3    \n#> 18 1700237633 ELLIJAY URGENT CARE & FAMILY PRACTICE               Doing B… 3    \n#> 19 1063832202 RAY MEDICAL CLINIC                                  Doing B… 3    \n#> 20 1437577350 EMANUEL FAMILY MEDICAL CLINIC                       Doing B… 3    \n#> 21 1366784415 SWAINSBORO INTERNAL MEDICINE                        Doing B… 3    \n#> 22 1912319997 TWIN CITY FAMILY MEDICAL CLINIC                     Doing B… 3    \n#> 23 1538586243 PORTER FAMILY MEDICAL CLINIC                        Doing B… 3    \n#> 24 1790088169 CANDLER MEDICAL GROUP RHC                           Doing B… 3    \n#> 25 1912379082 JEFF DAVIS FAMILY MEDICAL GROUP                     Doing B… 3    \n#> 26 1699782037 PHYSICIANS HEALTH GROUP WADLEY                      Doing B… 3    \n#> 27 1215943915 PHYSICIANS' HEALTH GROUP                            Doing B… 3    \n#> 28 1801801543 WRENS PHYSICIANS' HEALTH GROUP                      Doing B… 3    \n#> 29 1366472003 THE CAMILLA PEDIATRIC CENTER                        Doing B… 3    \n#> 30 1922211515 MEDICAL GROUP OF MITCHELL COUNTY                    Doing B… 3    \n#> 31 1881960151 ARCHBOLD - PELHAM PRIMARY CARE CLINIC               Doing B… 3    \n#> 32 1801128863 COMMUNITY MEDICAL ASSOCIATES OF LINCOLNTON          Doing B… 3    \n#> 33 1023332970 COMMUNITY MEDICAL ASSOCIATES OF WASHINGTON          Doing B… 3    \n#> 34 1649670894 IRWIN COUNTY HOSPITAL AUTHORITY                     Former … 4    \n#> 35 1649670894 WILLACOOCHEE CLINIC                                 Doing B… 3    \n#> 36 1912430224 LIFEBRITE FAMILY MEDICAL OF EARLY                   Doing B… 3    \n#> 37 1063459899 MEDICAL ASSOCIATES                                  Doing B… 3    \n#> 38 1851334015 NORTH JEFFERSON MEDICAL CENTER                      Doing B… 3    \n#> 39 1467602482 CHI MEMORIAL FAMILY PRACTICE ASSOCIATES - TRENTON   Doing B… 3    \n#> 40 1760632780 CHI MEMORIAL FAMILY PRACTICE ASSOCIATES - LAFAYETTE Doing B… 3    \n#> 41 1912564618 WARM SPRINGS MEDICAL CENTER                         Doing B… 3    \n#> 42 1376778001 PHOEBE SUMTER ELLAVILLE CLINIC                      Doing B… 3    \n#> 43 1891770764 PHOEBE WORTH FAMILY MEDICINE                        Doing B… 3    \n#> 44 1659700763 FLINT RIVER RURAL HEALTH CLINIC - OGLETHORPE        Doing B… 3    \n#> 45 1053802553 PRESTON FAMILY MEDICINE                             Doing B… 3    \n#> 46 1386339141 MOUNTAIN LAKES PHYSICIANS GROUP                     Doing B… 3    \n#> 47 1841432044 OPTIM PRIMARY CARE - SYLVANIA                       Doing B… 3    \n#> 48 1033428214 OPTIM PRIMARY CARE MILLEN                           Doing B… 3    \n#> 49 1649853862 SCHPG-PRIMARY CARE                                  Doing B… 3    \n#> 50 1285893818 OPTIM PRIMARY CARE-REIDSVILLE                       Doing B… 3    \n#> 51 1972762508 OPTIM PRIMARY CARE- GLENNVILLE                      Doing B… 3    \n#> 52 1285132415 OPTIM PRIMARY CARE METTER                           Doing B… 3    \n#> 53 1568713873 TAYLOR PHYSICIANS PRACTICE # 3                      Doing B… 3    \n#> 54 1720227895 APPLING PEDIATRICS                                  Doing B… 3    \n#> 55 1073752143 APPLING MEDICAL GROUP                               Doing B… 3    \n#> 56 1255570321 SOUTH GEORGIA MEDICAL ASSOCIATES                    Doing B… 3    \n#> 57 1740778828 INTERNAL MEDICINE AND GERIATRICS-RHC                Doing B… 3    \n#> 58 1740778828 HABERSHAM MEDICAL GROUP                             Doing B… 3    \n#> 59 1528110103 MILLER COUNTY MEDICAL CENTER                        Doing B… 3    \n#> 60 1235227752 ROBERT E JENNINGS MEDICAL CLINIC                    Doing B… 3    \n#> 61 1275775314 ATRIUM HEALTH NAVICENT PRIMARY CARE FORT VALLEY     Doing B… 3    \n#> 62 1275775314 VALLEY MEDICAL CENTER                               Doing B… 3    \n#> 63 1871816918 SOUTHWELL MEDICAL ADEL PRIMARY CARE                 Doing B… 3    \n#> 64 1871816918 COOK PRIMARY CARE                                   Doing B… 3    \n#> 65 1487284956 SOUTHWELL MEDICAL SYLVESTER PRIMARY CARE            Doing B… 3    \n#> 66 1861022329 SOUTHWELL MEDICAL CLINIC                            Doing B… 3    \n#> 67 1063042562 SOUTHWELL MEDICAL ASHBURN PRIMARY CARE              Doing B… 3    \n#> 68 1588294045 SOUTHWELL MEDICAL NASHVILLE PRIMARY CARE            Doing B… 3    \n#> 69 1649800111 SOUTHWELL MEDICAL COMMUNITY HEALTH CENTER           Doing B… 3    \n#> 70 1508801416 BUCHANAN MEDICAL CLINIC                             Doing B… 3    \n#> 71 1992710610 PRIMARY CARE OF BREMEN                              Doing B… 3    \n#> 72 1982631321 WEST CARROLL FAMILY HEALTHCARE                      Doing B… 3    \n#> 73 1578682696 UNION GENERAL FAMILY MEDICINE                       Doing B… 3    \n#> 74 1427384353 CHATUGE MEDICAL GROUP                               Other N… 5    \n#> 75 1700392438 UPSON REGIONAL MEDICAL CENTER                       Doing B… 3    \n#> 76 1174024665 C/O HOSPITAL AUTHORITY OF WASHINGTON COUNTY         Other N… 5\n```\n\n\n:::\n\n```{.r .cell-code}\nrhc_nppes |> \n  slt(number, practiceLocations) |> \n  unnest_wider(practiceLocations) |> \n  sbt(!is.na(state)) |> \n  print(n = 100)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n#> # A tibble: 1 × 11\n#>   number  country_code country_name address_purpose address_type address_1 city \n#>   <chr>   <chr>        <chr>        <chr>           <chr>        <chr>     <chr>\n#> 1 187181… US           United Stat… LOCATION        DOM          308 N PA… ADEL \n#> # ℹ 4 more variables: state <chr>, postal_code <chr>, telephone_number <chr>,\n#> #   fax_number <chr>\n```\n\n\n:::\n:::\n\n## Geocode with {tidygeocoder}\n\n::: {.cell}\n\n```{.r .cell-code}\ngeo_add <- tidygeocoder::geocode(\n  rhcs_ga,\n  address = address,\n  method = 'mapbox', \n  full_results = TRUE)\n\ngeo_add\n\nmapbox <- geo_add |> select(organization:long)\n\nmapbox\n```\n:::\n\n## Retrieve Georgia counties shapefile from {tigris}\n\n::: {.cell}\n\n```{.r .cell-code}\ntig_cnt <- tigris::counties(\n  state = \"GA\",\n  year = 2022,\n  progress_bar = FALSE)\n\ntig_cnt\n```\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsf_cnt <- ms_simplify(tig_cnt)\n\nsf_cnt\n\nsf_cnt$mid <- st_centroid(sf_cnt$geometry)\n\nsf_cnt\n```\n:::\n\n## Map with {ggplot}\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(sf_cnt) +\n  geom_sf(\n    fill = \"skyblue\",\n    colour = \"white\",\n    alpha = 0.5) +\n  geom_sf_text(\n    aes(geometry = geometry, \n        label = NAME),\n    size = 3.5,\n    check_overlap = TRUE) +\n  geom_jitter(\n    data = sbt(mapbox, city != \"HIAWASSEE\"),\n    mapping = aes(long, lat),\n    fill = \"yellow\",\n    color = \"darkred\",\n    alpha = 0.75,\n    size = 4,\n    shape = 21,\n    stroke = 1)\n```\n:::\n\n",
    "supporting": [
      "demo_geo_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}