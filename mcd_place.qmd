---
editor_options: 
   chunk_output_type: console
---

```{r}
#| label: setup-common-01
#| include: false
#| warning: false
source("includes/_common.R")
```

# ACA Federal Upper Limits {#sec-acaful}

__Affordable Care Act Federal Upper Limits (FUL)__ based on the weighted average of the most recently reported monthly average manufacturer price (AMP) for pharmaceutically and therapeutically equivalent multiple source drug products that are available for purchase by retail community pharmacies on a nationwide basis.

## Metadata

```{r}
#| label: s7_object
#| echo: false
end <- caid_endpoint("aca_ful")
print_meta(end)
```

### Dictionary

```{r}
#| label: dict
#| echo: false
#| message: true
dict <- end@metadata$dictionary |> 
  request() |>
  providertwo:::perform_simple() |>
    _[["data"]] |> 
  _[["fields"]]

dict <- new_tbl(
  field = dict$name, 
  description = dict$description)

print_dict_tbl(dict)
```

## Data

```{r}
#| label: http_request
#| message: false
#| warning: false
#| echo: false
resp <- quick("aca_ful", offset = 0, limit = 8000) |>
  mtt(
    mdr_unit_type = factor_(mdr_unit_type),
  amp_wt_avg = as.double(weighted_average_of_amps),
  aca_ful = as.double(aca_ful),
  package_size = as.integer(package_size),
  year = as.integer(year),
  month = as.integer(month),
  gt_175pc_amp_wt_avg = charbin(multiplier_greater_than_175_percent_of_weighted_avg_of_amps),
  multiplier_greater_than_175_percent_of_weighted_avg_of_amps = NULL,
  weighted_average_of_amps = NULL)

resp |> str()
```

### Overview

```{r}
#| label: overview
resp |> data_codebook()
```

