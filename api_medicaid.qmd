---
output: html_document
editor_options: 
  chunk_output_type: console
---
# Medicaid {#sec-mcdapi}

```{r}
#| label: setup-common-01
#| include: false
source("includes/_common.R")
```

## Links

   * [Medicaid.gov API](https://data.medicaid.gov/about/api)

## Load Catalog

```{r}
#| label: mcd_catalog
catalog_mcd <- function() {

  x <- fload("https://data.medicaid.gov/api/1/metastore/schemas/dataset/items?show-reference-ids")
    
  x |>
    as_tbl() |>
    mtt(
      modified    = as_date(modified),
      issued      = as_date(issued),
      periodicity = recode_iso8601(accrualPeriodicity),
      contact     = reduce_contact(x$contactPoint)
    ) |>
    slt(
      title,
      identifier,
      description,
      periodicity,
      issued,
      modified,
      contact,
      theme,
      keyword,
      distribution,
      temporal,
      references
    )
}

x <- catalog_mcd()

x

# map(x$theme, \(x) get_elem(as.list(x), "data"))
# sbt(x$references, not_na(x$references))

x$distribution[[1]]$data[[1]]$downloadURL

x$distribution[[1]]$data[[1]]$describedBy
```


```{r}
utils::formatOL(
  x$title
) |> 
  writeLines()
```

