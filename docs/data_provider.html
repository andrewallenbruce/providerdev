<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.5">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="This is a personal, informal guide to rewriting an R package that I wrote from the ground up. It is a work in progress and will be updated as I learn more about the process.">

<title>5&nbsp; Provider – Refactoring Provider</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./data_openpayments.html" rel="next">
<link href="./data_main.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1b73d27e55c73277398f79acb0ed0396.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-d8bb085b9265994618eca33a7d923795.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Refactoring Provider</span>
    </a>
  </div>
        <div class="quarto-navbar-tools tools-end">
    <a href="https://github.com/andrewallenbruce/providerdev" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data_main.html">Catalogs</a></li><li class="breadcrumb-item"><a href="./data_provider.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Provider</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">APIs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./api_faq.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">API FAQ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./api_schema.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">DCAT Schema</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./api_syntax.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">Query Syntax</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text">Catalogs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_main.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Main</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_provider.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Provider</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./data_openpayments.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Open Payments</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Functions</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fn_affiliations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Affiliations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fn_providers.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Providers</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./fn_quality_eligibility.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Quality Eligibility</span></span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#provider-data-catalog" id="toc-provider-data-catalog" class="nav-link active" data-scroll-target="#provider-data-catalog"><span class="header-section-number">5.1</span> Provider Data Catalog</a></li>
  <li><a href="#rate-limit" id="toc-rate-limit" class="nav-link" data-scroll-target="#rate-limit"><span class="header-section-number">5.2</span> Rate Limit</a></li>
  <li><a href="#star-ratings-overall-care-ratings" id="toc-star-ratings-overall-care-ratings" class="nav-link" data-scroll-target="#star-ratings-overall-care-ratings"><span class="header-section-number">5.3</span> Star Ratings &amp; Overall Care Ratings</a></li>
  <li><a href="#querying-for-specific-conditions" id="toc-querying-for-specific-conditions" class="nav-link" data-scroll-target="#querying-for-specific-conditions"><span class="header-section-number">5.4</span> Querying for Specific Conditions</a></li>
  <li><a href="#retrieve-list-of-all-dataset-ids" id="toc-retrieve-list-of-all-dataset-ids" class="nav-link" data-scroll-target="#retrieve-list-of-all-dataset-ids"><span class="header-section-number">5.5</span> Retrieve List of All Dataset IDs</a></li>
  <li><a href="#filter-list-of-dataset-ids" id="toc-filter-list-of-dataset-ids" class="nav-link" data-scroll-target="#filter-list-of-dataset-ids"><span class="header-section-number">5.6</span> Filter List of Dataset IDs</a></li>
  <li><a href="#difference-between-metastore-datastore" id="toc-difference-between-metastore-datastore" class="nav-link" data-scroll-target="#difference-between-metastore-datastore"><span class="header-section-number">5.7</span> Difference Between Metastore &amp; Datastore</a></li>
  <li><a href="#distribution-dataset-ids" id="toc-distribution-dataset-ids" class="nav-link" data-scroll-target="#distribution-dataset-ids"><span class="header-section-number">5.8</span> Distribution &amp; Dataset IDs</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data"><span class="header-section-number">5.9</span> Data</a></li>
  <li><a href="#national-downloadable-file" id="toc-national-downloadable-file" class="nav-link" data-scroll-target="#national-downloadable-file"><span class="header-section-number">5.10</span> National Downloadable File</a>
  <ul class="collapse">
  <li><a href="#examples" id="toc-examples" class="nav-link" data-scroll-target="#examples"><span class="header-section-number">5.10.1</span> Examples</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/andrewallenbruce/providerdev/blob/main/data_provider.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div><div class="quarto-code-links"><h2>Code Links</h2><ul><li><a href="https://github.com/andrewallenbruce/provider"><i class="bi bi-file-code"></i>Provider GitHub</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./data_main.html">Catalogs</a></li><li class="breadcrumb-item"><a href="./data_provider.html"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Provider</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Provider</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="provider-data-catalog" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="provider-data-catalog"><span class="header-section-number">5.1</span> Provider Data Catalog</h2>
<ul>
<li><a href="https://data.cms.gov/provider-data/">Home</a></li>
<li><a href="https://data.cms.gov/provider-data/search">Datasets</a></li>
<li><a href="https://data.cms.gov/provider-data/about">About</a></li>
<li><a href="https://data.cms.gov/provider-data/docs">API Documentation</a></li>
</ul>
<p>This site provides access to the Centers for Medicare &amp; Medicaid Services official data that are used on the <strong>Medicare Care Compare</strong> website and directories.</p>
</section>
<section id="rate-limit" class="level2" data-number="5.2">
<h2 data-number="5.2" class="anchored" data-anchor-id="rate-limit"><span class="header-section-number">5.2</span> Rate Limit</h2>
<p>The <strong>Provider Data Catalog API</strong> currently limits each batch of results to a maximum of <strong>2,000</strong> entries. To retrieve datasets larger than this threshold, you must execute multiple requests, incrementing the offset each time to paginate through results:</p>
<ol type="1">
<li>Fetch the first 2000 results:</li>
</ol>
<div class="sourceCode" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>data.cms.gov<span class="sc">/</span>provider<span class="sc">-</span>data<span class="sc">/</span>api<span class="sc">/</span><span class="dv">1</span><span class="sc">/</span>datastore<span class="sc">/</span>query<span class="sc">/</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>   <span class="dv">7</span>t8x<span class="sc">-</span>u3ir<span class="sc">/</span><span class="dv">0</span>?</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>   offset<span class="ot">=</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<ol start="2" type="1">
<li>Fetch the next 2000 results (2001-4000):</li>
</ol>
<div class="sourceCode" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>data.cms.gov<span class="sc">/</span>provider<span class="sc">-</span>data<span class="sc">/</span>api<span class="sc">/</span><span class="dv">1</span><span class="sc">/</span>datastore<span class="sc">/</span>query<span class="sc">/</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>   <span class="dv">7</span>t8x<span class="sc">-</span>u3ir<span class="sc">/</span><span class="dv">0</span>?</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>   offset<span class="ot">=</span><span class="dv">2000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Continue this pattern, incrementing the offset by 2,000 for each subsequent batch.</p>
<p>While retrieving large datasets, consider pacing your requests to avoid overwhelming your system with data and to allow for graceful error handling. Depending on the volume of data and your application’s capabilities, consider implementing a back-off strategy if errors occur.</p>
</section>
<section id="star-ratings-overall-care-ratings" class="level2" data-number="5.3">
<h2 data-number="5.3" class="anchored" data-anchor-id="star-ratings-overall-care-ratings"><span class="header-section-number">5.3</span> Star Ratings &amp; Overall Care Ratings</h2>
<p>CMS’s <strong>Five-Star Quality Rating System</strong> is designed to help users compare the overall quality of care across different healthcare providers. Access these ratings by referring to the associated column names:</p>
<ul>
<li>Nursing Homes: <code>overall_rating</code></li>
<li>Hospitals: <code>hospital_overall_rating</code></li>
<li>Dialysis Facilities: <code>five_star</code></li>
<li>Hospice: <code>star_rating</code></li>
<li>Home Health: <code>quality_of_patient_care_star_rating</code></li>
</ul>
<p>For example, the query for the <a href="https://data.cms.gov/provider-data/dataset/4pq5-n9py"><strong>Nursing Homes</strong></a> dataset for facilities with a 5-star overall rating:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>data.cms.gov<span class="sc">/</span>provider<span class="sc">-</span>data<span class="sc">/</span>api<span class="sc">/</span><span class="dv">1</span><span class="sc">/</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>   datastore<span class="sc">/</span>query<span class="sc">/</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>   <span class="dv">4</span>pq5<span class="sc">-</span>n9py<span class="sc">/</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>   <span class="dv">0</span>?</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>   conditions[<span class="dv">0</span>][property]<span class="ot">=</span>overall_rating<span class="sc">&amp;</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>   conditions[<span class="dv">0</span>][value]<span class="ot">=</span><span class="dv">5</span><span class="sc">&amp;</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>   conditions[<span class="dv">0</span>][operator]<span class="sc">==</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="querying-for-specific-conditions" class="level2" data-number="5.4">
<h2 data-number="5.4" class="anchored" data-anchor-id="querying-for-specific-conditions"><span class="header-section-number">5.4</span> Querying for Specific Conditions</h2>
<p>The recommended method is to use the datastore query endpoint: <code>datastore/query/{datasetID}/{index}</code></p>
<p>The datastore query endpoint takes two arguments: the <code>datasetID</code>, which can be obtained from the URL of the dataset and does not change between data refreshes, and the index of the distribution. Currently on PDC, the index will always be zero.</p>
<p>As an example, if you want to pull the first 500 results for a specific dataset that has a rating column called <code>overall_rating</code>, you would first identify the dataset that has the specific column such as this:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>data.cms.gov<span class="sc">/</span>provider<span class="sc">-</span>data<span class="sc">/</span>dataset<span class="sc">/</span><span class="dv">4</span>pq5<span class="sc">-</span>n9py</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>and then you would use</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>data.cms.gov<span class="sc">/</span>provider<span class="sc">-</span>data<span class="sc">/</span>api<span class="sc">/</span><span class="dv">1</span><span class="sc">/</span>datastore<span class="sc">/</span>query<span class="sc">/</span><span class="dv">4</span>pq5<span class="sc">-</span>n9py<span class="sc">/</span><span class="dv">0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>The results can be filtered further. For example, to return the first 500 results with an overall rating of 5, you would use the following:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>data.cms.gov<span class="sc">/</span>provider<span class="sc">-</span>data<span class="sc">/</span>api<span class="sc">/</span><span class="dv">1</span><span class="sc">/</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>   datastore<span class="sc">/</span>query<span class="sc">/</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>   <span class="dv">4</span>pq5<span class="sc">-</span>n9py<span class="sc">/</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>   <span class="dv">0</span>?</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>   conditions[<span class="dv">0</span>][property]<span class="ot">=</span>overall_rating<span class="sc">&amp;</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>   conditions[<span class="dv">0</span>][value]<span class="ot">=</span><span class="dv">5</span><span class="sc">&amp;</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>   conditions[<span class="dv">0</span>][operator]<span class="sc">==</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>More complex queries can be created in JSON and converted to an HTTP query string by using <a href="https://www.convertonline.io/convert/json-to-query-string">JSON Query to String</a>.</p>
<p>For example, to return just the CMS certification number and overall rating columns that have an overall rating greater than 3, you could use the following JSON:</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>{</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="st">"properties"</span><span class="sc">:</span> [</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>        <span class="st">"cms_certification_number_ccn"</span>,</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>        <span class="st">"overall_rating"</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    ],</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">"conditions"</span><span class="sc">:</span> [</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>            <span class="st">"property"</span><span class="sc">:</span><span class="st">"overall_rating"</span>,</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">"value"</span><span class="sc">:</span> <span class="st">"3"</span>,</span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>            <span class="st">"operator"</span><span class="sc">:</span> <span class="st">"&gt;"</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    ]</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Which converts to a query string of:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>data.cms.gov<span class="sc">/</span>provider<span class="sc">-</span>data<span class="sc">/</span>api<span class="sc">/</span><span class="dv">1</span><span class="sc">/</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>   datastore<span class="sc">/</span>query<span class="sc">/</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>   <span class="dv">4</span>pq5<span class="sc">-</span>n9py<span class="sc">/</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>   <span class="dv">0</span>?</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>   properties[]<span class="ot">=</span>cms_certification_number_ccn<span class="sc">&amp;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>   properties[]<span class="ot">=</span>overall_rating<span class="sc">&amp;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>   conditions[<span class="dv">0</span>][property]<span class="ot">=</span>overall_rating<span class="sc">&amp;</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>   conditions[<span class="dv">0</span>][value]<span class="ot">=</span><span class="dv">3</span><span class="sc">&amp;</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>   conditions[<span class="dv">0</span>][operator]<span class="sc">=&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="retrieve-list-of-all-dataset-ids" class="level2" data-number="5.5">
<h2 data-number="5.5" class="anchored" data-anchor-id="retrieve-list-of-all-dataset-ids"><span class="header-section-number">5.5</span> Retrieve List of All Dataset IDs</h2>
<p>Yes, you can retrieve a comprehensive list of all datasets available on the PDC site by leveraging the metastore schema endpoint:</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>https<span class="sc">:</span><span class="er">//</span>data.cms.gov<span class="sc">/</span>provider<span class="sc">-</span>data<span class="sc">/</span>api<span class="sc">/</span><span class="dv">1</span><span class="sc">/</span>metastore<span class="sc">/</span>schemas<span class="sc">/</span>dataset<span class="sc">/</span>items</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>For developers looking to work with multiple datasets programmatically, consider utilizing JSON parsing tools or custom scripts to extract and manage these IDs efficiently. For example, using a <code>curl</code> command in the terminal followed by a tool like <code>jq</code> can streamline the process:</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>curl https<span class="sc">:</span><span class="er">//</span>data.cms.gov<span class="sc">/</span>provider<span class="sc">-</span>data<span class="sc">/</span>api<span class="sc">/</span><span class="dv">1</span><span class="sc">/</span>metastore<span class="sc">/</span>schemas<span class="sc">/</span>dataset<span class="sc">/</span>items <span class="sc">|</span> jq <span class="st">'.[] | {id: .identifier, name: .title}'</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>This command fetches the list of datasets and uses <code>jq</code> to parse the JSON response, extracting the identifier and title of each dataset.</p>
</section>
<section id="filter-list-of-dataset-ids" class="level2" data-number="5.6">
<h2 data-number="5.6" class="anchored" data-anchor-id="filter-list-of-dataset-ids"><span class="header-section-number">5.6</span> Filter List of Dataset IDs</h2>
<p>You can get a list of all public datasets for a Topic area via the /api/1/search endpoint. For example, to get a list of all datasets in the Home health services Topic, you could use:</p>
<p>https://data.cms.gov/provider-data/api/1/search?page-size=100&amp;theme=Home%20health%20services</p>
<p>(Note that “%20” is inserted for the spaces between words in a Topic name.)</p>
<p>If the page size is not provided, the default result limit is 10.</p>
<p>One of the easiest ways to use this feature is to set up your search parameters on the Provider Data Catalog search page (https://data.cms.gov/provider-data/search) and then copy the query string to the end of the search endpoint.</p>
<p>For example, if you filter by “Dialysis facilities” tagged with “Linking Quality to Payment” and select 25 results per page, the query string produced is: ?keyword=Linking%20Quality%20to%20Payment&amp;page-size=25&amp;theme=Dialysis%20facilities</p>
<p>You can append this query string to the search endpoint to get a list of all datasets that meet that criteria, like this:</p>
<p>https://data.cms.gov/provider-data/api/1/search?keyword=Linking%20Quality%20to%20Payment&amp;page-size=25&amp;theme=Dialysis%20facilities.</p>
<p>You can also use the same method to return a list of datasets that contain a keyword like “ratings” in their title and/or description:</p>
<p>https://data.cms.gov/provider-data/api/1/search?fulltext=ratings</p>
</section>
<section id="difference-between-metastore-datastore" class="level2" data-number="5.7">
<h2 data-number="5.7" class="anchored" data-anchor-id="difference-between-metastore-datastore"><span class="header-section-number">5.7</span> Difference Between Metastore &amp; Datastore</h2>
<p>Datastore: data from the data files (CSVs) and Metastore: metadata properties about the dataset from the data.json file (e.g.&nbsp;dataset title, last updated date, release date, keywords, etc.)</p>
<p>Think of the Metastore as the library index that helps you find the right book (dataset), and the Datastore as the book itself, containing all the detailed information (data entries) you need.</p>
</section>
<section id="distribution-dataset-ids" class="level2" data-number="5.8">
<h2 data-number="5.8" class="anchored" data-anchor-id="distribution-dataset-ids"><span class="header-section-number">5.8</span> Distribution &amp; Dataset IDs</h2>
<p>Distribution ID - the unique identifier of the datastore. The distribution ID is specific to a particular CSV data import, so it changes with every data refresh.</p>
<p>Dataset ID - the unique identifier of the dataset The Dataset ID comes from the data.json file and appears as part of the URL in the PDC site and it does not change between refreshes.</p>
<p>The Distribution ID changes with every data refresh.</p>
<p>If you have been using the datastore/sql or datastore/query/{distributionId} endpoints to pull data, you might consider switching to use the datastore/query/{datasetID}/{index} endpoint instead. The datasetID does not change between refreshes, and currently all datasets in the Provider Data Catalog have only a single resource, so the index will always be zero.</p>
<p>As an example, to pull the data for the long term care hospital dataset at https://data.cms.gov/provider-data/dataset/5zdx-ny2x you could use</p>
<p>https://data.cms.gov/provider-data/api/1/datastore/query/5zdx-ny2x/0</p>
<p>Since Distribution IDs change with every dataset update, if you are creating an automated script, it is better to use APIs with the Dataset ID and the index of the distribution. (Please see “Do the Distribution IDs change?” for more information.)</p>
<p>If you still need the current distribution ID, you can find it by viewing the dataset metadata API. /api/1/metastore/schemas/dataset/items/[datasetID]?show-reference-ids under distribution -&gt; identifier</p>
</section>
<section id="data" class="level2" data-number="5.9">
<h2 data-number="5.9" class="anchored" data-anchor-id="data"><span class="header-section-number">5.9</span> Data</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">provider_data</span>() <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">purse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $accessLevel              c234 public                                     ...
- $landingPage              c234 https://data.cms.gov/provider-data/dataset ...
- $bureauCode               c234 009:38                                     ...
- $issued                   c234 2020-03-14                                 ...
- $type                     c234 dcat:Dataset                               ...
- $modified                 c234 2024-12-21                                 ...
- $released                 c234 2024-10-23                                 ...
- $keyword                  c234 Quality, Quality Measures                  ...
- $contactPoint_type        c234 vcard:Contact                              ...
- $contactPoint_fn          c234 Dialysis Facility Helpdesk                 ...
- $contactPoint_hasEmail    c234 mailto:DialysisData@umich.edu              ...
- $contactPoint_hasURL      c234 NA                                         ...
- $publisher_type           c234 org:Organization                           ...
- $publisher_name           c234 Centers for Medicare &amp; Medicaid Services ( ...
- $identifier               c234 23ew-n7w9                                  ...
- $description              c234 A list of all dialysis facilities register ...
- $title                    c234 Dialysis Facility - Listing by Facility    ...
- $programCode              c234 009:000                                    ...
- $distribution_type        c234 dcat:Distribution                          ...
- $distribution_downloadURL c234 https://data.cms.gov/provider-data/sites/d ...
- $distribution_mediaType   c234 text/csv                                   ...
- $distribution_title       c234 NA                                         ...
- $theme                    c234 Dialysis facilities                        ...
- $archiveExclude           l234 NA                                         ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">provider_data</span>() <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(title) <span class="sc">|&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="at">sep =</span> <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Dialysis Facility - Listing by Facility
Dialysis Facility - State Averages
Dialysis Facility - National Averages
Patient survey (ICH CAHPS) - Facility
Patient survey (ICH CAHPS) - National
Home Health Care - Zip Codes
Home Health Care Agencies
Home Health Care - National Data
Hospice - Zip Data
Hospice - General Information
Hospice - Provider Data
Hospice care - Provider CAHPS Hospice Survey Data
Hospice care - National CAHPS Hospice Survey Data
Outpatient and Ambulatory Surgery Consumer Assessment of Healthcare Providers and Systems (OAS CAHPS) survey for ambulatory surgical centers - Facility
Ambulatory Surgical Center Quality Measures - Facility
Ambulatory Surgical Center Quality Measures - National
Outpatient and Ambulatory Surgery Consumer Assessment of Healthcare Providers and Systems (OAS CAHPS) survey for ambulatory surgical centers - National
Ambulatory Surgical Center Quality Measures - State
Outpatient and Ambulatory Surgery Consumer Assessment of Healthcare Providers and Systems (OAS CAHPS) survey for ambulatory surgical centers - State
Comprehensive Care For Joint Replacement Model - Provider Data
CMS Medicare PSI-90 and component measures - six-digit estimate dataset
Complications and Deaths - Hospital
Complications and Deaths - National
Complications and Deaths - State
Footnote Crosswalk
Outpatient and Ambulatory Surgery Consumer Assessment of Healthcare Providers and Systems (OAS CAHPS) survey - Footnotes
Table 2: FY2021 Distribution of Net Change in Base Operating DRG Payment Amount
Table 1: FY2021 Net Change in Base Operating DRG Payment Amount
Table 3: FY2021 Percent Change in Medicare Payments
Table 4: FY2021 Value-Based Incentive Payment Amount
Patient survey (HCAHPS) - Hospital
Patient survey (HCAHPS) - National
Patient survey (HCAHPS) - State
Healthcare Associated Infections - Hospital
Healthcare Associated Infections - National
Healthcare Associated Infections - State
Outpatient and Ambulatory Surgery Consumer Assessment of Healthcare Providers and Systems (OAS CAHPS) survey for hospital outpatient departments - Facility
Outpatient and Ambulatory Surgery Consumer Assessment of Healthcare Providers and Systems (OAS CAHPS) survey for hospital outpatient departments - National
Outpatient and Ambulatory Surgery Consumer Assessment of Healthcare Providers and Systems (OAS CAHPS) survey for hospital outpatient departments - State
Hospital General Information
Complications and Unplanned Hospital Visits - PPS-Exempt Cancer Hospital - Hospital
Complications and Unplanned Hospital Visits - PPS-Exempt Cancer Hospital - National
Hospital-Acquired Condition (HAC) Reduction Program
Medicare Spending Per Beneficiary - Hospital Additional Decimal Places
Safety and Healthcare-Associated Infection Measures - PPS-Exempt Cancer Hospital
Patient Survey (PCH - HCAHPS) PPS-Exempt Cancer Hospital - Hospital
Patient Survey (PCH - HCAHPS) PPS-Exempt Cancer Hospital - National
Patient Survey (PCH - HCAHPS) PPS-Exempt Cancer Hospital - State
Hospital Readmissions Reduction Program
Hospital Value-Based Purchasing (HVBP) - Clinical Outcomes Domain Scores
Hospital Value-Based Purchasing (HVBP) - Efficiency Scores
Hospital Value-Based Purchasing (HVBP) - Person and Community Engagement Domain Scores (HCAHPS)
Hospital Value-Based Purchasing (HVBP) - Safety
Hospital Value-Based Purchasing (HVBP) - Total Performance Score
Inpatient Psychiatric Facility Quality Measure Data - by Facility
Inpatient Psychiatric Facility Quality Measure Data - National
Inpatient Psychiatric Facility Quality Measure Data - by State
Measure Dates
Medicare Hospital Spending by Claim
Medicare Spending Per Beneficiary - Hospital
Medicare Spending Per Beneficiary - National
Medicare Spending Per Beneficiary - State
Outpatient Imaging Efficiency - Hospital
Outpatient Imaging Efficiency - National
Outpatient Imaging Efficiency - State
Payment - National
Payment and value of care - Hospital
Timely and Effective Care - Hospital
Timely and Effective Care - National
Timely and Effective Care - State
Unplanned Hospital Visits - Hospital
Unplanned Hospital Visits - National
Unplanned Hospital Visits - State
Veterans Health Administration Behavioral Health Data
Veterans Health Administration Timely and Effective Care Data
Value of care - National
Veterans Health Administration Provider Level Data
Data Updates
Inpatient Rehabilitation Facility - General Information
Inpatient Rehabilitation Facility - Provider Data
Inpatient Rehabilitation Facility - Conditions
Long-Term Care Hospital - General Information
Long-Term Care Hospital - Provider Data
Fire Safety Deficiencies
Health Deficiencies
MDS Quality Measures
Medicare Claims Quality Measures
Ownership
Penalties
Provider Information
Skilled Nursing Facility Quality Reporting Program - Provider Data
Skilled Nursing Facility Quality Reporting Program - Swing Beds - Provider Data
State US Averages
Survey Summary
FY 2025 SNF VBP Facility-Level Dataset
FY 2025 SNF VBP Aggregate Performance
Nursing Home Data Collection Intervals
Citation Code Look-up
National Downloadable File
PY 2022 Group Public Reporting: MIPS Measures and Attestations
PY 2022 Group Public Reporting: Patient Experience
PY 2022 Clinician Public Reporting: MIPS Measures and Attestations
PY 2022 Clinician Public Reporting: Overall MIPS Performance
Inspection Dates
State-Level Health Inspection Cut Points
Home Health Care - Patient Survey (HHCAHPS) 2023Q2 to 2024Q1
Home Health Care - Patient Survey (HHCAHPS) National Data 2023Q2 to 2024Q1
Home Health Care - Patient Survey (HHCAHPS) State Data 2023Q2 to 2024Q1
Home Health Care - Patient Survey (HHCAHPS) Measure Dates 2023Q2 to 2024Q1
Addiction Medicine Office Visit Costs
Advanced Heart Failure and Transplant Cardiology Office Visit Costs
Allergy/ Immunology Office Visit Costs
Anesthesiology Office Visit Costs
Cardiac Surgery Office Visit Costs
Cardiology Office Visit Costs
Certified Clinical Nurse Specialist Office Visit Costs
Certified Nurse Midwife Office Visit Costs
Certified Registered Nurse Anesthetist (CRNA) Office Visit Costs
Clinic or Group Practice Office Visit Costs
Clinical Cardiac Electrophysiology Office Visit Costs
Clinical Laboratory Office Visit Costs
Colorectal Surgery (Proctology) Office Visit Costs
Critical Care (Intensivists) Office Visit Costs
Dentist Office Visit Costs
Dermatology Office Visit Costs
Diagnostic Radiology Office Visit Costs
Emergency Medicine Office Visit Costs
Endocrinology Office Visit Costs
Family Practice Office Visit Costs
Gastroenterology Office Visit Costs
General Practice Office Visit Costs
General Surgery Office Visit Costs
Geriatric Medicine Office Visit Costs
Geriatric Psychiatry Office Visit Costs
Gynecological Oncology Office Visit Costs
Hand Surgery Office Visit Costs
Hematology Office Visit Costs
Hematology-Oncology Office Visit Costs
Hematopoietic Cell Transplantation and Cellular Therapy Office Visit Costs
Hospice and Palliative Care Office Visit Costs
Hospitalist Office Visit Costs
Infectious Disease Office Visit Costs
Internal Medicine Office Visit Costs
Interventional Cardiology Office Visit Costs
Interventional Pain Management Office Visit Costs
Interventional Radiology Office Visit Costs
Maxillofacial Surgery Office Visit Costs
Medical Oncology Office Visit Costs
Medical Toxicology Office Visit Costs
Nephrology Office Visit Costs
Neurology Office Visit Costs
Neuropsychiatry Office Visit Costs
Neurosurgery Office Visit Costs
Nuclear Medicine Office Visit Costs
Nurse Practitioner Office Visit Costs
Obstetrics &amp; Gynecology Office Visit Costs
Ophthalmology Office Visit Costs
Optometry Office Visit Costs
Oral Surgery (Dentist only) Office Visit Costs
Orthopedic Surgery Office Visit Costs
Osteopathic Manipulative Medicine Office Visit Costs
Otolaryngology Office Visit Costs
Pain Management Office Visit Costs
Pathology Office Visit Costs
Pediatric Medicine Office Visit Costs
Peripheral Vascular Disease Office Visit Costs
Physical Medicine and Rehabilitation Office Visit Costs
Physical Therapist in Private Practice Office Visit Costs
Physician Assistant Office Visit Costs
Plastic and Reconstructive Surgery Office Visit Costs
Podiatry Office Visit Costs
Preventive Medicine Office Visit Costs
Psychiatry Office Visit Costs
Psychologist, Clinical Office Visit Costs
Public Health or Welfare Agency Office Visit Costs
Pulmonary Disease Office Visit Costs
Radiation Oncology Office Visit Costs
Registered Dietitian or Nutrition Professional Office Visit Costs
Rheumatology Office Visit Costs
Sleep Medicine Office Visit Costs
Sports Medicine Office Visit Costs
Surgical Oncology Office Visit Costs
Thoracic Surgery Office Visit Costs
Undefined Physician type Office Visit Costs
Undersea and Hyperbaric Medicine Office Visit Costs
Urology Office Visit Costs
Vascular Surgery Office Visit Costs
PY 2022 Virtual Group Public Reporting: MIPS Measures and Attestations
COVID-19 Vaccination Rates - Provider Data
COVID-19 Vaccination Rates - State and National Averages
Hospice care - State CAHPS Hospice Survey Data
Hospice - State Data
Licensed Clinical Social Worker Office Visit Costs
Medical Genetics and Genomics Office Visit Costs
Home Health Care - State by State Data
Home Health Care - Measure Date Range
Payment - State
Maternal Health - Hospital
Maternal Health - National
Maternal Health - State
Medical Equipment Suppliers
Inpatient Rehabilitation Facility - National Data
Long-Term Care Hospital - National Data
Skilled Nursing Facility Quality Reporting Program - National Data
Patient survey (ICH CAHPS) - State
Hospice-National Data
Facility Affiliation Data
Utilization Data
ESRD QIP - Clinical Depression Screening and Follow-up - Payment Year 2024
ESRD QIP - Complete QIP Data - Payment Year 2024
ESRD QIP - Dialysis Adequacy - Payment Year 2024
ESRD QIP - Footnotes - Payment Year 2024
ESRD QIP - Hypercalcemia - Payment Year 2024
ESRD QIP - NHSN Dialysis Event Measure - Payment Year 2024
ESRD QIP - NHSN Bloodstream Infection - Payment Year 2024
ESRD QIP - Standardized Readmission Ratio - Payment Year 2024
ESRD QIP - Standardized Transfusion Ratio - Payment Year 2024
ESRD QIP - Total Performance Scores - Payment Year 2024
ESRD QIP - Vascular Access Topic - Payment Year 2024
ESRD QIP - Ultrafiltration Rate - Payment Year 2024
ESRD QIP - Standardized Hospitalization Ratio - Payment Year 2024
ESRD QIP - Medication Reconciliation - Payment Year 2024
ESRD QIP - Percentage of Prevalent Patients Waitlisted - Payment Year 2024
Patient-Reported Outcomes - Hospital
Palliative Care - PPS-Exempt Cancer Hospital - Hospital
Palliative Care - PPS-Exempt Cancer Hospital - National
Audiologist Office Visit Costs
Mass Immunizer Roster Biller Office Visit Costs
Micrographic Dermatologic Surgery Office Visit Costs
Opioid Treatment Program Office Visit Costs
Pharmacy Office Visit Costs
Health Equity - Hospital
Health Equity - State
Health Equity - National</code></pre>
</div>
</div>
</section>
<section id="national-downloadable-file" class="level2" data-number="5.10">
<h2 data-number="5.10" class="anchored" data-anchor-id="national-downloadable-file"><span class="header-section-number">5.10</span> National Downloadable File</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>meta_ndf <span class="ot">&lt;-</span> \(fname) {</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stopifnot</span>(curl<span class="sc">::</span><span class="fu">has_internet</span>())</span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  x <span class="ot">&lt;-</span> <span class="fu">request</span>(</span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"https://data.cms.gov/"</span>,</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>      <span class="st">"provider-data/api/1/"</span>,</span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>      <span class="st">"metastore/schemas/"</span>,</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>      <span class="st">"dataset/items/"</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>      <span class="cf">switch</span>(fname, </span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>             <span class="at">affiliations =</span> <span class="st">"27ea-46a8"</span>, </span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>             <span class="at">clinicians   =</span> <span class="st">"mj5m-pzi6"</span>, </span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>             <span class="fu">stop</span>(<span class="st">"Invalid argument"</span>)),</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"?show-reference-ids=true"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>       <span class="fu">req_perform</span>() <span class="sc">|&gt;</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>       <span class="fu">resp_body_json</span>(</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">check_type     =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  distro <span class="ot">&lt;-</span> <span class="fu">gelm</span>(<span class="fu">gelm</span>(x, <span class="st">"distribution"</span>), <span class="st">"identifier"</span>)</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  y <span class="ot">&lt;-</span> <span class="fu">request</span>(</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste0</span>(</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://data.cms.gov/"</span>, </span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="st">"provider-data/api/1/"</span>,</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>    <span class="st">"datastore/query/"</span>, </span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>    distro, </span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>    <span class="st">"?limit=1&amp;offset=100&amp;"</span>,</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">"count=true&amp;results=true&amp;"</span>, </span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>    <span class="st">"schema=true&amp;keys=true&amp;"</span>,</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>    <span class="st">"format=json&amp;rowIds=true"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>       <span class="fu">req_perform</span>() <span class="sc">|&gt;</span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a>       <span class="fu">resp_body_json</span>(</span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>         <span class="at">check_type =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>         <span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>  z <span class="ot">&lt;-</span> <span class="fu">gelm</span>(<span class="fu">gelm</span>(<span class="fu">gelm</span>(y, <span class="st">"schema"</span>), distro), <span class="st">"fields"</span>)</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list</span>(</span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">title        =</span> <span class="fu">gelm</span>(x, <span class="st">"title"</span>),</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">description  =</span> <span class="fu">gelm</span>(x, <span class="st">"description"</span>),</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">identifier   =</span> <span class="fu">gelm</span>(<span class="fu">gelm</span>(x, <span class="st">"identifier"</span>), <span class="st">"identifier"</span>),</span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">distribution =</span> distro,</span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">issued       =</span> <span class="fu">gelm</span>(x, <span class="st">"issued"</span>), </span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">modified     =</span> <span class="fu">gelm</span>(x, <span class="st">"modified"</span>)[[<span class="dv">1</span>]], </span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">released     =</span> <span class="fu">gelm</span>(x, <span class="st">"released"</span>),</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">dimensions   =</span> <span class="fu">paste0</span>(<span class="fu">gelm</span>(<span class="fu">gelm</span>(y, <span class="st">"count"</span>), is.numeric), <span class="st">" x "</span>, <span class="fu">gelm</span>(<span class="fu">gelm</span>(z, <span class="st">"record_number"</span>), <span class="st">"length"</span>)), </span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">fields       =</span> <span class="fu">names</span>(z),</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>    <span class="at">site         =</span> <span class="fu">gelm</span>(x, <span class="st">"landingPage"</span>),</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">csv          =</span> <span class="fu">gelm</span>(<span class="fu">gelm</span>(<span class="fu">gelm</span>(x, <span class="st">"distribution"</span>), <span class="st">"data"</span>), <span class="st">"downloadURL"</span>, <span class="at">m =</span> <span class="st">"df"</span>),</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">dictionary   =</span> <span class="fu">paste0</span>(<span class="st">"https://data.cms.gov/provider-data/sites/default/files/data_dictionaries/physician/DOC_Data_Dictionary.pdf"</span>))</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="examples" class="level3" data-number="5.10.1">
<h3 data-number="5.10.1" class="anchored" data-anchor-id="examples"><span class="header-section-number">5.10.1</span> Examples</h3>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="fu">meta_ndf</span>(<span class="st">"affiliations"</span>) <span class="sc">|&gt;</span> <span class="fu">purse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $title        c1  Facility Affiliation Data
- $description  c1  This is the facility affiliations data publicly reporte ...
- $identifier   c1  27ea-46a8
- $distribution c1  c0bada3c-9379-5a16-99ec-868e930451d6
- $issued       c1  2023-08-17
- $modified     c1  2024-12-02
- $released     c1  2024-12-12
- $dimensions   c1  1561449 x 10
- $fields       c10 record_number npi ind_pac_id provider_last_name provide ...
- $site         c1  https://data.cms.gov/provider-data/dataset/27ea-46a8
- $csv          c1  https://data.cms.gov/provider-data/sites/default/files/ ...
- $dictionary   c1  https://data.cms.gov/provider-data/sites/default/files/ ...</code></pre>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">meta_ndf</span>(<span class="st">"clinicians"</span>) <span class="sc">|&gt;</span> <span class="fu">purse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $title        c1  National Downloadable File
- $description  c1  The Doctors and Clinicians national downloadable file i ...
- $identifier   c1  mj5m-pzi6
- $distribution c1  21902f69-cf10-57df-b859-94bb4c92e05d
- $issued       c1  2023-08-17
- $modified     c1  2024-12-02
- $released     c1  2024-12-12
- $dimensions   c1  2595328 x 10
- $fields       c32 record_number npi ind_pac_id ind_enrl_id provider_last_ ...
- $site         c1  https://data.cms.gov/provider-data/dataset/mj5m-pzi6
- $csv          c1  https://data.cms.gov/provider-data/sites/default/files/ ...
- $dictionary   c1  https://data.cms.gov/provider-data/sites/default/files/ ...</code></pre>
</div>
</div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/andrewallenbruce\.github\.io\/providerdev\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./data_main.html" class="pagination-link" aria-label="Main">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Main</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./data_openpayments.html" class="pagination-link" aria-label="Open Payments">
        <span class="nav-page-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Open Payments</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/andrewallenbruce/providerdev/blob/main/data_provider.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div></div></footer><script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>