<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.7.5">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="description" content="This is a personal, informal guide to rewriting an R package that I wrote from the ground up. It is a work in progress and will be updated as I learn more about the process.">

<title>1&nbsp; API FAQ – Refactoring Provider</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./schema.html" rel="next">
<link href="./overview.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting-1b73d27e55c73277398f79acb0ed0396.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap-9c8c86a1b03def43e6e446c2d1679bd1.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<style>html{ scroll-behavior: smooth; }</style>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./faq.html">APIs</a></li><li class="breadcrumb-item"><a href="./faq.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">API FAQ</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Refactoring Provider</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/andrewallenbruce/providerdev" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
    <div class="dropdown">
      <a href="" title="Share" id="quarto-navigation-tool-dropdown-0" class="quarto-navigation-tool dropdown-toggle px-1" data-bs-toggle="dropdown" aria-expanded="false" role="link" aria-label="Share"><i class="bi bi-share"></i></a>
      <ul class="dropdown-menu" aria-labelledby="quarto-navigation-tool-dropdown-0">
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://twitter.com/intent/tweet?url=|url|">
              <i class="bi bi-twitter pe-1"></i>
            Twitter
            </a>
          </li>
          <li>
            <a class="dropdown-item sidebar-tools-main-item" href="https://www.linkedin.com/sharing/share-offsite/?url=|url|">
              <i class="bi bi-linkedin pe-1"></i>
            LinkedIn
            </a>
          </li>
      </ul>
    </div>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./overview.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Overview</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text">APIs</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./faq.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">API FAQ</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./schema.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Schema</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./ndf.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">NDF</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Tidy</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text">Core</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./affiliations.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Affiliations</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Classification</span></span>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <span class="sidebar-item-text sidebar-link text-start">
 <span class="menu-text">Reporting</span></span>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#whats-new" id="toc-whats-new" class="nav-link active" data-scroll-target="#whats-new"><span class="header-section-number">1.1</span> What’s new</a></li>
  <li><a href="#api-integrations" id="toc-api-integrations" class="nav-link" data-scroll-target="#api-integrations"><span class="header-section-number">1.2</span> API integrations</a>
  <ul class="collapse">
  <li><a href="#filter-examples" id="toc-filter-examples" class="nav-link" data-scroll-target="#filter-examples"><span class="header-section-number">1.2.1</span> Filter Examples</a></li>
  </ul></li>
  <li><a href="#data-catalog-api" id="toc-data-catalog-api" class="nav-link" data-scroll-target="#data-catalog-api"><span class="header-section-number">2</span> Data Catalog API</a>
  <ul class="collapse">
  <li><a href="#formats" id="toc-formats" class="nav-link" data-scroll-target="#formats"><span class="header-section-number">2.1</span> Formats</a></li>
  <li><a href="#temporal-data" id="toc-temporal-data" class="nav-link" data-scroll-target="#temporal-data"><span class="header-section-number">2.2</span> Temporal Data</a></li>
  <li><a href="#methods-same-data-different-output" id="toc-methods-same-data-different-output" class="nav-link" data-scroll-target="#methods-same-data-different-output"><span class="header-section-number">2.3</span> Methods: Same Data, Different Output</a>
  <ul class="collapse">
  <li><a href="#method-1-standard-json" id="toc-method-1-standard-json" class="nav-link" data-scroll-target="#method-1-standard-json"><span class="header-section-number">2.3.1</span> Method 1: Standard JSON</a></li>
  <li><a href="#method-2-jsonapi" id="toc-method-2-jsonapi" class="nav-link" data-scroll-target="#method-2-jsonapi"><span class="header-section-number">2.3.2</span> Method 2: JSON:API</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#pagination" id="toc-pagination" class="nav-link" data-scroll-target="#pagination"><span class="header-section-number">3</span> Pagination</a>
  <ul class="collapse">
  <li><a href="#pagination-example" id="toc-pagination-example" class="nav-link" data-scroll-target="#pagination-example"><span class="header-section-number">3.1</span> Pagination Example</a></li>
  <li><a href="#find-the-number-of-rows" id="toc-find-the-number-of-rows" class="nav-link" data-scroll-target="#find-the-number-of-rows"><span class="header-section-number">3.2</span> Find the Number of Rows</a></li>
  </ul></li>
  <li><a href="#download-csvzip-versions" id="toc-download-csvzip-versions" class="nav-link" data-scroll-target="#download-csvzip-versions"><span class="header-section-number">4</span> Download CSV/ZIP versions</a>
  <ul class="collapse">
  <li><a href="#csv-example" id="toc-csv-example" class="nav-link" data-scroll-target="#csv-example"><span class="header-section-number">4.1</span> CSV Example</a></li>
  <li><a href="#zip-example" id="toc-zip-example" class="nav-link" data-scroll-target="#zip-example"><span class="header-section-number">4.2</span> ZIP Example</a></li>
  </ul></li>
  <li><a href="#additional-resources" id="toc-additional-resources" class="nav-link" data-scroll-target="#additional-resources"><span class="header-section-number">5</span> Additional Resources</a>
  <ul class="collapse">
  <li><a href="#resource-example" id="toc-resource-example" class="nav-link" data-scroll-target="#resource-example"><span class="header-section-number">5.1</span> Resource Example</a></li>
  </ul></li>
  <li><a href="#filtering-and-manipulating-data" id="toc-filtering-and-manipulating-data" class="nav-link" data-scroll-target="#filtering-and-manipulating-data"><span class="header-section-number">6</span> Filtering and Manipulating Data</a>
  <ul class="collapse">
  <li><a href="#schema" id="toc-schema" class="nav-link" data-scroll-target="#schema"><span class="header-section-number">6.1</span> Schema</a></li>
  </ul></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/andrewallenbruce/providerdev/edit/main/faq.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/andrewallenbruce/providerdev/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/andrewallenbruce/providerdev/blob/main/faq.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div><div class="quarto-code-links"><h2>Code Links</h2><ul><li><a href="https://github.com/andrewallenbruce/provider"><i class="bi bi-file-code"></i>Provider repo</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./faq.html">APIs</a></li><li class="breadcrumb-item"><a href="./faq.html"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">API FAQ</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">API FAQ</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<div class="cell">
<div class="cell-output-display">
<a href="https://data.cms.gov/api-docs" class="btn btn-outline-secondary" role="button" target="_blank">
<i class="bi bi-box-arrow-up-right"></i>
CMS API Docs
</a>
<a href="https://data.cms.gov/sites/default/files/2024-10/7ef65521-65a4-41ed-b600-3a0011f8ec4b/API%20Guide%20Formatted%201_6.pdf" class="btn btn-outline-secondary" role="button" target="_blank">
<i class="bi bi-box-arrow-up-right"></i>
API FAQ
</a>
</div>
</div>
<blockquote class="blockquote">
<p>Working through the updated <a href="https://data.cms.gov/sites/default/files/2024-10/7ef65521-65a4-41ed-b600-3a0011f8ec4b/API%20Guide%20Formatted%201_6.pdf">API FAQ</a> <em>(Oct 2024 - v1.6)</em> for <a href="https://data.cms.gov/api-docs">data.CMS.gov</a>, extracting the relevant information</p>
</blockquote>
<p>The Application Programming Interface (API) offers access to the Centers for Medicare &amp; Medicaid Services public data allowing you to interactively analyze our datasets in real-time. Our APIs are organized around REST and have predictable resource-oriented URLs, accept form-encoded requests and returns JSON &amp; JSON:API encoded responses and uses standard HTTP response codes.</p>
<section id="whats-new" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="whats-new"><span class="header-section-number">1.1</span> What’s new</h2>
<p>Resources, which are supplemental documents to the main dataset, are now available for programmatic download in the API. Through our Public API Open Data Catalog, you can find direct download links for resources such as sub-files, tables, supplementary data, reports, and documentation. The new endpoints can be accessed using the ‘resourcesAPI’ field. For more details on the data catalog and code examples, download our API FAQ document.</p>
</section>
<section id="api-integrations" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="api-integrations"><span class="header-section-number">1.2</span> API integrations</h2>
<p>To integrate endpoint requests with the data.cms.gov Public API, follow these steps:</p>
<ol type="1">
<li>Find Dataset &amp; Identifier:
<ul>
<li><a href="https://data.cms.gov/search">Search for dataset</a> and visit its <strong>overview</strong> page.</li>
<li>Click on <strong>Access API</strong>, then <strong>API Docs for the Dataset</strong>.</li>
</ul></li>
<li>Integrate Dataset Endpoint Paths:
<ul>
<li>Endpoint structure: <code>data.cms.gov/data-api/v1/dataset/{{dataset_id}}/data</code></li>
</ul></li>
<li>Integrate your API Endpoint Requests
<ul>
<li>System uses <strong>JSONAPI</strong> query syntax.</li>
<li>Most common: Key-value filter (<code>?filter[field_name]=value&amp;filter[field_other]=value</code>)</li>
<li>Responses are paged and support a max page size of 5000 rows.</li>
<li>Use the size &amp; offset query parameters to page through the data</li>
</ul></li>
</ol>
<section id="filter-examples" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="filter-examples"><span class="header-section-number">1.2.1</span> Filter Examples</h3>
<p><strong>Exact Match Search on Column:</strong> * <dataset> <code>"Medicare Fee-For-Service Public Provider Enrollment"</code> * <column> <code>PROVIDER_TYPE_DESC</code> == <code>"PRACTITIONER-GENERAL PRACTICE"</code> * REQUEST: <code>/data?</code> * <code>filter[PROVIDER_TYPE_DESC]=PRACTITIONER%20-%20GENERAL%20PRACTICE</code></column></dataset></p>
<p><strong>Contains Search on Column:</strong> * <dataset> Medicare Fee-For-Service Public Provider Enrollment Dataset * <column> <code>PROVIDER_TYPE_DESC</code> * <contains> all rows that contain <code>SUPPLIER</code> * REQUEST: <code>/data?</code> * <code>filter[example][condition][path]=PROVIDER_TYPE_DESC&amp;</code> * <code>filter[example][condition][operator]=CONTAINS&amp;</code> * <code>filter[example][condition][value]=SUPPLIER</code></contains></column></dataset></p>
<p><strong>Combination search on 2 columns:</strong> * <dataset> <code>"Medicare Fee-For-Service Public Provider Enrollment"</code> * <column> <code>PROVIDER_TYPE_DESC</code> * <contains> all rows that contain <code>PRACTITIONER</code> * <column> <code>STATE_CD</code> == <code>"MD"</code> * REQUEST: <code>/data?</code> * <code>filter[filter-1][condition][path]=PROVIDER_TYPE_DESC&amp;</code> * <code>filter[filter-1][condition][operator]=CONTAINS&amp;</code> * <code>filter[filter-1][condition][value]=PRACTITIONER&amp;</code> * <code>filter[filter-2][condition][path]=STATE_CD&amp;</code> * <code>filter[filter-2][condition][operator]==&amp;</code> * <code>filter[filter-2][condition][value]=MD</code></column></contains></column></dataset></p>
<p><a href="https://www.drupal.org/docs/core-modules-and-themes/core-modules/jsonapi-module/filtering">Refer to the Drupal documentation</a> for more information on filtering API requests.</p>
<hr>
</section>
</section>
<section id="data-catalog-api" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Data Catalog API</h1>
<p>The <a href="https://data.cms.gov/data.json"><code>data.json</code></a> file is an <a href="https://resources.data.gov/resources/dcat-us/"><strong>Open Data</strong></a> catalog containing all available datasets. As new data is added, <code>data.json</code> is automatically updated.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>data_json <span class="ot">&lt;-</span> <span class="fu">read_json_arrow</span>(</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="st">"https://data.cms.gov/data.json"</span>,</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_select =</span> <span class="fu">c</span>(<span class="st">"dataset"</span>),</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">as_data_frame =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_duckdb</span>()</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>data_json <span class="sc">|&gt;</span> </span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Rows: ??
Columns: 1
Database: DuckDB v1.1.3 [Andrew@Windows 10 x64:R 4.4.2/:memory:]
$ dataset &lt;list&gt; [&lt;data.frame[139 x 22]&gt;]</code></pre>
</div>
</div>
<blockquote class="blockquote">
<p><strong>Note:</strong> Removing <code>col_select = c("dataset")</code> from the above call returns the following metadata:</p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="cell-output cell-output-stdout">
<pre><code>@context    &lt;chr&gt; https://project-open-data.cio.gov/v1.1/schema/catalog.jsonld
@id         &lt;chr&gt; https://data.cms.gov/data.json
@type       &lt;chr&gt; dcat:Catalog
conformsTo  &lt;chr&gt; https://project-open-data.cio.gov/v1.1/schema
describedBy &lt;chr&gt; https://project-open-data.cio.gov/v1.1/schema/catalog.json
dataset     &lt;list&gt; [&lt;data.frame[138 x 22]&gt;]</code></pre>
</div>
</div>
<p>Within <code>data.json</code>, there is an array called <code>dataset</code>. One can search through this array using the dataset’s <code>title</code>, such as <code>"Payroll Based Journal Daily Nurse Staffing"</code>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data_json <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(dataset) <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Payroll Based Journal Daily Nurse Staffing"</span>, </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>      title)) <span class="sc">|&gt;</span> </span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">bureauCode =</span> <span class="fu">delist</span>(bureauCode),</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">keyword =</span> <span class="fu">map_chr</span>(</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>      keyword, </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>      \(x) <span class="fu">paste0</span>(</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>        <span class="fu">delist</span>(x), </span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">collapse =</span> <span class="st">", "</span>)),</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">language =</span> <span class="fu">delist</span>(language),</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">programCode =</span> <span class="fu">delist</span>(programCode),</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">references =</span> <span class="fu">delist</span>(references),</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">theme =</span> <span class="fu">delist</span>(theme)) <span class="sc">|&gt;</span> </span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(contactPoint, <span class="at">names_sep =</span> <span class="st">"_"</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(publisher, <span class="at">names_sep =</span> <span class="st">"_"</span>) <span class="sc">|&gt;</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">terse</span>(<span class="at">width =</span> <span class="dv">110</span>, <span class="at">prefix =</span> <span class="st">"- "</span>, <span class="at">config =</span> <span class="fu">list</span>(<span class="at">ansi =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $@type                 c1 dcat:Dataset                                                                  ...
- $accessLevel           c1 public                                                                        ...
- $accrualPeriodicity    c1 R/P3M                                                                         ...
- $bureauCode            c1 009:38                                                                        ...
- $contactPoint_@type    c1 vcard:Contact                                                                 ...
- $contactPoint_fn       c1 Nursing Home Staffing - CCSQ (PBJ Reports)                                    ...
- $contactPoint_hasEmail c1 mailto:nhstaffing@cms.hhs.gov                                                 ...
- $describedBy           c1 https://data.cms.gov/resources/payroll-based-journal-daily-nurse-staffing-dat ...
- $dataQuality           l1 T                                                                             ...
- $description           c1 The Payroll Based Journal (PBJ) Nurse Staffing and Non-Nurse Staffing dataset ...
- $distribution          L1 list(structure(list("@type" = c("dcat:Distribution", "dcat:Distribution", "dc ...
- $identifier            c1 https://data.cms.gov/data-api/v1/dataset/7e0d53ba-8f02-4c66-98a5-14a1c997c50d ...
- $keyword               c1 Medicare, Original Medicare, Hospitals &amp; Facilities, Skilled Nursing, Health  ...
- $landingPage           c1 https://data.cms.gov/quality-of-care/payroll-based-journal-daily-nurse-staffi ...
- $language              c1 en-US                                                                         ...
- $license               c1 https://www.usa.gov/government-works                                          ...
- $modified              p1 2024-10-31                                                                    ...
- $programCode           c1 009:000                                                                       ...
- $publisher_@type       c1 org:Organization                                                              ...
- $publisher_name        c1 Centers for Medicare &amp; Medicaid Services                                      ...
- $references            c1 https://data.cms.gov/resources/payroll-based-journal-methodology-0            ...
- $temporal              c1 2017-01-01/2024-06-30                                                         ...
- $theme                 c1 Medicare                                                                      ...
- $title                 c1 Payroll Based Journal Daily Nurse Staffing                                    ...
- $describedByType       c1 NA                                                                            ...</code></pre>
</div>
</div>
<p>Within <code>dataset</code>, there is an array called <code>distribution</code> which contains all dataset versions, in all available formats:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>distribution <span class="ot">&lt;-</span> data_json <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(dataset) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(distribution) <span class="sc">|&gt;</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest</span>(distribution)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>distribution</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3,897 × 10
   `@type`   format accessURL resourcesAPI description title modified           
   &lt;chr&gt;     &lt;chr&gt;  &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;       &lt;chr&gt; &lt;dttm&gt;             
 1 dcat:Dis… API    https://… https://dat… latest      Acco… 2024-01-29 00:00:00
 2 dcat:Dis… &lt;NA&gt;   &lt;NA&gt;      https://dat… &lt;NA&gt;        Acco… 2024-01-29 00:00:00
 3 dcat:Dis… API    https://… https://dat… &lt;NA&gt;        Acco… 2024-01-29 00:00:00
 4 dcat:Dis… &lt;NA&gt;   &lt;NA&gt;      https://dat… &lt;NA&gt;        Acco… 2023-03-06 00:00:00
 5 dcat:Dis… API    https://… https://dat… &lt;NA&gt;        Acco… 2023-03-06 00:00:00
 6 dcat:Dis… &lt;NA&gt;   &lt;NA&gt;      https://dat… &lt;NA&gt;        Acco… 2022-01-26 00:00:00
 7 dcat:Dis… API    https://… https://dat… &lt;NA&gt;        Acco… 2022-01-26 00:00:00
 8 dcat:Dis… &lt;NA&gt;   &lt;NA&gt;      https://dat… &lt;NA&gt;        Acco… 2022-01-27 00:00:00
 9 dcat:Dis… API    https://… https://dat… &lt;NA&gt;        Acco… 2022-01-27 00:00:00
10 dcat:Dis… &lt;NA&gt;   &lt;NA&gt;      https://dat… &lt;NA&gt;        Acco… 2022-01-27 00:00:00
# ℹ 3,887 more rows
# ℹ 3 more variables: temporal &lt;chr&gt;, downloadURL &lt;chr&gt;, mediaType &lt;chr&gt;</code></pre>
</div>
</div>
<section id="formats" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="formats"><span class="header-section-number">2.1</span> Formats</h2>
<ul>
<li><strong>description</strong> <code>"latest"</code> is a URL that always point to the latest data</li>
<li><strong>mediaType</strong> <code>"text/csv"</code> is a downloadable CSV file</li>
<li><strong>mediaType</strong> <code>"application/zip"</code> is a downloadable ZIP file</li>
<li><strong>format</strong> <code>"API"</code> is an API endpoint</li>
<li>Remaining entries provide references to the data at fixed points in time, listed in descending order by date.</li>
</ul>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>distribution <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(description, </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>        format, </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>        mediaType) <span class="sc">|&gt;</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_emphatic</span>() <span class="sc">|&gt;</span> </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hl</span>(ggplot2<span class="sc">::</span><span class="fu">scale_colour_viridis_c</span>(), <span class="at">cols =</span> <span class="st">"n"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">hl_adjust</span>(<span class="at">text_contrast =</span> <span class="fl">0.5</span>, <span class="at">na =</span> <span class="st">"-"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<pre style=""><span style="text-decoration:underline;">    description format                mediaType    n</span><br>1  <span style="color:#808080;"><span>      latest</span></span><span style="color:#808080;"><span>    API</span></span><span style="color:#808080;"><span>                        -</span></span><span style="color:#a38db1;"><span style="background-color:#461a62;">  112</span></span><br>2  <span style="color:#808080;"><span>           -</span></span><span style="color:#808080;"><span>    API</span></span><span style="color:#808080;"><span>                        -</span></span><span style="color:#7f7413;"><span style="background-color:#fde725;"> 1626</span></span><br>3  <span style="color:#808080;"><span>           -</span></span><span style="color:#808080;"><span>      -</span></span><span style="color:#808080;"><span> application/vnd.ms-excel</span></span><span style="color:#a280aa;"><span style="background-color:#440154;">   21</span></span><br>4  <span style="color:#808080;"><span>           -</span></span><span style="color:#808080;"><span>      -</span></span><span style="color:#808080;"><span>          application/zip</span></span><span style="color:#9cb1c5;"><span style="background-color:#39638b;">  534</span></span><br>5  <span style="color:#808080;"><span>           -</span></span><span style="color:#808080;"><span>      -</span></span><span style="color:#808080;"><span>                 text/csv</span></span><span style="color:#7b7315;"><span style="background-color:#f5e62a;"> 1604</span></span><br>
</pre>
</div>
</div>
<p>For example, the URL in the following example will <em>always</em> point to the <strong>Payroll Based Journal Daily Nurse Staffing</strong> data from <strong>Q2 2021</strong>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># "https://data.cms.gov/data-api/v1/dataset/d10d792e-ea6e-4145-8512-34efbc1be04b/data"</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>staffing <span class="ot">&lt;-</span> distribution <span class="sc">|&gt;</span> </span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">"Payroll Based Journal Daily Nurse Staffing"</span>, title),</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    format <span class="sc">==</span> <span class="st">"API"</span>,</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">"^2021-04"</span>, temporal)) <span class="sc">|&gt;</span> </span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(accessURL) <span class="sc">|&gt;</span> </span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">request</span>() <span class="sc">|&gt;</span> </span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> </span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">resp_body_json</span>(<span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(staffing, <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">terse</span>(<span class="at">width =</span> <span class="dv">110</span>, </span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>        <span class="at">prefix =</span> <span class="st">"- "</span>, </span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>        <span class="at">config =</span> <span class="fu">list</span>(<span class="at">ansi =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $PROVNUM          c1 015010                        
- $PROVNAME         c1 COOSA VALLEY HEALTHCARE CENTER
- $CITY             c1 SYLACAUGA                     
- $STATE            c1 AL                            
- $COUNTY_NAME      c1 Talladega                     
- $COUNTY_FIPS      c1 121                           
- $CY_Qtr           c1 2021Q2                        
- $WorkDate         c1 20210401                      
- $MDScensus        c1 70                            
- $Hrs_RNDON        c1 8                             
- $Hrs_RNDON_emp    c1 8                             
- $Hrs_RNDON_ctr    c1 0                             
- $Hrs_RNadmin      c1 48.25                         
- $Hrs_RNadmin_emp  c1 48.25                         
- $Hrs_RNadmin_ctr  c1 0                             
- $Hrs_RN           c1 32                            
- $Hrs_RN_emp       c1 32                            
- $Hrs_RN_ctr       c1 0                             
- $Hrs_LPNadmin     c1 0                             
- $Hrs_LPNadmin_emp c1 0                             
- $Hrs_LPNadmin_ctr c1 0                             
- $Hrs_LPN          c1 63.25                         
- $Hrs_LPN_emp      c1 63.25                         
- $Hrs_LPN_ctr      c1 0                             
- $Hrs_CNA          c1 189.5                         
- $Hrs_CNA_emp      c1 189.5                         
- $Hrs_CNA_ctr      c1 0                             
- $Hrs_NAtrn        c1 0                             
- $Hrs_NAtrn_emp    c1 0                             
- $Hrs_NAtrn_ctr    c1 0                             
- $Hrs_MedAide      c1 0                             
- $Hrs_MedAide_emp  c1 0                             
- $Hrs_MedAide_ctr  c1 0                             </code></pre>
</div>
</div>
</section>
<section id="temporal-data" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="temporal-data"><span class="header-section-number">2.2</span> Temporal Data</h2>
<p>Datasets with multiple historical versions available will have a <code>temporal</code> field in the <code>distribution</code> array of the <code>data.json</code> file which will indicate the time period.</p>
<p><strong>Format</strong>: <code>yyyy-mm-dd/yyyy-mm-dd</code></p>
<p>The following example finds the API link for the <a href="https://data.cms.gov/provider-summary-by-type-of-service/medicare-inpatienthospitals/medicare-inpatient-hospitals-by-provider-and-service">2017 Medicare Inpatient Hospitals - by Provider and Service Data</a>:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>distribution <span class="sc">|&gt;</span> </span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">"Medicare Inpatient Hospitals - by Provider and Service"</span>, title), </span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    format <span class="sc">==</span> <span class="st">"API"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    temporal <span class="sc">==</span> <span class="st">"2017-01-01/2017-12-31"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">terse</span>(<span class="at">width =</span> <span class="dv">110</span>, </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>        <span class="at">prefix =</span> <span class="st">"- "</span>, </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">config =</span> <span class="fu">list</span>(<span class="at">ansi =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $@type        c1 dcat:Distribution                                                                      
- $format       c1 API                                                                                    
- $accessURL    c1 https://data.cms.gov/data-api/v1/dataset/b61ba5eb-021b-4510-947e-0f198982b0e8/data     
- $resourcesAPI c1 https://data.cms.gov/data-api/v1/dataset-resources/b61ba5eb-021b-4510-947e-0f198982b0e8
- $description  c1 NA                                                                                     
- $title        c1 Medicare Inpatient Hospitals - by Provider and Service : 2017-12-31                    
- $modified     p1 2023-05-10                                                                             
- $temporal     c1 2017-01-01/2017-12-31                                                                  
- $downloadURL  c1 NA                                                                                     
- $mediaType    c1 NA                                                                                     </code></pre>
</div>
</div>
</section>
<section id="methods-same-data-different-output" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="methods-same-data-different-output"><span class="header-section-number">2.3</span> Methods: Same Data, Different Output</h2>
<p>There are two methods of accessing the latest data.</p>
<p>Both result in a URL pointing to the most recent version of the dataset. This URL is canonical, i.e., will not change as new versions are added.</p>
<p>For this reason, it is <em>recommended to <strong>always</strong> start with the <strong><code>data.json</code> object</strong> as opposed to hardcoding any URL</em>.</p>
<section id="method-1-standard-json" class="level3" data-number="2.3.1">
<h3 data-number="2.3.1" class="anchored" data-anchor-id="method-1-standard-json"><span class="header-section-number">2.3.1</span> Method 1: Standard JSON</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>data_json<span class="sc">&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>    <span class="er">=&gt;</span> <span class="er">&lt;</span>dataset<span class="sc">&gt;</span> </span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>    <span class="er">=&gt;</span> <span class="er">&lt;</span>distribution<span class="sc">&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>    <span class="ot">-&gt;</span> <span class="er">$</span>(description <span class="sc">==</span> <span class="st">"latest"</span>)</span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    <span class="ot">-&gt;</span> <span class="er">$</span>(accessURL)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Use the <code>distribution</code> with the “latest” <code>description</code>. This URL returns <strong>standard JSON</strong>.</p>
<blockquote class="blockquote">
<p>For example, this URL for Opt Out Affidavits is <code>"https://data.cms.gov/dataapi/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data"</code></p>
</blockquote>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>json_standard <span class="ot">&lt;-</span> distribution <span class="sc">|&gt;</span> </span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">"Order and Referring"</span>, title),</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>    description <span class="sc">==</span> <span class="st">"latest"</span>)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>json_standard <span class="sc">|&gt;</span> </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">terse</span>(<span class="at">width =</span> <span class="dv">110</span>, </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>        <span class="at">prefix =</span> <span class="st">"- "</span>, </span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>        <span class="at">config =</span> <span class="fu">list</span>(<span class="at">ansi =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $@type        c1 dcat:Distribution                                                                      
- $format       c1 API                                                                                    
- $accessURL    c1 https://data.cms.gov/data-api/v1/dataset/c99b5865-1119-4436-bb80-c5af2773ea1f/data     
- $resourcesAPI c1 https://data.cms.gov/data-api/v1/dataset-resources/c99b5865-1119-4436-bb80-c5af2773ea1f
- $description  c1 latest                                                                                 
- $title        c1 Order and Referring : 2024-12-20                                                       
- $modified     p1 2024-12-20                                                                             
- $temporal     c1 2024-12-08/2024-12-14                                                                  
- $downloadURL  c1 NA                                                                                     
- $mediaType    c1 NA                                                                                     </code></pre>
</div>
</div>
</section>
<section id="method-2-jsonapi" class="level3" data-number="2.3.2">
<h3 data-number="2.3.2" class="anchored" data-anchor-id="method-2-jsonapi"><span class="header-section-number">2.3.2</span> Method 2: JSON:API</h3>
<div class="sourceCode" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>data_json<span class="sc">&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>    <span class="er">=&gt;</span> <span class="er">&lt;</span>dataset<span class="sc">&gt;</span> </span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>    <span class="ot">-&gt;</span> <span class="er">$</span>(title <span class="sc">==</span> <span class="st">"Order and Referring"</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>    <span class="ot">-&gt;</span> <span class="er">$</span>(identifier)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Use the URL in the <code>identifier</code> field.</p>
<p>This URL returns JSON in the <strong>JSON:API</strong> form. It has a different response structure that includes metadata about the dataset. Otherwise it is identical to Method 1.</p>
<blockquote class="blockquote">
<p>For example, this URL for Opt Out Affidavits: <code>"https://data.cms.gov/dataapi/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data-viewer"</code></p>
</blockquote>
<p>The following example finds the API link for the latest <a href="https://data.cms.gov/provider-characteristics/medicare-provider-supplierenrollment/order-and-referring">Order and Referring</a> Data:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>json_api <span class="ot">&lt;-</span> data_json <span class="sc">|&gt;</span> </span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(dataset) <span class="sc">|&gt;</span> </span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pluck</span>(<span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>      <span class="st">"Order and Referring"</span>, </span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>      title))</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>json_api <span class="sc">|&gt;</span> </span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">bureauCode =</span> <span class="fu">delist</span>(bureauCode),</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">keyword =</span> <span class="fu">map_chr</span>(</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>      keyword, </span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>      \(x) <span class="fu">paste0</span>(</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">delist</span>(x), </span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>        <span class="at">collapse =</span> <span class="st">", "</span>)),</span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">language =</span> <span class="fu">delist</span>(language),</span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">programCode =</span> <span class="fu">delist</span>(programCode),</span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">references =</span> <span class="fu">delist</span>(references),</span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">theme =</span> <span class="fu">delist</span>(theme)) <span class="sc">|&gt;</span> </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(contactPoint, <span class="at">names_sep =</span> <span class="st">"_"</span>) <span class="sc">|&gt;</span></span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unnest_wider</span>(publisher, <span class="at">names_sep =</span> <span class="st">"_"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">terse</span>(<span class="at">width =</span> <span class="dv">110</span>, </span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>        <span class="at">prefix =</span> <span class="st">"- "</span>, </span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a>        <span class="at">config =</span> <span class="fu">list</span>(<span class="at">ansi =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $@type                 c1 dcat:Dataset                                                                  ...
- $accessLevel           c1 public                                                                        ...
- $accrualPeriodicity    c1 R/P3.5D                                                                       ...
- $bureauCode            c1 009:38                                                                        ...
- $contactPoint_@type    c1 vcard:Contact                                                                 ...
- $contactPoint_fn       c1 Provider Enrollment Data Requests - CPI                                       ...
- $contactPoint_hasEmail c1 mailto:ProviderEnrollmentDataRequests@cms.hhs.gov                             ...
- $describedBy           c1 https://data.cms.gov/resources/order-and-referring-data-dictionary            ...
- $dataQuality           l1 T                                                                             ...
- $description           c1 The Order and Referring dataset provides information on all physicians and no ...
- $distribution          L1 list(structure(list("@type" = c("dcat:Distribution", "dcat:Distribution", "dc ...
- $identifier            c1 https://data.cms.gov/data-api/v1/dataset/c99b5865-1119-4436-bb80-c5af2773ea1f ...
- $keyword               c1 Medicare, Original Medicare, Provider Enrollment                              ...
- $landingPage           c1 https://data.cms.gov/provider-characteristics/medicare-provider-supplier-enro ...
- $language              c1 en-US                                                                         ...
- $license               c1 https://www.usa.gov/government-works                                          ...
- $modified              p1 2024-12-20                                                                    ...
- $programCode           c1 009:000                                                                       ...
- $publisher_@type       c1 org:Organization                                                              ...
- $publisher_name        c1 Centers for Medicare &amp; Medicaid Services                                      ...
- $references            c1 https://data.cms.gov/resources/order-and-referring-methodology                ...
- $temporal              c1 2023-05-21/2024-12-14                                                         ...
- $theme                 c1 Medicare                                                                      ...
- $title                 c1 Order and Referring                                                           ...
- $describedByType       c1 NA                                                                            ...</code></pre>
</div>
</div>
<hr>
</section>
</section>
</section>
<section id="pagination" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Pagination</h1>
<p>The default is to provide the first 1,000 rows per request. However, there is an ability to increase the limit to 5,000 rows per request. You can use pagination to retrieve the entire dataset.</p>
<p>For example, with our <a href="">Opt Out Affidavits</a> dataset:</p>
<ol type="1">
<li>Start with the following request to get the number of rows:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">request</span>(<span class="st">"https://data.cms.gov/data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data/stats"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> </span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">resp_body_json</span>(<span class="at">simplifyVector =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$found_rows
[1] 47984

$total_rows
[1] 47984</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Make a request for the <em>first</em> 5,000 rows:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">request</span>(<span class="st">"https://data.cms.gov/data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data?size=5000&amp;offset=0"</span>) <span class="sc">|&gt;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">resp_body_json</span>(<span class="at">simplifyVector =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">terse</span>(<span class="at">width =</span> <span class="dv">110</span>, <span class="at">prefix =</span> <span class="st">"- "</span>, <span class="at">config =</span> <span class="fu">list</span>(<span class="at">gsep =</span> <span class="st">""</span>, <span class="at">ansi =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $First Name                  c5000 Jonathan    Kevin              David             Bruce          Alan ...
- $Last Name                   c5000 Raines      Carlson            Altchek           Shapiro        Mcfa ...
- $NPI                         c5000 1720444581  1811981905         1114974490        1548271240     1861 ...
- $Specialty                   c5000 Psychiatry  Internal Medicine  Orthopedic SurgeryPsychiatry     Clin ...
- $Optout Effective Date       c5000 01/30/1998  07/01/2010         07/01/2012        12/28/2015     01/0 ...
- $Optout End Date             c5000 01/30/2026  07/01/2026         07/01/2026        12/28/2025     01/0 ...
- $First Line Street Address   c5000 1629 MONK RD10700 CHARTER DRIVE535 EAST 70TH ST  666 GLENBROK RD7330 ...
- $Second Line Street Address  c5000 P O BOX 470                                                     STE  ...
- $City Name                   c5000 GLADWYNE    COLUMBIA           NEW YORK          STAMFORD       ANNA ...
- $State Code                  c5000 PA          MD                 NY                CT             VA   ...
- $Zip code                    c5000 190351349   21044              100214823         069061439      2200 ...
- $Eligible to Order and Refer c5000 N           Y                  Y                 Y              Y    ...
- $Last updated                c5000 02/15/2024  08/15/2024         08/15/2024        01/15/2024     02/1 ...</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Make a request for the <em>next</em> 5,000 rows:</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="fu">request</span>(<span class="st">"https://data.cms.gov/data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data?size=5000&amp;offset=5000"</span>) <span class="sc">|&gt;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">resp_body_json</span>(<span class="at">simplifyVector =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">terse</span>(<span class="at">width =</span> <span class="dv">110</span>, <span class="at">prefix =</span> <span class="st">"- "</span>, <span class="at">config =</span> <span class="fu">list</span>(<span class="at">gsep =</span> <span class="st">""</span>, <span class="at">ansi =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $First Name                  c5000 Katherine            Bret           Jeffrey          Lorna           ...
- $Last Name                   c5000 Whipple              Jacobson       Zeller           Benjamin        ...
- $NPI                         c5000 1184839557           1790893956     1730172248       1760572390      ...
- $Specialty                   c5000 Clinical PsychologistOral Surgery   Dentist          Clinical Psycho ...
- $Optout Effective Date       c5000 08/29/2013           06/28/2014     09/28/2022       07/01/2014      ...
- $Optout End Date             c5000 08/29/2025           06/28/2026     09/28/2026       07/01/2026      ...
- $First Line Street Address   c5000 10529 SAINT PAUL ST  1718 S 288TH ST1101 S AIRLINE RD455 E 200 S     ...
- $Second Line Street Address  c5000                                                      STE 110         ...
- $City Name                   c5000 KENSINGTON           FEDERAL WAY    MOUNT PLEASANT   SALT LAKE CITY  ...
- $State Code                  c5000 MD                   WA             WI               UT              ...
- $Zip code                    c5000 208952614            98003          534063888        841112156       ...
- $Eligible to Order and Refer c5000 N                    Y              N                Y               ...
- $Last updated                c5000 09/15/2023           07/15/2024     11/15/2024       08/15/2024      ...</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Continue increasing the offset until you reach the count from step 1</li>
</ol>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">request</span>(<span class="st">"https://data.cms.gov/data-api/v1/dataset/9887a515-7552-4693-bf58-735c77af46d7/data?size=5000&amp;offset=10000"</span>) <span class="sc">|&gt;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> </span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">resp_body_json</span>(<span class="at">simplifyVector =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tibble</span>() <span class="sc">|&gt;</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">terse</span>(<span class="at">width =</span> <span class="dv">110</span>, <span class="at">prefix =</span> <span class="st">"- "</span>, <span class="at">config =</span> <span class="fu">list</span>(<span class="at">gsep =</span> <span class="st">""</span>, <span class="at">ansi =</span> <span class="cn">FALSE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- $First Name                  c5000 Steven              David               Michael            Frank     ...
- $Last Name                   c5000 Glickman            Christensen         Ilardi             Shallenbe ...
- $NPI                         c5000 1942372362          1255403606          1558440842         134630003 ...
- $Specialty                   c5000 Dentist             Dentist             Dentist            Internal  ...
- $Optout Effective Date       c5000 11/30/2015          11/30/2015          12/10/2015         01/01/201 ...
- $Optout End Date             c5000 11/30/2025          11/30/2025          12/10/2025         01/01/202 ...
- $First Line Street Address   c5000 71 FRANKLIN TURNPIKE71 FRANKLIN TURNPIKE2713 ROUTE 23 SOUTH1231 COUN ...
- $Second Line Street Address  c5000 #1-1                #1-1                                             ...
- $City Name                   c5000 WALDWICK            WALDWICK            NEWFOUNDLAND       CARSON CI ...
- $State Code                  c5000 NJ                  NJ                  NJ                 NV        ...
- $Zip code                    c5000 07463               07463               07435              897038372 ...
- $Eligible to Order and Refer c5000 Y                   Y                   Y                  Y         ...
- $Last updated                c5000 12/15/2023          12/15/2023          01/15/2024         02/15/202 ...</code></pre>
</div>
</div>
<section id="pagination-example" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="pagination-example"><span class="header-section-number">3.1</span> Pagination Example</h2>
<p>Paginates through the <a href="https://data.cms.gov/provider-characteristics/medicare-provider-supplier-enrollment/opt-out-affidavits">Opt Out Affidavits</a> data:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>optout_n <span class="ot">&lt;-</span> distribution <span class="sc">|&gt;</span> </span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">"Opt Out Affidavits : "</span>, title), </span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    format <span class="sc">==</span> <span class="st">"API"</span>,</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>    description <span class="sc">==</span> <span class="st">"latest"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_glue_data</span>(<span class="st">"{accessURL}/stats"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">request</span>() <span class="sc">|&gt;</span> </span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> </span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">resp_body_json</span>()</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>optout_n<span class="sc">$</span>total_rows <span class="sc">/</span> <span class="dv">5000</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9.6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># req_perform_iterative()</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="find-the-number-of-rows" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="find-the-number-of-rows"><span class="header-section-number">3.2</span> Find the Number of Rows</h2>
<p>You can use the <code>data-viewer/stats</code> or <code>data/stats</code> endpoints i.e.,</p>
<ul>
<li><code>data.cms.gov/data-api/v1/dataset/{ID}/data-viewer/stats</code></li>
<li><code>data.cms.gov/data-api/v1/dataset/{ID}/data/stats</code></li>
</ul>
</section>
</section>
<section id="download-csvzip-versions" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Download CSV/ZIP versions</h1>
<ol type="1">
<li>Start with a request to the <code>data.json</code>.</li>
<li>Matching the dataset <code>title</code> with its name.</li>
<li>The most recent release will be at the top of the <code>distribution</code> list.</li>
<li>There is also a <code>temporal</code> field which can be used to find earlier releases.</li>
<li>Datasets available as either CSV or ZIP files will be designated in the <code>mediaType</code> field.</li>
<li>The <code>downloadURL</code> field will provide a direct download link for the data.</li>
</ol>
<section id="csv-example" class="level2" data-number="4.1">
<h2 data-number="4.1" class="anchored" data-anchor-id="csv-example"><span class="header-section-number">4.1</span> CSV Example</h2>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>orderrefer_url <span class="ot">&lt;-</span> distribution <span class="sc">|&gt;</span> </span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">grepl</span>(<span class="st">"Order and Referring"</span>, title), </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    mediaType <span class="sc">==</span> <span class="st">"text/csv"</span>,</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    modified <span class="sc">==</span> <span class="fu">max</span>(modified)) <span class="sc">|&gt;</span> </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(downloadURL)</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>orderrefer_csv <span class="ot">&lt;-</span> <span class="fu">read_csv_arrow</span>(</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> orderrefer_url, </span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">as_data_frame =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_duckdb</span>()</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="co"># approx 2 million rows</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>orderrefer_csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;arrow_002&gt; [?? x 8]
# Database: DuckDB v1.1.3 [Andrew@Windows 10 x64:R 4.4.2/:memory:]
          NPI LAST_NAME     FIRST_NAME PARTB DME   HHA   PMD   HOSPICE
        &lt;int&gt; &lt;chr&gt;         &lt;chr&gt;      &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;  
 1 1558467555 .MCINDOE      THOMAS     N     Y     N     Y     N      
 2 1770667479 A             SCOTT      N     Y     N     Y     N      
 3 1417051921 A BELLE       N          Y     Y     Y     Y     N      
 4 1356025894 A FOLEY       MEGAN      Y     Y     Y     Y     N      
 5 1972040137 A NOVOTNY     ELIZABETH  Y     Y     Y     Y     N      
 6 1760465553 A SATTAR      MUHAMMAD   Y     Y     Y     Y     Y      
 7 1295400745 A'NEAL        BROGAN     Y     Y     N     N     N      
 8 1265446264 A'VANT FOWLER CATHERINE  Y     Y     N     N     N      
 9 1700562584 AAB           BAILEY     Y     Y     Y     N     Y      
10 1205257284 AAB           KATIE      Y     Y     N     N     N      
# ℹ more rows</code></pre>
</div>
</div>
</section>
<section id="zip-example" class="level2" data-number="4.2">
<h2 data-number="4.2" class="anchored" data-anchor-id="zip-example"><span class="header-section-number">4.2</span> ZIP Example</h2>
<p><em>CMS Summary Statistics/COVID data -&gt; Likely not relevant to package scope</em></p>
</section>
</section>
<section id="additional-resources" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Additional Resources</h1>
<p>The data.json has been updated to include a resources API that allows you to easily find the download URL for resources, which are supplemental documents to the main dataset. 1. Start with a request to the data.json. Always start with the catalog, do not hard code or try to predict the download URL. The catalog will update automatically when new data is available. 2. Find the dataset within the catalog by matching the “title” with the name of the dataset. 3. Within each dataset, there is an array called distribution which will contain all the versions of the data in all available formats for each version. 4. The most recent release will be at the top of the distribution list, there is also a “temporal” field which can be used to find earlier releases. 5. The “resourcesAPI” is a secondary API endpoint from data.json that will provide a link for the resources connected to the dataset and the download URL for the supporting documents. 6. Using the link stored in the “resourcesAPI”, limit by the “name” of the resource you want to download. The name of the resource may change between versions. 7. The “downloadURL” will provide a direct download link for the resource.</p>
<section id="resource-example" class="level2" data-number="5.1">
<h2 data-number="5.1" class="anchored" data-anchor-id="resource-example"><span class="header-section-number">5.1</span> Resource Example</h2>
<p>Resource File Download URL Link for Latest Dataset Code Example</p>
<p>Finds the download link for the latest <a href="https://data.cms.gov/provider-characteristics/medicare-provider-supplier-enrollment/medicare-fee-for-service-public-provider-enrollment">Medicare Fee-For-Service Public Provider Enrollment Reassignment Sub-File</a></p>
<div class="cell" data-layout-align="center">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>resp_resources <span class="ot">&lt;-</span> distribution <span class="sc">|&gt;</span> </span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">grepl</span>(<span class="st">"Medicare Fee-For-Service"</span>, title),</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>  description <span class="sc">==</span> <span class="st">"latest"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(resourcesAPI) <span class="sc">|&gt;</span> </span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">request</span>() <span class="sc">|&gt;</span> </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">req_perform</span>() <span class="sc">|&gt;</span> </span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">resp_body_json</span>(<span class="at">simplifyVector =</span> <span class="cn">FALSE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list_flatten</span>() <span class="sc">|&gt;</span> </span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list_flatten</span>()</span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>reassign_url <span class="ot">&lt;-</span> <span class="fu">tibble</span>(</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="fu">gelm</span>(resp_resources, <span class="st">"name$"</span>) <span class="sc">|&gt;</span> <span class="fu">delist</span>(),</span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">size =</span> <span class="fu">gelm</span>(resp_resources, <span class="st">"fileSize$"</span>) <span class="sc">|&gt;</span> <span class="fu">delist</span>(),</span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">url =</span>  <span class="fu">gelm</span>(resp_resources, <span class="st">"downloadURL$"</span>) <span class="sc">|&gt;</span> <span class="fu">delist</span>()) <span class="sc">|&gt;</span> </span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">grepl</span>(<span class="st">"Reassignment"</span>, name))</span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>reassign_url <span class="sc">|&gt;</span> </span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">terse</span>(<span class="at">width =</span> <span class="dv">110</span>, </span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>        <span class="at">prefix =</span> <span class="st">"- "</span>, </span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>        <span class="at">config =</span> <span class="fu">list</span>(<span class="at">gsep =</span> <span class="st">""</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>- [38;5;253m$[39m[49mname [38;5;72mc1[39m[49m [38;5;237mReassignment Sub-File 2024 Q3                                                                 [0m ...
- [38;5;253m$[39m[49msize [38;5;72mi1[39m[49m [38;5;237m108956340                                                                                     [0m ...
- [38;5;253m$[39m[49murl  [38;5;72mc1[39m[49m [38;5;237mhttps://data.cms.gov/sites/default/files/2024-10/9dc1f6a0-4339-4250-b9da-d25284650662/PPEF_Rea[0m ...</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>reassign_csv <span class="ot">&lt;-</span> <span class="fu">read_csv_arrow</span>(</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> reassign_url<span class="sc">$</span>url, </span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">as_data_frame =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">to_duckdb</span>()</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>reassign_csv</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># Source:   table&lt;arrow_003&gt; [?? x 2]
# Database: DuckDB v1.1.3 [Andrew@Windows 10 x64:R 4.4.2/:memory:]
   REASGN_BNFT_ENRLMT_ID RCV_BNFT_ENRLMT_ID
   &lt;chr&gt;                 &lt;chr&gt;             
 1 I20031103000001       O20031216000213   
 2 I20031103000001       O20111004000177   
 3 I20031103000007       O20040308000883   
 4 I20031103000007       O20051206000046   
 5 I20031103000014       O20070303000050   
 6 I20031103000014       O20221026001638   
 7 I20031103000020       O20190812002967   
 8 I20031103000033       O20181107003537   
 9 I20031103000033       O20181204002777   
10 I20031103000037       O20051216000183   
# ℹ more rows</code></pre>
</div>
</div>
</section>
</section>
<section id="filtering-and-manipulating-data" class="level1" data-number="6">
<h1 data-number="6"><span class="header-section-number">6</span> Filtering and Manipulating Data</h1>
<hr>
<section id="schema" class="level2" data-number="6.1">
<h2 data-number="6.1" class="anchored" data-anchor-id="schema"><span class="header-section-number">6.1</span> Schema</h2>
<div class="sourceCode" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="sc">&lt;</span>data.json<span class="sc">&gt;</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span><span class="sc">--</span><span class="er">@</span>context</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|--</span><span class="er">@</span>id</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|--</span><span class="er">@</span>type</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|--</span>conformsTo</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|--</span>describedBy</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span><span class="er">==&lt;</span>dataset<span class="sc">&gt;</span></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span><span class="er">@</span>type</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>accessLevel</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>accrualPeriodicity</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>bureauCode</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>contactPoint</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>describedBy</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>dataQuality</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>description</span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|==&lt;</span>distribution<span class="sc">&gt;</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>  <span class="er">|</span>    <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span><span class="er">@</span>type</span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span>format</span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span>accessURL</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span>resourcesAPI</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span>description</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span>title</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span>modified</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span>temporal</span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span>downloadURL</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span>    <span class="er">|</span><span class="sc">--</span>mediaType</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>identifier</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>keyword</span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>landingPage</span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>language</span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>license</span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>modified</span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>programCode</span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>publisher</span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>references</span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>temporal</span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>theme</span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>    <span class="er">|</span><span class="sc">--</span>title</span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a>  <span class="sc">|</span>____<span class="sc">|--</span>describedByType</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/andrewallenbruce\.github\.io\/providerdev\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./overview.html" class="pagination-link" aria-label="Overview">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Overview</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="./schema.html" class="pagination-link" aria-label="Schema">
        <span class="nav-page-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Schema</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->




<footer class="footer"><div class="nav-footer"><div class="nav-footer-center"><div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/andrewallenbruce/providerdev/edit/main/faq.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li><li><a href="https://github.com/andrewallenbruce/providerdev/issues/new" class="toc-action"><i class="bi empty"></i>Report an issue</a></li><li><a href="https://github.com/andrewallenbruce/providerdev/blob/main/faq.qmd" class="toc-action"><i class="bi empty"></i>View source</a></li></ul></div></div></div></footer><script src="site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>